webpackJsonp([73],{859:function(n,e,t){"use strict";function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function o(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?n:e}function a(n,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}function r(n,e){return Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}Object.defineProperty(e,"__esModule",{value:!0});var s=t(1),l=t.n(s),c=t(32),p=t(48),d=t(54),u=t(5),f=t(26),m=t(119),g=t(8),h=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),x=r(["\n    font-size: 20px;\n    color: #565151;\n    text-align: center;\n    padding-top: 30px;\n    margin-bottom: 10px;\n    font-weight: 600;\n"],["\n    font-size: 20px;\n    color: #565151;\n    text-align: center;\n    padding-top: 30px;\n    margin-bottom: 10px;\n    font-weight: 600;\n"]),b=r(["\n    font-size: 14px;\n    color: #565151;\n    font-weight: 600;\n    margin-top: 20px;\n    padding-left: 30px;\n"],["\n    font-size: 14px;\n    color: #565151;\n    font-weight: 600;\n    margin-top: 20px;\n    padding-left: 30px;\n"]),E=r(["\n    color: #565151;\n    font-weight: 500;\n    display: inline-block;\n    margin: 0 4px;\n"],["\n    color: #565151;\n    font-weight: 500;\n    display: inline-block;\n    margin: 0 4px;\n"]),w=r(["\n    color: #E62427;\n    font-weight: 400;\n    display: inline-block;\n    margin: 0 4px;\n"],["\n    color: #E62427;\n    font-weight: 400;\n    display: inline-block;\n    margin: 0 4px;\n"]),k=r(["\n    color: #333030;\n    font-weight: 400;\n    display: inline-block;\n    margin: 0 4px;\n"],["\n    color: #333030;\n    font-weight: 400;\n    display: inline-block;\n    margin: 0 4px;\n"]),v=r(["\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 20px;\n    color: #565151;\n    font-size: 24px;\n    cursor: pointer;\n"],["\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 20px;\n    color: #565151;\n    font-size: 24px;\n    cursor: pointer;\n"]),y=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-top: 10px;\n    margin-bottom: 30px;\n    padding-left: 30px;\n    padding-right: 30px;\n"],["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-top: 10px;\n    margin-bottom: 30px;\n    padding-left: 30px;\n    padding-right: 30px;\n"]),C=r(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    width: 140px;\n    height: 62px;\n    background-color: #FFF;\n    border: 1px solid #EEEEEE;\n    border-radius: 3px;\n    text-align: center;\n    cursor: pointer;\n"],["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    width: 140px;\n    height: 62px;\n    background-color: #FFF;\n    border: 1px solid #EEEEEE;\n    border-radius: 3px;\n    text-align: center;\n    cursor: pointer;\n"]),F=r(["\n    visibility: ",";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 140px;\n    height: 62px;\n    border: 1px solid #E62427;\n    border-radius: 3px;\n    background-image: linear-gradient(-45deg ,#E62427 15px, transparent 15px);\n"],["\n    visibility: ",";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 140px;\n    height: 62px;\n    border: 1px solid #E62427;\n    border-radius: 3px;\n    background-image: linear-gradient(-45deg ,#E62427 15px, transparent 15px);\n"]),A=r(["\n    position: absolute;\n    right: 1px;\n    bottom: -3px;\n    color: #FFF;\n"],["\n    position: absolute;\n    right: 1px;\n    bottom: -3px;\n    color: #FFF;\n"]),z=r(["\n    font-size: 16px;\n    color: ",";\n    font-weight: 600;\n"],["\n    font-size: 16px;\n    color: ",";\n    font-weight: 600;\n"]),S=r(["\n    font-size: 13px;\n    color: ",";\n    font-weight: 600;\n"],["\n    font-size: 13px;\n    color: ",";\n    font-weight: 600;\n"]),j=r(["\n    padding: 0 0 20px;\n"],["\n    padding: 0 0 20px;\n"]),D=r(["\n    display: inline-block;\n    margin: 0 0 0 8px;\n    input {\n        height: 44px;\n        display: block;\n        padding: 0 16px;\n        font-size: 18px;\n        min-width: 300px;\n    }\n"],["\n    display: inline-block;\n    margin: 0 0 0 8px;\n    input {\n        height: 44px;\n        display: block;\n        padding: 0 16px;\n        font-size: 18px;\n        min-width: 300px;\n    }\n"]),P=r(["\n    padding: 0 30px;\n    font-size: 14px;\n    margin: 10px 0 0;\n    a {\n        color: #333;\n        text-decoration: underline;\n        font-weight: 600;\n    }\n"],["\n    padding: 0 30px;\n    font-size: 14px;\n    margin: 10px 0 0;\n    a {\n        color: #333;\n        text-decoration: underline;\n        font-weight: 600;\n    }\n"]),_=r(["\n    padding: 12px 0;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    background-color: #FFFFFF;\n    box-shadow: inset 0 1px 0 0 #F0EFEE;\n"],["\n    padding: 12px 0;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    background-color: #FFFFFF;\n    box-shadow: inset 0 1px 0 0 #F0EFEE;\n"]),M=r(["\n    margin: 0 6px;\n    padding: 0 20px;\n    min-width: 104px;\n    height: 36px;\n    line-height: 36px;\n    text-align: center;\n    color: #FFF;\n    font-size: 14px;\n    border-radius: 3px;\n    background-color: ",";\n    cursor: pointer;\n"],["\n    margin: 0 6px;\n    padding: 0 20px;\n    min-width: 104px;\n    height: 36px;\n    line-height: 36px;\n    text-align: center;\n    color: #FFF;\n    font-size: 14px;\n    border-radius: 3px;\n    background-color: ",";\n    cursor: pointer;\n"]),O=r(["\n    font-size: 14px;\n    color: #E62427;\n    padding-top: 12px;\n    padding-bottom: 12px;\n    text-align: center;\n"],["\n    font-size: 14px;\n    color: #E62427;\n    padding-top: 12px;\n    padding-bottom: 12px;\n    text-align: center;\n"]),T=u.default.div(x),I=u.default.div(b),N=u.default.span(E),L=u.default.span(w),Y=u.default.span(k),B=u.default.div(v),K=u.default.div(y),W=u.default.div(C),G=u.default.div(F,function(n){return n.isActive?"visible":"hidden"}),R=u.default.div(A),q=u.default.div(z,function(n){return n.isActive?"#E62427":"#565151"}),Q=u.default.div(S,function(n){return n.isActive?"#E62427":"#8A807F"}),J=u.default.div(j),Z=f.h.Input.extend(D),H=u.default.div(P),U=u.default.div(_),V=u.default.div(M,function(n){return n.isCancel?"#C6BDBC":"#E00016"}),X=u.default.div(O),$={ai_tw:"https://docs.google.com/forms/d/1gbZGiMfXdLnSPaSxvCrQLPxxG7w5Hvo0u65q8iG5ZBw/viewform?ts=5ae18639&edit_requested=true",financial_management_tw:"https://docs.google.com/forms/d/e/1FAIpQLSfMNzg7jDSGlCViJLEbjShvrzenyfQ8AvEa9q0NFCsfS-btYg/viewform"},nn=function(n){function e(n){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return t.state={token:"",month:3,isLoading:!1,isError:!1,successful:!1},t.closeDialog=t.closeDialog.bind(t),t.switchMonth=t.switchMonth.bind(t),t.subscribe=t.subscribe.bind(t),t.onTokenChange=t.onTokenChange.bind(t),t}return a(e,n),h(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"onTokenChange",value:function(n){this.setState({token:n.target.value})}},{key:"subscribe",value:function(n){var e=this,t=this.state,i=t.token,o=t.month,a=t.isLoading,r=t.successful,s=this.props.cpointsInfo.cpoints;if(s<n){var l=this.props.kwassistCache[this.props.kwassistid];return this.props.webActions.showOverdraftDialog({paymentType:g.a.PAYMENT_TYPE.KWASSIST,cpoints:s,price:n,name:l.name}),void this.closeDialog()}if(!a&&!r)return 0!==n||i?void this.setState({isLoading:!0,isError:!1,errorMessage:""},function(){e.props.kwassistActions.subscribeKwAssist({token:i,assistid:e.props.kwassistid,month:o}).then(function(n){e.setState({isLoading:!1,successful:!0},function(){var n=e.props.kwassistCache[e.props.kwassistid];e.props.pointsActions.getCPointsBalance(),e.props.webActions.showPaymentSuccessDialog({name:n.name,paymentType:g.a.PAYMENT_TYPE.KWASSIST}),e.closeDialog()})}).catch(function(n){var t=n.message,i=void 0===t?"\u7cfb\u7d71\u5fd9\u788c\u4e2d\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66":t;if(n&&"error.privilege.tokenFailed"===n.code)i="\u932f\u8aa4\u7684\u514c\u63db\u78bc";else{if(n&&"error.isSubscribed"===n.code){var o=e.props.kwassistCache[e.props.kwassistid];return e.props.pointsActions.getCPointsBalance(),e.props.webActions.showPaymentSuccessDialog({name:o.name,paymentType:g.a.PAYMENT_TYPE.KWASSIST}),void e.closeDialog()}n&&"error.rscNotExist"===n.code?i="\u6b64\u7279\u52a9\u70ba\u7121\u6cd5\u8a02\u95b1":n&&"error.CPointNotEnouth"===n.code?i="\u9ede\u6578\u4e0d\u8db3\uff0c\u7121\u6cd5\u8a02\u95b1":n&&"error.account.isFreeze"===n.code&&(i="\u5e33\u865f\u88ab\u51cd\u7d50\uff0c\u4e0d\u5141\u8a31\u8a02\u95b1\u77e5\u8b58\u7279\u52a9")}e.setState({isError:!0,errorMessage:i,isLoading:!1})})}):void this.setState({errorMessage:"\u8acb\u586b\u5beb\u514c\u63db\u78bc"})}},{key:"switchMonth",value:function(n){if(n===this.state.month)return null;this.setState({month:n})}},{key:"closeDialog",value:function(){this.props.webActions.hideBuyKwassistConfirmDialog()}},{key:"render",value:function(){var n=this,e=this.props,t=e.kwassistid,i=e.kwassistCache,o=i[t],a=o.month_price,r=void 0===a?{}:a,s=Object.keys(r);if(!s.some(function(n){return r[n]>0}))return l.a.createElement(f.f.Content,{width:"507px",maxWidth:"507px",padding:"0",backgroundColor:"#fff",borderRadius:"3px",visible:!0,animation:"zoom",maskAnimation:"fade",closable:!1,maskClosable:!0,keyboard:!1,onClose:this.closeDialog},l.a.createElement(T,null,l.a.createElement(m.a,null,"\u8a02\u95b1\u78ba\u8a8d")),l.a.createElement(I,null,l.a.createElement(m.a,null,"\u8a02\u95b1\u7279\u52a9"),"\uff1a",l.a.createElement(Y,null,o.name)),l.a.createElement(J,null,l.a.createElement(I,null,l.a.createElement(m.a,null,"\u8f38\u5165\u514c\u63db\u78bc"),"\uff1a",l.a.createElement(Z,null,l.a.createElement("input",{type:"textz",placeholder:"\u8f38\u5165\u514c\u63db\u78bc",value:this.state.token,onChange:this.onTokenChange}))),l.a.createElement(H,null,"\u6c92\u6709\u514c\u63db\u78bc\uff1f\u7acb\u5373\u586b\u5beb",l.a.createElement("a",{href:$[o.assistid],target:"_blank"},"\u554f\u5377"),"\u544a\u8a34\u6211\u5011\u60a8\u7684\u60f3\u6cd5\u7372\u5f97\u514c\u63db\u78bc\uff01")),this.state.errorMessage?l.a.createElement(X,null,this.state.errorMessage):null,l.a.createElement(U,null,this.state.isError?l.a.createElement(V,{onClick:function(){return n.subscribe(r[n.state.month])}},l.a.createElement(m.a,null,"\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u518d\u5617\u8a66\u4e00\u6b21")):l.a.createElement(V,{onClick:function(){return n.subscribe(r[n.state.month])}},l.a.createElement(m.a,null,"\u78ba\u8a8d\u8a02\u95b1")),l.a.createElement(V,{isCancel:!0,onClick:this.closeDialog},l.a.createElement(m.a,null,"\u53d6\u6d88"))),l.a.createElement(B,{onClick:this.closeDialog},l.a.createElement("i",{className:"zmdi zmdi-close"})));var c=this.props.cpointsInfo?this.props.cpointsInfo:{},p=c.cpoints>0?c.cpoints:0;return l.a.createElement(f.f.Content,{width:"507px",maxWidth:"507px",padding:"0",backgroundColor:"#fff",borderRadius:"3px",visible:!0,animation:"zoom",maskAnimation:"fade",closable:!1,maskClosable:!0,keyboard:!1,onClose:this.closeDialog},l.a.createElement(T,null,l.a.createElement(m.a,null,"\u8a02\u95b1\u78ba\u8a8d")),l.a.createElement(I,null,l.a.createElement(m.a,null,"\u73fe\u91d1\u9ede\u6578"),"\uff1a",l.a.createElement(L,null,p),l.a.createElement(N,null,l.a.createElement(m.a,null,"\u9ede"))),l.a.createElement(I,null,l.a.createElement(m.a,null,"\u8a02\u95b1\u7279\u52a9"),"\uff1a",l.a.createElement(Y,null,o.name)),l.a.createElement(I,null,l.a.createElement(m.a,null,"\u8a02\u95b1\u671f\u9593")),l.a.createElement(K,null,s.map(function(e,t){var i=r[e],o=parseInt(e,10),a="";switch(o){case 3:a="\u4e00\u5b63";break;case 6:a="\u534a\u5e74";break;case 12:a="\u4e00\u5e74"}return l.a.createElement(W,{key:o,onClick:function(){return n.switchMonth(o)}},l.a.createElement(q,{isActive:o===n.state.month},l.a.createElement(m.a,null,a," ( ",o," \u500b\u6708)")),l.a.createElement(Q,{isActive:o===n.state.month},i+" ",l.a.createElement(m.a,null,"\u9ede")),l.a.createElement(G,{isActive:o===n.state.month},l.a.createElement(R,null,l.a.createElement("i",{className:"zmdi zmdi-check"}))))})),l.a.createElement(U,null,this.state.isError?l.a.createElement(V,{onClick:function(){return n.subscribe(r[n.state.month])}},l.a.createElement(m.a,null,"\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u518d\u5617\u8a66\u4e00\u6b21")):l.a.createElement(V,{onClick:function(){return n.subscribe(r[n.state.month])}},l.a.createElement(m.a,null,"\u78ba\u8a8d\u8a02\u95b1")),l.a.createElement(V,{isCancel:!0,onClick:this.closeDialog},l.a.createElement(m.a,null,"\u53d6\u6d88"))),l.a.createElement(B,{onClick:this.closeDialog},l.a.createElement("i",{className:"zmdi zmdi-close"})),this.state.errorMessage?l.a.createElement(X,null,this.state.errorMessage):null)}}]),e}(s.Component),en=function(n){return{kwassistid:n.web.buyKwassistConfirmDialog.kwassistid,kwassistCache:n.kwassist.kwassistCache,cpointsInfo:n.points.cpointsInfo}},tn=function(n){return{webActions:Object(c.bindActionCreators)(d.a.webActionCreators,n),kwassistActions:Object(c.bindActionCreators)(d.a.kwassistActionCreators,n),pointsActions:Object(c.bindActionCreators)(d.a.pointsActionCreators,n)}};e.default=Object(p.b)(en,tn,null,{withRef:!0})(nn)}});
//# sourceMappingURL=73.f5cf670a.chunk.js.map