(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{2021:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(17),p=n(8),h=n.n(p),f=n(2113),v=n.n(f),b=n(264),g=n.n(b),y=n(2005),w=n(2249),E=n(2250),C=n(10),k=function(e){return d.a.createElement(C.a,e,d.a.createElement("path",{d:"M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z",fillRule:"evenodd"}))};k.defaultProps={name:"Share"};var O=k,j=n(50),N=n(16),S=n(15),A=n(109),T=n(45),R=n(152),I=n(537),x=n(21),P=n(19);n(2115);function M(e){return e&&e.startsWith("//")?"https:".concat(e):e}function L(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}var D=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={qrCodeUrl:"",url:""},n.togglerRef=d.a.createRef(),n.shouldShowMenu=function(){var e=n.props,t=e.onTogglerClick,a=e.disabled;return!1!==t()&&!a},n.handleTogglerClick=function(e){n.shouldShowMenu()?(n.loadQrcodeImage(),n.onShare(e)):e.preventDefault()},n.open=function(e){n.shouldShowMenu()&&(n.loadQrcodeImage(),n.menu.popover.open(),n.onShare(e))},n.onShare=function(){var e=n.props,t=e.id,a=e.type,r=e.getShareText,o=e.zaShareId;r(t,a),S.default.trackEvent(n.togglerRef.current,Object.assign({action:"Share",element:"Button",is_intent:!0,element_name:P.R[a]},o&&{id:o}))},n.copyLink=function(){var e=n.props,t=e.type,a=e.title,r=e.authorName,o=e.href,i=e.showNotification,s=T.b[t]||"",c=a?"".concat(a," - "):"",l=r&&"匿名用户"!==r&&s?"".concat(r,"的").concat(s," - "):"",u=o?Object(A.toAbsoluteUrl)(o):n.url();v()("".concat(c).concat(l,"知乎\n").concat(M(u))),i("链接复制成功！")},n.url=function(){var e=n.props,t=e.id,a=e.type;return M(Object(A.toAbsoluteUrl)(n.props.url))||"".concat(location.origin,"/").concat(a,"/").concat(t)},n.loadQrcodeImage=function(){var e=n.state.qrCodeUrl;if(!e){var t="".concat(location.protocol,"//www.zhihu.com/"),a=n.url();e="".concat(t,"qrcode?").concat(L({url:"".concat(a).concat("#showWechatShareTip")})),n.setState({qrCodeUrl:e,url:a})}},n.shareToWeibo=function(){var e={appKey:"3063806388"},t=n.props.shareText;t&&(e.title=t);var a="http://service.weibo.com/share/share.php?".concat(L(e));window.open(a,"_blank","width=615,height=505")||(location.href=a)},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.togglerClassName,r=t.positionStatus,o=t.toggler,i=t.type,s=t.disabled,c=this.state.qrCodeUrl,l=d.a.createElement("div",{className:h()("ShareMenu-toggler",a)},c&&d.a.createElement("img",{className:"ShareMenu-fakeQRCode",src:c,alt:"微信二维码"}),Object(u.cloneElement)(o,{onMouseEnter:this.loadQrcodeImage,disabled:s,ref:this.togglerRef}));return d.a.createElement(d.a.Fragment,null,d.a.createElement(R.c,{keyMap:{SHARE:"f x"},handlers:{SHARE:this.open}}),d.a.createElement(j.c,{className:h()("ShareMenu",n),positionStatus:r,ref:function(t){e.menu=t},toggler:l,onClick:this.handleTogglerClick},d.a.createElement(j.b,{className:"ShareMenu-button",onClick:this.copyLink},d.a.createElement(y.a,{size:20,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"),"live"===i||d.a.createElement(j.b,{className:"ShareMenu-button",onClick:this.shareToWeibo},d.a.createElement(w.a,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"),d.a.createElement(j.b,{tag:"div",className:"ShareMenu-wechat",noActive:!0},d.a.createElement(N.c,{className:"ShareMenu-button",preset:"plain"},d.a.createElement(E.a,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"),d.a.createElement("img",{className:"ShareMenu-qrCode",src:c,alt:"微信二维码"}))))}}]),t}(u.Component);D.propTypes={toggler:l.a.node,onTogglerClick:l.a.func,zaShareId:l.a.number},D.defaultProps={toggler:d.a.createElement(N.c,{preset:"plain",icon:O,label:"分享"}),onTogglerClick:g.a};t.a=Object(m.connect)(function(e,t){var n=t.id,a=t.type;return{shareText:e.shareTexts["".concat(a).concat(n)]}},{showNotification:x.h,getShareText:I.b})(D)},2022:function(e,t,n){"use strict";var a=n(22),r=n(3),o=n(4),i=n(7),s=n(5),c=n(6),l=n(0),u=n.n(l),d=n(496),m=n(152),p=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={ref:null},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabIndex,r=t.children,o=Object(a.a)(t,["tabIndex","children"]),i=this.state.ref;return u.a.createElement(d.a,Object.assign({tabIndex:n,onRef:function(t){return!e.state.ref&&e.setState({ref:t})}},o),u.a.createElement(m.d.Provider,{value:i},r))}}]),t}(l.Component);p.defaultProps={tabIndex:0};var h=p;n.d(t,"a",function(){return h})},2023:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(8),p=n.n(m),h=n(34),f=n.n(h),v=n(57),b=n.n(v),g=n(378),y=n(2153),w=n(2039),E=(n(2054),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={isInputing:!1,value:n.props.value||""},n.handleChange=function(e){n.setState({value:Object(g.cutStringWidth)(e.target.value,30)})},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.value&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInputing,a=t.value,r=this.props.onChange,o=!n&&!a,i=!n&&a;return d.a.createElement("div",{className:"Editable-VideoTitleInput-container"},d.a.createElement(w.a,null,d.a.createElement("div",{className:p()("Editable-VideoTitleInput-innerContainer",{"Editable-VideoTitleInput-innerContainer--isBeforeIconShown":o}),onClick:function(){return e.setState({isInputing:!0})}},o&&d.a.createElement(y.a,{className:"Editable-VideoTitleInput-beforeIcon",center:!0}),!n&&d.a.createElement("div",{className:p()("Editable-VideoTitleInput-value",{"Editable-VideoTitleInput-value--noContent":!a})},a||"好的标题可以获得更多的推荐及关注者"),n&&d.a.createElement("input",{className:"Editable-VideoTitleInput",value:a,ref:function(e){e&&e.focus()},placeholder:"标题长度不超过 15 个字",onChange:this.handleChange,onBlur:function(t){e.setState({isInputing:!1}),r(t.target.value)}}),i&&d.a.createElement(y.a,{className:"Editable-VideoTitleInput-afterIcon",center:!0}))))}}]),t}(u.Component)),C=n(2024),k=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={shown:!1},n.handleObserve=function(e){(e[0].isIntersecting||e[0].intersectionRatio>0)&&n.setState({shown:!0})},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.rootMargin,a=e.children;return this.state.shown?a:d.a.createElement(C.a,{rootMargin:n,onObserve:this.handleObserve,threshold:[0,.1]},t||d.a.createElement("div",{style:{height:"1px"}}))}}]),t}(u.Component);k.propTypes={placeholder:l.a.element,rootMargin:l.a.string},k.defaultProps={rootMargin:"200px"};var O=k,j=n(2154),N=n(2055),S=n.n(N),A=function(e){var t=e.className;return d.a.createElement("svg",{viewBox:"0 0 72 72",className:t},d.a.createElement("circle",{cx:"36",cy:"36",fill:"#fff",fillOpacity:".95",r:"36"}),d.a.createElement("path",{d:"M50.835 37.06L29.477 49.97a1.203 1.203 0 0 1-1.664-.43 1.25 1.25 0 0 1-.17-.631V23.091c0-.682.543-1.234 1.213-1.234.219 0 .433.06.62.173l21.359 12.91a1.245 1.245 0 0 1 0 2.12z",fill:"#444",fillRule:"nonzero"}))},T=(n(2056),function(){return d.a.createElement("div",{className:"VideoCardPlayButton"},d.a.createElement(A,{className:"VideoCardPlayButton-icon"}))}),R=function(e){var t=e.fileSize;return d.a.createElement("div",{className:"VideoCardPlayButton-withFileSize--outer"},d.a.createElement("span",{className:"VideoCardPlayButton-withFileSize"},d.a.createElement(j.a,{center:!0,size:14}),t?S()(t,{decimalPlaces:1,unit:"MB"}):"流量播放"))};function I(e){var t=e.thumbnail,n=e.isLens,a=e.canPlay;return n||a?t&&"string"==typeof t?d.a.createElement("img",{src:t,alt:"视频封面"}):t:d.a.createElement(A,{className:"VideoCard-playIcon VideoCard-playIcon--nonLens"})}n(2057);var x=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={isMobile:!1,playerShown:!1,playerLoading:!1},n.handlePlay=function(e){e.preventDefault();var t=n.props,a=t.interactive,r=t.isConverting,o=t.isLens,i=t.playerUrl,s=t.onPlayFailed,c=t.onLensPlay,l=t.onBeforePlay;a&&!r&&(i||!s?l?Promise.resolve(l()).then(function(e){!1!==e&&n.play()}):o&&c&&c()||n.play():s())},n.handlePlayerLoad=function(){n.loadingCount--,0===n.loadingCount&&n.setState({playerLoading:!1})},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setState({isMobile:b()(navigator.userAgent).Mobile})}},{key:"canPlay",value:function(){var e=this.props,t=e.isPlayable,n=e.playerUrl;return t&&n}},{key:"inlinePlayer",value:function(){var e=this.props,t=e.interactive,n=e.isLens,a=e.onLensPlay,r=e.onBeforePlay,o=this.state.isMobile;return t&&(n?!(a||r):o)}},{key:"showContent",value:function(){var e=this.props,t=e.isLens,n=e.title,a=e.isVideoTitleEditable,r=this.state.isMobile;return!a&&(t?Boolean(n):!(r&&this.canPlay()))}},{key:"showDescription",value:function(){var e=this.props.isLens;return this.showContent()&&!e}},{key:"play",value:function(){var e=this.props.onPlay;this.loadingCount=2,this.setState({playerShown:!0,playerLoading:!0}),setTimeout(this.handlePlayerLoad,1e3),e&&e()}},{key:"renderContent",value:function(){var e=this.props,t=e.interactive,n=e.isLens,a=e.title,r=e.thumbnail,o=e.source,i=e.url,s=e.showPlayButton,c=e.usePlayButtonWithFileSize,l=e.fileSize,u=e.rightBottomButton,m=e.isVideoTitleEditable,h=e.onVideoTitleChange,f=e.isConverting,v=this.canPlay(),b=this.inlinePlayer(),g=d.a.createElement(I,{thumbnail:r,isLens:n,canPlay:v}),y=s&&!f&&(c?d.a.createElement(R,{fileSize:l}):d.a.createElement(T,null)),w=d.a.createElement("div",{className:"VideoCard-layout"},v?d.a.createElement("div",{className:"VideoCard-video"},d.a.createElement("div",{className:"VideoCard-video-content"},b?this.renderPlayer():d.a.createElement("div",{className:p()("VideoCard-thumbnail",{"VideoCard-thumbnail--placeholder":!r}),onClick:this.handlePlay},g,y,u))):d.a.createElement("div",{className:"VideoCard-poster"},g),this.showContent()&&d.a.createElement("div",{className:"VideoCard-content"},d.a.createElement("div",{className:"VideoCard-title"},a),this.showDescription()&&d.a.createElement("div",{className:"VideoCard-description"},o&&d.a.createElement("span",{className:"VideoCard-source"},o),d.a.createElement("span",{className:"VideoCard-badge"},"视频"))),m&&d.a.createElement(E,{value:a,onChange:h}));return n?w:t?d.a.createElement("a",{className:"VideoCard-link",href:i,target:"_blank",rel:"noopener noreferrer"},w):d.a.createElement("div",{className:"VideoCard-link"},w)}},{key:"renderPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.source,a=t.playerUrl,r=t.onIframeRef,o=t.useMSE,i=f.a.stringify({autoplay:e&&"lens"===n,useMSE:o});return d.a.createElement(O,{placeholder:d.a.createElement("div",{className:"VideoCard-player"})},d.a.createElement("div",{className:"VideoCard-player"},d.a.createElement("iframe",{ref:r,frameBorder:0,allowFullScreen:!0,src:"".concat(a,"?").concat(i),onLoad:this.handlePlayerLoad})))}},{key:"render",value:function(){var e=this.props,t=e.interactive,n=e.isConverting,a=this.state,r=a.isMobile,o=a.playerShown,i=a.playerLoading;return d.a.createElement("div",{className:p()("VideoCard",{"VideoCard--converting":n,"VideoCard--interactive":t,"VideoCard--mobile":r})},this.renderContent(),o&&d.a.createElement("div",{className:p()("VideoCard-overlay",{"is-loading":i})},this.renderPlayer(!0)),d.a.createElement("div",{className:p()("VideoCard-mask",{"is-shown":i})}))}}]),t}(u.Component);x.propTypes={interactive:l.a.bool,showPlayButton:l.a.bool,usePlayButtonWithFileSize:l.a.bool,fileSize:l.a.number,onPlay:l.a.func,onPlayFailed:l.a.func,onLensPlay:l.a.func,onBeforePlay:l.a.func,rightBottomButton:l.a.oneOfType([l.a.element,l.a.string]),thumbnail:l.a.oneOfType([l.a.element,l.a.string])},x.defaultProps={interactive:!0,showPlayButton:!0};var P=x;n.d(t,"b",function(){return P}),n.d(t,"a",function(){return A})},2024:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n(28),m=(n(2036),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handleObserve=function(e){var t=n.props.onObserve;t&&t(e)},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.target=Object(d.findDOMNode)(this),this.observer=this.createObserver(),this.observer.observe(this.target)}},{key:"componentWillUnmount",value:function(){this.target&&this.observer.unobserve(this.target)}},{key:"createObserver",value:function(){var e=this.props,t={root:e.root,rootMargin:e.rootMargin,threshold:e.threshold};return new window.IntersectionObserver(this.handleObserve,t)}},{key:"render",value:function(){return this.props.children}}]),t}(u.Component));m.propTypes={root:l.a.object,rootMargin:l.a.string,threshold:l.a.oneOfType([l.a.number,l.a.arrayOf(l.a.number)]),onObserve:l.a.func},t.a=m},2025:function(e,t,n){var a=n(873),r=n(2026);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}o.prototype=a(r.prototype),o.prototype.constructor=o,e.exports=o},2026:function(e,t){e.exports=function(){}},2027:function(e,t,n){var a=n(873),r=n(2026),o=4294967295;function i(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}i.prototype=a(r.prototype),i.prototype.constructor=i,e.exports=i},2028:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(2295),p=n(16),h=n(15),f=n(60),v=n(152),b=(n(2116),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).buttonRef=d.a.createRef(),n.handleClick=function(e){var t=n.props,a=t.zaInfos,r=a.toggleComment,o=a.getCommentAction,i=t.positionStatus,s=t.onClick,c=t.commentsShown;if(h.default.trackEvent(n.buttonRef.current,Object.assign({action:o?o(!c):"Comment",element:"Button",is_intent:!0},r&&{id:r})),s){var l="fixed"===i?"fixed":"bottom",u={commentsShown:!n.props.commentsShown,commentsAutoFocus:!(e instanceof KeyboardEvent),commentPattern:l};e instanceof KeyboardEvent&&"bottom"===l&&n.buttonRef.current.focus(),s(e,u)}},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.count,r=t.commentsShown,o=t.commentClosed;r?e="收起评论":e=a&&!o?"".concat(Object(f.formatNumber)(a)," 条评论"):"添加评论";return d.a.createElement(d.a.Fragment,null,d.a.createElement(v.c,{keyMap:{COMMENT:"c"},handlers:{COMMENT:this.handleClick}}),d.a.createElement(p.c,{onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:m.a,label:e}))}}]),t}(u.Component));b.propTypes={commentsShown:l.a.bool,count:l.a.number,zaInfos:l.a.shape({id:l.a.number,getCommentAction:l.a.func}),onInstance:l.a.func},b.defaultProps={zaInfos:{},onInstance:function(){return null}},t.a=b},2029:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(181),p=n(274),h=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handlePackup=function(){var e=n.props.onClose;window.scrollTo(0,n.originPageYOffset),e&&e()},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.shown,n=e.showPackupButton,a=e.parent,r=e.commentPattern,o=e.commentInputPosition,i=e.onClose,s=e.byComment,c=e.needLoadCommentPermission,l=e.isMobile,u=e.onOrderChange,h=e.onItemLike,f=e.onPaginationClick,v=e.autoFocus,b=e.onMount,g=e.zaInfo;return t?"bottom"===r?d.a.createElement(p.a,{autoFocus:v,parent:a,commentPattern:r,commentInputPosition:o,showPackupButton:n,handlePackupButton:this.handlePackup,needLoadCommentPermission:c,isMobile:l,onOrderChange:u,onItemLike:h,onPaginationClick:f,onMount:b,zaInfo:g}):d.a.createElement(m.b,{size:"fullPage",onClose:i,maskClosable:!1},t&&"fixed"===r&&d.a.createElement(p.a,{parent:a,commentPattern:r,byComment:s,needLoadCommentPermission:c,onOrderChange:u,onItemLike:h,onPaginationClick:f,onMount:b,zaInfo:g})):null}}]),t}(u.Component);h.propTypes={byComment:l.a.oneOfType([l.a.number,l.a.string]),parent:l.a.object,shown:l.a.bool,showPackupButton:l.a.bool,commentPattern:l.a.string,commentInputPosition:l.a.oneOf(["top","bottom"]),onClose:l.a.func,needLoadCommentPermission:l.a.bool,isMobile:l.a.bool,onOrderChange:l.a.func,onItemLike:l.a.func,onPaginationClick:l.a.func,autoFocus:l.a.bool,onMount:l.a.func,zaInfo:l.a.object},h.defaultProps={commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"},t.a=h},2031:function(e,t,n){"use strict";e.exports=n(2048)},2032:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(30),l=n.n(c),u=n(0),d=n.n(u),m=n(28),p=n(8),h=n.n(p),f=n(2040),v=n.n(f),b=n(44),g=n.n(b),y=(n(2076),500),w=3e3;function E(e,t,n){var a=new Image;return a.addEventListener("load",t),a.onerror=n,a.src=e,a}var C=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={thumbnailLoaded:!1,loaded:!1,vagued:!0,computedWidth:n.props.width,computedHeight:n.props.height},n.wrapperNode=null,n.hasLoaded=!1,n.loadThumbnail=function(){var e=n.props,t=e.onLoadImageFail,a=e.onLoadImageTimeout;n.thumbnail=E(n.props.thumbnail,n.handleThumbnailLoaded,function(){t&&t({type:"thumbnail",url:n.props.thumbnail})}),a&&setTimeout(function(){n.thumbnail&&!n.thumbnail.complete&&a({type:"thumbnail",url:n.props.thumbnail})},w)},n.loadImage=function(){var e=n.props,t=e.onLoadImageFail,a=e.onLoadImageTimeout;n.image=E(n.props.url,n.handleImageLoaded,function(){t&&t({type:"image",url:n.props.url})}),a&&setTimeout(function(){n.image&&!n.image.complete&&a({type:"image",url:n.props.url})},w)},n.handleObserve=function(e){e&&n.hasLoaded||e&&(n.hasLoaded=!0,n.loadThumbnail(),n.loadImage())},n.handleThumbnailLoaded=function(){var e=n.props.onLoadImageSuccess;e&&e({type:"thumbnail",url:n.props.thumbnail});var t=n.state,a=t.computedWidth;if(!t.computedHeight){var r=n.thumbnail,o=r.naturalWidth,i=r.naturalHeight*(Number(a)/o);n.setState({computeHeight:i})}n.setState({thumbnailLoaded:!0})},n.handleImageLoaded=function(){var e=n.props.onLoadImageSuccess;e&&e({type:"image",url:n.props.url}),n.setState({loaded:!0}),n.timeout=window.setTimeout(function(){return n.setState({vagued:!1})},y)},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){if(this.wrapperNode){var e=Object(m.findDOMNode)(this.wrapperNode),t=this.state,n=t.computedWidth,a=t.computedHeight;this.setState({computeWidth:n||e.offsetWidth,computeHeight:a||e.offsetHeight})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.thumbnail&&this.thumbnail.removeEventListener("load",this.handleThumbnailLoaded),this.image&&this.image.removeEventListener("load",this.handleImageLoaded)}},{key:"render",value:function(){var e=this,t=g()(this.props,["onLoadImageFail","onLoadImageTimeout","onLoadImageSuccess"]),n=t.className,a=t.url,r=t.alt,o=t.threshold,i=t.thumbnail,s=l()(t,["className","url","alt","threshold","thumbnail"]),c=this.state,u=c.thumbnailLoaded,m=c.loaded,p=c.vagued,f=c.computedWidth,b=c.computedHeight;if(!p)return d.a.createElement("img",Object.assign({className:n,width:f,src:a,alt:r},s));var y=v.a;return d.a.createElement(y,{rootMargin:"".concat(o,"px 0px ").concat(o,"px 0px"),onChange:this.handleObserve,className:h()("VagueImage",n),ref:function(t){e.wrapperNode=t},style:Object.assign({},f&&{width:"".concat(f,"px")},{},b&&{height:"".concat(b,"px")}),"data-src":a},d.a.createElement("div",{className:h()("VagueImage-mask",{"is-active":!m}),style:u?{backgroundImage:"url(".concat(i,")")}:{}}),m&&d.a.createElement("img",{className:"VagueImage-innerLarge",src:a,alt:r}))}}]),t}(u.Component);C.defaultProps={threshold:200};var k=C;n.d(t,"a",function(){return k})},2033:function(e,t,n){"use strict";var a,r=n(3),o=n(4),i=n(7),s=n(5),c=n(26),l=n(6),u=n(0),d=n.n(u),m=n(28),p=n(15),h=n(52),f=n(2043),v=n(508),b=n(91),g=n(2035),y=n(263),w=n(8),E=n.n(w),C=n(2),k=n(81),O=n.n(k),j=n(66),N=n.n(j),S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.a;return function(n){return O()(function(a){function c(){var e,n;Object(r.a)(this,c);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(c)).call.apply(e,[this].concat(o)))).key=t(),n}return Object(l.a)(c,a),Object(o.a)(c,[{key:"render",value:function(){return d.a.createElement(n,Object.assign({},this.props,Object(C.a)({},e,this.key)))}}]),c}(d.a.Component),n)}},A=n(2059),T=n(512),R=n.n(T),I=function(e,t){return function(n){var a,r=(a=[],{value:{},listen:function(e){a.push(e)},unlisten:function(e){a=a.filter(function(t){return t!==e})},emit:function(e){this.value=e,a.forEach(function(t){return t(e)})}}),o=Object(A.createSubscription)({getCurrentValue:function(e){return e.value},subscribe:function(e,t){return e.listen(t),function(){return e.unlisten(t)}}}),i=function(e,t){return e?R()(e,function(e){return function(){return t(e.apply(void 0,arguments))}}):{dispatch:t}}(t,function(e){return r.emit(e(r.value))}),s=Object.assign(function(t){return d.a.createElement(o,{source:r},function(a){return d.a.createElement(n,Object.assign({},t,e({value:a,source:r},t),i))})},{source:r});return O()(s,n)}},x=n(30),P=n.n(x);!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Ok=2]="Ok",e[e.Failed=3]="Failed"}(a||(a={}));var M=function(e){return d.a.createElement("svg",Object.assign({width:60,height:60,viewBox:"0 0 60 60"},e),d.a.createElement("g",{fill:"none",fillRule:"evenodd"},d.a.createElement("ellipse",{fill:"#000",opacity:.45,cx:30,cy:30,rx:30,ry:30}),d.a.createElement("ellipse",{stroke:"#FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:30,cy:30,rx:26,ry:26}),d.a.createElement("svg",Object.assign({x:16,y:18.5},e),d.a.createElement("path",{d:"M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z",fill:"#fff"}))))},L=function(e){return d.a.createElement("svg",Object.assign({width:"60px",height:"60px",viewBox:"0 0 60 60",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},e),d.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},d.a.createElement("ellipse",{fill:"#000000",opacity:"0.45",cx:"30",cy:"30",rx:"30",ry:"30"}),d.a.createElement("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5",cx:"30",cy:"30",rx:"26",ry:"26"}),d.a.createElement("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:"30",cy:"30",rx:"26",ry:"26"},d.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"90 30 30",dur:"0.3s"}),d.a.createElement("animate",{attributeName:"opacity",from:"1",to:"0",dur:"0.3",fill:"freeze"}))),d.a.createElement("svg",{x:"16",y:"18.5"},d.a.createElement("g",{fill:"#ffffff"},d.a.createElement("path",{x:"100",y:"100",d:"M12.8422852,12.9814453 L12.8422852,11.3994141 L7.63916016,11.3994141 L7.63916016,13.0517578 L10.9086914,13.0517578 L10.9086914,13.3242188 C10.8911133,15.2050781 9.46728516,16.4707031 7.39306641,16.4707031 C5.01123047,16.4707031 3.51708984,14.625 3.51708984,11.6367188 C3.51708984,8.70117188 5.00244141,6.84667969 7.34912109,6.84667969 C9.08056641,6.84667969 10.284668,7.68164062 10.7768555,9.2109375 L12.7543945,9.2109375 C12.3237305,6.64453125 10.2319336,5.00976562 7.34912109,5.00976562 C3.79833984,5.00976562 1.50439453,7.61132812 1.50439453,11.6542969 C1.50439453,15.75 3.77197266,18.3076172 7.36669922,18.3076172 C10.6889648,18.3076172 12.8422852,16.2246094 12.8422852,12.9814453 Z M17.5180664,18 L17.5180664,5.31738281 L15.5493164,5.31738281 L15.5493164,18 L17.5180664,18 Z M22.659668,18 L22.659668,12.7441406 L28.1088867,12.7441406 L28.1088867,11.0039062 L22.659668,11.0039062 L22.659668,7.11035156 L28.6098633,7.11035156 L28.6098633,5.31738281 L20.690918,5.31738281 L20.690918,18 L22.659668,18 Z"}))),d.a.createElement("path",{d:"M56,30 C56,15.6405965 44.3594035,4 30,4",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",fill:"none"},d.a.createElement("animate",{attributeName:"opacity",from:"0",to:"1",dur:".6",fill:"freeze"}),d.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"360 30 30",dur:"1.625s",repeatCount:"indefinite"})))},D=function(e){return d.a.createElement("svg",Object.assign({width:60,height:60,viewBox:"0 0 60 60"},e),d.a.createElement("g",{fill:"none",fillRule:"evenodd"},d.a.createElement("ellipse",{fill:"#282828",opacity:.45,cx:30,cy:30,rx:30,ry:30}),d.a.createElement("path",{d:"M41.552 18.93A15.954 15.954 0 0 0 30 14c-8.837 0-16 7.163-16 16s7.163 16 16 16c7.811 0 14.315-5.597 15.72-13",stroke:"#FFF",strokeWidth:2,strokeLinecap:"round"}),d.a.createElement("path",{d:"M45.108 16.236c.44-.33.797-.151.797.4v7.005c0 .55-.358.73-.797.4L40.7 20.736c-.44-.33-.439-.866 0-1.195l4.407-3.305z",fill:"#FFF"})))},q=(n(2084),function(){return new Promise(requestAnimationFrame)}),_=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).handleClick=function(e){var t=n.props,r=t.gifKey,o=t.src,i=t.onSuccess,s=t.onFailed,c=t.onClick,l=t.loadState,u=t.isPlaying;c&&c(e),n.canPlay?n.props.updateGif({gifKey:r,isPlaying:!u}):l!==a.Loading&&(n.props.updateGif({gifKey:r,loadState:a.Loading}),Promise.all([Object(h.loadImage)(o),q().then(q)]).then(function(){i&&i(),n.props.updateGif({gifKey:r,isPlaying:!0,loadState:a.Ok})}).catch(function(e){s&&s(e),n.props.updateGif({gifKey:r,loadState:a.Failed})}))},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){this.props.removeGif({gifKey:this.props.gifKey})}},{key:"render",value:function(){var e,t=this.props,n=t.poster,r=t.src,o=t.size,i=t.loadState,s=t.isPlaying,c=this.canPlay&&s,l=i===a.Loading,u=i===a.Failed;return l?e=d.a.createElement(L,{className:"GifPlayer-icon"}):u?e=d.a.createElement(D,{className:"GifPlayer-icon"}):s||(e=d.a.createElement(M,{className:"GifPlayer-icon"})),e&&(this.lastIcon=e),d.a.createElement("div",{className:E()("GifPlayer",{isPlaying:s}),"data-size":o,onClick:this.handleClick},d.a.createElement("img",{className:"column-gif",role:"presentation",src:c?r:n,"data-thumbnail":n,"data-size":o}),e||this.lastIcon)}},{key:"canPlay",get:function(){return this.props.loadState===a.Ok}}]),t}(d.a.Component);_.defaultProps={isPlaying:!1,loadState:a.Initial};var z=S("gifKey")(I(function(e,t){return e.value[t.gifKey]},{updateGif:function(e){return function(t){var n=e.gifKey,a=e.isPlaying,r=P()(e,["gifKey","isPlaying"]),o=Object.assign({},t);if(a)for(var i=0,s=Object.keys(o);i<s.length;i++){var c=s[i],l=o[c];c!==n&&l.isPlaying&&(o[c]=Object.assign({},l,{isPlaying:!1}))}return Object.assign({},o,Object(C.a)({},n,Object.assign({},t[n],{isPlaying:a},r)))}},removeGif:function(e){return function(t){var n=Object.assign({},t);return delete n[e.gifKey],n}}})(_)),B=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).onSuccess=function(){p.default.trackEvent(Object(c.a)(n),{action:"StatusReport",element:"Card"},{status:{result:"Success",event:{action:"Click"}}})},n.onFailed=function(){p.default.trackEvent(Object(c.a)(n),{action:"StatusReport",element:"Card"},{status:{result:"Fail",event:{action:"Click"}}})},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.default.setModule(this,{module:"GifItem"}),Object(y.onViewedOnce)(Object(m.findDOMNode)(this),function(){p.default.trackCardShow(e,{element:"Card"})})}},{key:"render",value:function(){var e=this.props.data;return d.a.createElement(z,Object.assign({onSuccess:this.onSuccess,onFailed:this.onFailed},e))}}]),t}(u.Component),Q=(n(2085),{fail:"image_web_fail",success:"image_web_success",timeout:"image_web_timeout"});function U(e,t){var n="".concat(Q[e],"_").concat(t.type),a={monitor:{type:"Event",imgResourceErrorInfo:{error_description:n,img_url:t.url,img_from:"web"}}};p.default.trackMonitor({name:n},a)}var F=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).mountEcommerceNodes=function(){Object(v.d)({ecommerce:n.props.ecommerce,parentComponent:Object(c.a)(n)})},n.handleGifPlayerClick=function(e){var t=e.target;"IMG"===t.tagName&&(t.parentNode.classList.contains("isPlaying")||t.dataset.thumbnail&&p.default.trackEvent(t,{action:"Click",element:"Image"}))},n.trackLoadImageFail=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return U.apply(void 0,["fail"].concat(t))},n.trackLoadImageSuccess=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return U.apply(void 0,["success"].concat(t))},n.trackLoadImageTimeout=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return U.apply(void 0,["timeout"].concat(t))},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.mount(),this.mountEcommerceNodes()}},{key:"componentWillUpdate",value:function(e){this.props.html!==e.html&&this.unmount()}},{key:"componentDidUpdate",value:function(e){e.html!==this.props.html&&this.mount(),!e.ecommerce&&this.props.ecommerce&&this.mountEcommerceNodes()}},{key:"componentWillUnmount",value:function(){this.unmount()}},{key:"mount",value:function(){var e=this;this.gifNodes=Array.from(this.root.getElementsByTagName("img")).filter(function(e){return!e.getAttribute("eeimg")&&e.getAttribute("data-thumbnail")}).map(function(t){var n=document.createElement("div");n.className="RichText-gifPlaceholder",n.innerHTML=t.outerHTML,t.parentNode.replaceChild(n,t);var a={src:t.dataset.actualsrc&&t.dataset.actualsrc.endsWith(".gif")?t.dataset.actualsrc:Object(h.imgUrl)(t.dataset.thumbnail,{extension:"gif",size:"b"}),poster:t.dataset.thumbnail,size:t.dataset.size};return Object(m.unstable_renderSubtreeIntoContainer)(e,e.renderGif(a),n),n}),this.mentionNodes=Array.from(this.root.querySelectorAll(".member_mention")).map(function(t){var n=t.getAttribute("data-hash"),a=t.textContent.replace(/^@/,""),r=document.createElement("span");return t.parentNode.replaceChild(r,t),Object(m.unstable_renderSubtreeIntoContainer)(e,e.renderMention({id:n,name:a}),r),r}),this.videoNodes=Array.from(this.root.querySelectorAll(".video-box, .video-link, .unprocessable_video")).map(function(t){var n=t.getAttribute("data-poster"),a="data:,"===n?"":n,r={title:t.getAttribute("data-name"),thumbnail:a,url:t.getAttribute("href"),src:t.getAttribute("data-src")};r=t.getAttribute("data-lens-id")?Object.assign({},r,{isLens:!0,id:t.getAttribute("data-lens-id"),isPlayable:!0}):Object.assign({},r,{isLens:!1,id:t.getAttribute("data-video-id"),isPlayable:"true"===t.getAttribute("data-video-playable")}),t.hasAttribute("data-lens-status")&&(r=Object.assign({},r,{error:{status:t.getAttribute("data-lens-status"),message:t.getAttribute("data-description")}}));var o=document.createElement("div");return t.parentNode.replaceChild(o,t),Object(m.unstable_renderSubtreeIntoContainer)(e,e.renderVideo(r),o),o})}},{key:"unmount",value:function(){this.gifNodes&&this.gifNodes.forEach(function(e){Object(m.unmountComponentAtNode)(e)}),this.mentionNodes&&this.mentionNodes.forEach(function(e){Object(m.unmountComponentAtNode)(e)}),this.videoNodes&&this.videoNodes.forEach(function(e){Object(m.unmountComponentAtNode)(e)}),Object(v.e)({parentComponent:this})}},{key:"renderMention",value:function(e){return d.a.createElement(b.a,{noBadge:!0,user:e,target:"_blank"},"@",e.name)}},{key:"renderVideo",value:function(e){return d.a.createElement(g.a,{data:e})}},{key:"renderGif",value:function(e){return d.a.createElement(B,{data:e})}},{key:"render",value:function(){var e=this;return d.a.createElement(f.a,Object.assign({onRef:function(t){e.root=t},onClick:this.handleGifPlayerClick},this.props,{onLoadImageSuccess:this.trackLoadImageSuccess,onLoadImageFail:this.trackLoadImageFail,onLoadImageTimeout:this.trackLoadImageTimeout}))}}]),t}(u.Component);t.a=F},2034:function(e,t,n){"use strict";var a,r=n(22),o=n(3),i=n(4),s=n(7),c=n(5),l=n(6),u=n(1),d=n.n(u),m=n(0),p=n.n(m),h=n(17),f=n(8),v=n.n(f),b=n(16),g=n(2023),y=n(2017),w=n(506),E=n(184),C=n(2071),k=n(2032),O=n(2024),j=n(263),N=n(514),S=n(52),A=n(15),T=n(152),R=n(262),I=n(26),x=n(526),P=n(24),M=n(2033),L=(n(2111),Object(h.connect)(function(e,t){return{isCurrentUser:Object(P.g)(e,t.data.author)}})(a=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(c.a)(t).call(this))).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(Object(I.a)(e)),e.handleCopy=e.handleCopy.bind(Object(I.a)(e)),e.handleTipClose=e.handleTipClose.bind(Object(I.a)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return Object(l.a)(t,e),Object(i.a)(t,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var a=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],r=["",""];return a=n?a.concat(r):r.concat(a)}},{key:"getCopyText",value:function(e,t,n,a){var r=this.getExtraCopyright(t,n,a).join("\n");return a?r+e:e+r}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,a){var r=this.getExtraCopyright(t,n,a).join("<br />");return"<div>".concat(a?r+e:e+r,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var a=window.getSelection(),r=this.getRange(a),o=r.toString().trim(),i=this.getRangeHtml(r);if(o&&!(o.length<128)){var s=o.length>=512,c=this.getCopyHtml(i,t,n,s),l=this.getCopyText(o,t,n,s),u=e.nativeEvent.clipboardData;if("object"==typeof u){if(u.setData("text/html",'<meta charset="utf-8">'+c),u.setData("text/plain",l),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=c;var m=d.firstChild;m.style.position="fixed",m.style.left="-9999px",document.body.appendChild(m),a.selectAllChildren(m),setTimeout(function(){document.body.removeChild(m),a.removeAllRanges(),a.addRange(r)},200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),a=this.getRange(n),r=a.toString().trim(),o=this.randomRange(44,66);if(!(r.length<=o)){e.preventDefault(),e.stopPropagation();var i,s=a.getBoundingClientRect(),c=window.pageYOffset,l=this.rightClickX,u=this.rightClickY,d="bottom";if(-1!==u)i=u+3;else{var m=this.props.viewPort,p=s.top+c,h=s.bottom+c,f=c+m.top+52,v=c+m.bottom-52;h<f?i=f-52:h<v?i=h:(d="top",i=p>f&&p<v?p:v+52)}var b=-1!==l?l+3:s.left+(s.right-s.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:b,tipY:i,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,a=n.author,r=n.type,o=n.id,i=n.question,s=n.reshipmentSettings,c=n.relationship,l=(c=void 0===c?{}:c).isAuthor,u=c.isAuthorized,d=t.isCurrentUser,m="";if("article"===r?m="https://zhuanlan.zhihu.com/p/".concat(o):"answer"===r&&(m="https://www.zhihu.com/question/".concat(i.id,"/answer/").concat(o)),!d&&!l)switch(s){case"disallowed":this.showTip(e,p.a.createElement("a",{href:"https://www.zhihu.com/terms#sec-licence-6"},"禁止转载"));break;case"need_payment":if(!u){this.showTip(e,p.a.createElement("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(o)},"申请转载"));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,m,a.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.tag,a=e.html,r=e.children,o=e.onClick,i=e.className,s=e.itemProp,c=e.style,l=e.prefix,u=e.ecommerce,d=this.state,m=d.tipShown,h=d.tipContent,f=d.tipX,v=d.tipY,b=d.tipPosition;return p.a.createElement("div",{ref:t,onClick:o,className:i,style:c},l,p.a.createElement(M.a,{itemProp:s,tag:n,html:a,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:u}),r,p.a.createElement(x.a,{shown:m,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:f,y:v,position:b,content:h,className:"CopyrightRichText-tooltip"}))}}]),t}(m.Component))||a);L.propTypes={onRef:d.a.func,viewPort:d.a.object};var D=L,q=n(2035),_=n(498),z=n(23),B=n(871),Q=n.n(B),U=n(134);function F(){var e=Object(_.a)(["发布于",""]);return F=function(){return e},e}function V(){var e=Object(_.a)(["编辑于",""]);return V=function(){return e},e}function H(){var e=Object(_.a)(["发布于",""]);return H=function(){return e},e}var W=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,a=e.updated,r=e.onClick;return p.a.createElement("div",{className:"ContentItem-time"},p.a.createElement(z.Link,{to:t,target:"_blank",onClick:r},p.a.createElement("span",{"data-tooltip":Q()(H(),Object(U.toDateTimeString)(n))},a!==n?Q()(V(),Object(U.toSmartDateTimeString)(a)):Q()(F(),Object(U.toSmartDateTimeString)(n)))))}}]),t}(m.Component);W.propTypes={href:d.a.string,created:d.a.number,updated:d.a.number,onClick:d.a.func};var G,K,Y,$=W,J=n(55),Z=n(538),X=n(385);n(2112);n.d(t,"a",function(){return $});var ee=/.*?(class="link-box")/,te=800,ne=400;var ae=Object(h.connect)(function(e){return{isMobile:Object(J.d)(e)}},{updateReadStatus:Z.b},null,{withRef:!0})((Y=K=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state=Object.assign({},n.getInitTruncatedState(n.props),{shouldSticky:!1,offset:0}),n.richContentRef=p.a.createRef(),n.truncateContent=function(){var e=n.props.isMobile?ne:te,t=n.props.expandedHeight||e;(!n.content||n.content.scrollHeight<t)&&n.setState({isTruncated:!1,isExpanded:!1}),n.content&&n.content.scrollHeight>n.content.offsetHeight&&n.setState({contentCollapsed:!0})},n.updateStateInBrowser=function(){var e=n.props,t=e.excerpt,a=e.html,r=e.expanded,o=e.cover,i=e.unescapable,s=e.limit,c=e.limitWithImage,l=e.truncateHTMLOptions,u=e.truncateDisabled,d=!0,m=n.state.truncatedContent;if(t&&(ee.test(t)||u))m=t;else if(!i){var p=o?c:s,h=n.truncate(a,p,l);d=h.isTruncated,m=h.content}return{isTruncated:d,isExpanded:a&&r,truncatedContent:m,previewImg:null}},n.checkOpenInAppStyle=function(e){},n.toggle=function(e){n.isCollapsed()?n.handleExpand(e):n.handleCollapse(e)},n.handleExpand=function(e){var t=n.props.zaIds.expand;A.default.trackEvent(n.richContentRef.current,Object.assign({action:"Expand",name:e&&e.target.textContent},t&&{id:t}));var a=n.props.onExpand;if(a)a(e);else{var r=n.props,o=r.onToggleExpend,i=r.data,s=i.type,c=i.id;n.context.currentUser&&Object(X.c)("article"===s?"post":s,c,X.a);o&&o(!0),n.setState({isExpanded:!0},function(){"article"===s&&Object(j.onViewedOnce)(n.richContentRef.current,function(){A.default.trackEvent(n.richContentRef.current,{action:"ReadFinish"})})})}},n.handleCollapse=function(){var e=n.props.onToggleExpend;A.default.trackEvent(n.richContentRef.current,{action:"Collapse",element:"Button"});e&&e(!1),n.setState({isExpanded:!1},function(){return n.checkOpenInAppStyle(!1)})},n.handlePreview=function(e){var t=n.state,a=t.isExpanded,r=t.isTruncated&&!a,o=e.target;!r&&"IMG"===o.tagName&&o.classList.contains("zh-lightbox-thumb")&&n.setState({previewImg:o})},n.handlePositionStatusChange=function(e){var t=n.props.onPositionStatusChange;t&&(t(e),n.checkOpenInAppStyle("fixed"===e))},n.handleObserve=function(e){var t=e[0].intersectionRatio;if(t||!document.querySelector("#root").style.position){var a=t>0;a!==n.state.shouldSticky&&(n.setState({shouldSticky:a}),a||n.checkOpenInAppStyle(!1))}},n.handleTrunObserve=function(e){var t=n.props,a=t.data,r=(a.type,a.id,t.updateReadStatus,e[0]),o=r.intersectionRatio,i=r.isIntersecting;n.truncateComputed||(o>0||i)&&(setTimeout(function(){return n.truncateContent()}),n.truncateComputed=!0)},n.isCollapsed=function(){var e=n.props,t=e.after,a=e.before,r=e.unescapable,o=n.state,i=o.isExpanded,s=o.isTruncated;return!a&&!t||r?s&&!i:!i},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState(Object.assign({},this.updateStateInBrowser(),{viewPort:{top:148,bottom:window.innerHeight-56}})),Object(j.onViewedOnce)(this.richContentRef.current,function(){var t=e.props,n=t.data,a=n.type,r=n.id,o=t.expanded;e.context.currentUser&&o&&Object(X.c)("article"===a?"post":a,r,X.a)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){if(this.state.isExpanded&&!t.isExpanded){var n=this.richContentRef.current.getBoundingClientRect();n.top<this.props.topExcludedHeight&&(this.rect=n,this.scroll=window.pageYOffset)}}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,a=n.top,r=n.bottom,o=n.height,i=this.richContentRef.current.offsetHeight,s=window.innerHeight,c=r<s?i-o:a-(s-i);window.scrollTo(0,this.scroll+c),this.rect=null,this.scroll=null}}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,a=e.expanded,r=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:a,truncatedContent:r?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var a=Object(N.truncateHTML)(e,t,n);return{isTruncated:a.isTruncated,content:a.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,a=t.unescapable,r=t.noCollapsed,o=t.expandText,i=void 0===o?"展开阅读全文":o,s=t.onClick,c=t.videoData,l=t.needExpandArrow,u=void 0===l||l,d=this.state,m=d.isExpanded,h=d.isTruncated,f=d.shouldSticky,v=d.offset;if(!m)return[a&&h&&!c&&p.a.createElement(b.c,{key:"expand-button",preset:"plain",className:"ContentItem-rightButton",onClick:s||this.handleExpand},i,u&&p.a.createElement(y.a,{className:"ContentItem-arrowIcon",center:!0})),n&&p.a.createElement(R.a,{key:"actions"},n)];var g=(n||!r)&&p.a.createElement(R.a,{className:"RichContent-actions"},n,!r&&p.a.createElement(b.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse},p.a.createElement("span",{className:"RichContent-collapsedText"},"收起"),p.a.createElement(y.a,{className:"ContentItem-arrowIcon is-active",center:!0})));return f&&g?p.a.createElement(E.a,{offset:v,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange},g):g}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,a=t.excerpt,r=t.data,o=t.itemProp,i=void 0===o?"text":o,s=t.expandText,c=void 0===s?"阅读全文":s,l=t.onClick,u=t.prefix,d=t.unescapable,m=t.collapsedHeight,h=t.ecommerce,f=this.state,g=f.truncatedContent,E=f.previewImg,k=f.viewPort,j=f.contentCollapsed,N=this.isCollapsed(),S=g||a,A="answer"===r.type?Object(C.a)(n):n,T=N?S:A,R=p.a.createElement(D,Object.assign({itemProp:i,key:N,className:v()("RichContent-inner",{"RichContent-inner--collapsed":j}),style:N&&d?{maxHeight:m}:null,tag:"span",onRef:function(t){e.content=t},data:r,html:T,viewPort:k,prefix:u},N&&{onClick:l||this.handleExpand},{ecommerce:h}),!d&&N&&p.a.createElement(b.c,{preset:"plain",className:"ContentItem-more"},c,p.a.createElement(y.a,{className:"ContentItem-arrowIcon",center:!0})),E&&p.a.createElement(w.a,{img:E,onClose:function(){return e.setState({previewImg:null})}}));return d?p.a.createElement(O.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve},R):R}},{key:"render",value:function(){var e=this.props,n=e.unescapable,a=e.after,r=e.before,o=e.extra,i=e.cover,s=e.hasVideo,c=e.renderCanExpandExtra,l=e.className,u=e.videoData,d=e.handleClickVideoMoreButton,h=this.state.isExpanded,f=this.isCollapsed(),b=u?p.a.createElement(m.Fragment,null,p.a.createElement(q.a,{data:u}),p.a.createElement("p",{className:"RichContent-videoMore",onClick:d},"点击查看全文")):this.renderText(),g=h?p.a.createElement(O.a,{rootMargin:"-".concat(240,"px 0px"),onObserve:this.handleObserve},b):b;return p.a.createElement("div",{className:v()("RichContent",l,{"is-collapsed":f,"RichContent--unescapable":n}),ref:this.richContentRef,onClick:this.handlePreview},p.a.createElement(T.c,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle}}),!f&&r,!n&&f&&i&&p.a.createElement(t.Cover,{url:i,hasVideo:s,onClick:this.handleExpand}),g,o||"function"==typeof c&&c(h,this.handleExpand),!f&&a,this.renderActions())}}]),t}(m.Component),K.contextTypes={currentUser:d.a.object},K.propTypes={unescapable:d.a.bool,expanded:d.a.bool,noCollapsed:d.a.bool,limit:d.a.number,limitWithImage:d.a.number,collapsedHeight:d.a.number,html:d.a.string,excerpt:d.a.string,truncateDisabled:d.a.bool,before:d.a.node,after:d.a.node,prefix:d.a.node,extra:d.a.node,renderCanExpandExtra:d.a.func,topExcludedHeight:d.a.number,onPositionStatusChange:d.a.func,type:d.a.string,data:d.a.object,cover:d.a.string,hasVideo:d.a.bool,truncateHTMLOptions:d.a.object,expandText:d.a.string,onToggleExpend:d.a.func,videoData:d.a.object,handleClickVideoMoreButton:d.a.func,zaIds:d.a.shape({expand:d.a.number})},K.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",hasVideo:!1,data:{},collapsedHeight:400,zaIds:{}},K.Cover=function(e){var t=e.url,n=e.hasVideo,a=Object(r.a)(e,["url","hasVideo"]);return p.a.createElement("div",Object.assign({className:v()("RichContent-cover",{"RichContent-cover--mobile":!1})},a),p.a.createElement("div",{className:"RichContent-cover-inner"},p.a.createElement(k.a,{thumbnail:Object(S.imgUrl)(t,"60w"),url:Object(S.imgUrl)(t,"400x224"),alt:"cover"})),n&&p.a.createElement(g.a,{className:"RichContent-cover-play"}))},G=Y))||G;t.b=ae},2035:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"DOM",function(){return b}),n.d(a,"PLAYER",function(){return g});var r={};n.r(r),n.d(r,"PLAYER",function(){return y});var o=n(3),i=n(4),s=n(7),c=n(5),l=n(26),u=n(6),d=n(0),m=n.n(d),p=n(17),h=n(2024),f=n(2023),v=n(2044),b={PLAY:"event/dom/play",PLAYING:"event/dom/playing",PAUSE:"event/dom/pause",ENDED:"event/dom/ended",TIMEUPDATE:"event/dom/timeupdate",ERROR:"event/dom/error",WAITING:"event/dom/waiting"},g={QUALITY_CHANGE:"event/player/quality-change",REQUEST_PLAY:"event/player/request-play",REQUEST_PAUSE:"event/player/request-pause",PLAY_COUNT:"event/player/play-count",PLAY_FAILED:"event/player/play-failed",ENTER_FULLSCREEN:"event/player/enter-fullscreen",EXIT_FULLSCREEN:"event/player/exit-fullscreen"},y={PLAY:"action/player/play",PAUSE:"action/player/pause",SET_VOLUME:"action/player/set-volume",ENTER_FULLSCREEN:"action/player/enter-fullscreen",EXIT_FULLSCREEN:"action/player/exit-fullscreen"},w="griffith";var E,C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments.length>2?arguments[2]:void 0;return{subscribeMessage:function(a){function r(r){var o=r.origin||r.originalEvent.origin,i="*"===t||t===o,s=r.data||{},c=s.from,l=s.id,u=s.payload;if(i&&c===w&&(!n||e===l)&&u){var d=u.messageName,m=u.data;d&&a(d,m,r.source)}}return window.addEventListener("message",r),{unsubscribe:function(){return window.removeEventListener("message",r)}}},dispatchMessage:function(n,a,r){n&&n.postMessage&&n.postMessage({from:w,id:e,payload:{messageName:a,data:r}},t||"*")}}},k=n(55),O=n(21),j=n(226),N=n(180),S=n(872),A=n.n(S),T=function(e,t){return e+(t?Date.now()-t:0)},R=function(e,t){return Math.abs(e-t)<.01},I={auto:"Auto",ld:"LD",sd:"SD",hd:"HD"},x={auto:"自动",ld:"低清",sd:"标清",hd:"超清"},P=[1,2,3,5,8,13];function M(e){var t,n="sd",a=0,r=null,o=0,i=null,s=!1,c=0,l=0;function u(t,s){e(t,Object.assign({play_event_identifier:r,duration:1e3*a,elapsed:T(o,i),video_quality:I[n]},s))}function d(){(++l<15?P.includes(l):l%15==0)&&u({action:"Playing"})}function m(){clearInterval(t)}return{handlePlayEvent:function(e){var n=e.currentTime,s=e.duration;a=s,R(n,0)&&(r=A()(),o=0),i=Date.now(),R(n,0)?u({action:"Play"}):u({action:"ResumePlay"}),l=0,m(),t=setInterval(d,1e3)},handlePauseEvent:function(e){var t=e.currentTime,n=e.duration;i&&(o+=Date.now()-i,i=null),R(t,n)?u({action:"EndPlay"}):u({action:"Pause"}),m()},handleQualityChangeEvent:function(e){var t=e.quality;u({action:"Switch",name:x[t]}),n=t},handleFragmentLoading:function(){s||(c=Date.now())},handleFragmentLoaded:function(){s||(s=!0,u({action:"Load"},{video_load_time:Date.now()-c}))},clearTick:m}}var L=Object(p.connect)(function(e,t){var n=t.data,a=n.isLens,r=n.id;if(a){var o=!1;return"undefined"!=typeof window&&!Object(k.d)(e,{includeTablet:!0})&&/Chrome/.test(navigator.userAgent)&&(o="1"===Object(k.a)(e,"ls_fmp4")),{data:Object.assign({},t.data,{source:"lens",playerUrl:"https://www.zhihu.com/video/".concat(r)}),useMSE:o}}return{data:e.video.data[r]||t.data}},{showNotification:O.h,loadVideo:j.c})(E=Object(N.a)(function(e){var t=e.data,n=t.isLens,a=t.id,r=t.isPlayable;return{module:"VideoItem",content:{type:"Video",sub_type:n?"SelfHosted":"Embedded",video_id:a,is_playable:Boolean(r)},trackCardShow:!0,view:{id:174}}})(E=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).pauseVideoInIframe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.messageHelper.dispatchMessage(e.contentWindow,r.PLAYER.PAUSE,{dontApplyOnFullScreen:t})},n.pauseAllOtherVideos=function(){Array.from(document.querySelectorAll("iframe")).filter(function(e){return e!==n.iframe}).forEach(function(e){return n.pauseVideoInIframe(e)})},n.handleMessage=function(e,t){var r=n.videoTracker,o=r.handlePlayEvent,i=r.handlePauseEvent,s=r.handleQualityChangeEvent,c=r.handleFragmentLoading,l=r.handleFragmentLoaded;switch(e){case a.DOM.PLAY:n.pauseAllOtherVideos(),o(t);break;case a.DOM.PAUSE:i(t);break;case a.PLAYER.QUALITY_CHANGE:s(t);break;case"fragment-loading":c(t);break;case"fragment-loaded":l(t)}},n.handleObserve=function(e){e[0].intersectionRatio<=0&&n.iframe&&n.pauseVideoInIframe(n.iframe,!0)},n.handlePlay=function(){n.props.trackEvent(Object(l.a)(n),{id:5500,action:"Play",element:"Video"})},n.handlePlayFailed=function(){(0,n.props.showNotification)("视频加载失败，请刷新页面重试","red")};var i=e.trackEvent,u=e.data;return n.messageHelper=C(u.id,"*",!0),n.videoTracker=M(function(e,t){i(Object(l.a)(n),e,{play:t})}),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=t.isLens,a=t.id,r=t.playerUrl,o=t.flvPlayerUrl,i=e.loadVideo;n||!a||r||o||i(a);var s=this.messageHelper.subscribeMessage;this.messageSubscription=s(this.handleMessage)}},{key:"componentWillUnmount",value:function(){this.messageSubscription.unsubscribe(),this.videoTracker.clearTick()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.data.error,r=t.onBeforePlay,o=t.useMSE;return m.a.createElement("div",{className:"RichText-video"},a?m.a.createElement(v.a,n):m.a.createElement(h.a,{onObserve:this.handleObserve},m.a.createElement(f.b,Object.assign({},n,{onIframeRef:function(t){return e.iframe=t},onPlay:this.handlePlay,onPlayFailed:this.handlePlayFailed,onBeforePlay:r},o&&{useMSE:!0}))))}}]),t}(d.Component))||E)||E;t.a=L},2036:function(e,t,n){e.exports=n(46)(292)},2037:function(e,t,n){var a=n(2078),r=n(264),o=a?function(e){return a.get(e)}:r;e.exports=o},2038:function(e,t,n){var a=n(2079),r=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=a[t],o=r.call(a,t)?n.length:0;o--;){var i=n[o],s=i.func;if(null==s||s==e)return i.name}return t}},2039:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(0),l=n.n(c),u=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"handleEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return l.a.createElement("div",{onBeforeInput:this.handleEvent,onBlur:this.handleEvent,onCompositionEnd:this.handleEvent,onCompositionStart:this.handleEvent,onCopy:this.handleEvent,onCut:this.handleEvent,onDragEnd:this.handleEvent,onDragEnter:this.handleEvent,onDragLeave:this.handleEvent,onDragOver:this.handleEvent,onDragStart:this.handleEvent,onDrop:this.handleEvent,onFocus:this.handleEvent,onInput:this.handleEvent,onKeyDown:this.handleEvent,onKeyPress:this.handleEvent,onKeyUp:this.handleEvent,onMouseUp:this.handleEvent,onPaste:this.handleEvent,onSelect:this.handleEvent,onClick:this.handleEvent},this.props.children)}}]),t}(l.a.Component)},2040:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(2075);function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=a=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.state={inView:!1},a.node=null,a.handleNode=function(e){a.node&&(0,i.unobserve)(a.node),a.node=e,a.observeNode(),a.props.innerRef&&a.props.innerRef(e)},a.handleChange=function(e){a.setState({inView:e}),a.props.onChange&&a.props.onChange(e)},s(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,i.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,i.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,i.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,a=e.rootMargin,r=e.rootId;(0,i.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:a},r)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,r=e.tag,i=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),s=this.state.inView;return o.createElement(r,a({},i,{ref:this.handleNode}),"function"==typeof n?n(s):null,"function"==typeof t?t(s):t)}}]),t}();c.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=c},2041:function(e,t,n){var a=n(2025),r=n(519),o=n(2037),i=n(2038),s=n(90),c=n(2080),l="Expected a function",u=8,d=32,m=128,p=256;e.exports=function(e){return r(function(t){var n=t.length,r=n,h=a.prototype.thru;for(e&&t.reverse();r--;){var f=t[r];if("function"!=typeof f)throw new TypeError(l);if(h&&!v&&"wrapper"==i(f))var v=new a([],!0)}for(r=v?r:n;++r<n;){f=t[r];var b=i(f),g="wrapper"==b?o(f):void 0;v=g&&c(g[0])&&g[1]==(m|u|d|p)&&!g[4].length&&1==g[9]?v[i(g[0])].apply(v,g[3]):1==f.length&&c(f)?v[b]():v.thru(f)}return function(){var e=arguments,a=e[0];if(v&&1==e.length&&s(a))return v.plant(a).value();for(var r=0,o=n?t[r].apply(this,e):a;++r<n;)o=t[r].call(this,o);return o}})}},2043:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(30),l=n.n(c),u=n(1),d=n.n(u),m=n(0),p=n.n(m),h=n(66),f=n.n(h),v=n(28),b=n(8),g=n.n(b),y=n(44),w=n.n(y),E=n(2077),C=n.n(E),k=n(57),O=n.n(k),j=n(52),N=n(193),S=n(2032),A=n(2031),T=n(2067),R=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,I=function(e){for(var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).decodeValue,a=void 0!==n&&n,r={};t=R.exec(e);){var o=t[1],i=t[3]||t[4];r[o]=(a?P(i):i)||""}return r},x=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function P(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}var M=/<a\b([^>]*data-draft-node="block"[^>]*)>(.*?)<\/a>/g,L=function(e){return e?e.replace(M,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=I(t,{decodeValue:!0}),r=a.target,o=void 0===r?"_blank":r,i=a.href,s=void 0===i?"":i,c=a["data-image"],l=a["data-image-width"],u=a["data-image-height"],d=a["data-entity-type"],m=a["data-entity-data"],h=n.replace(/<[^>]*>/g,"");return h=P(h),Object(A.renderToStaticMarkup)(p.a.createElement(T.a,{text:h,url:s,target:o,image:c,imageWidth:l,imageHeight:u,entityType:d,entityData:x(m)}))}):e},D=/<p><br><\/p>/g,q=function(e){return e?e.replace(D,'<p class="ztext-empty-paragraph"><br /></p>'):e},_=n(2050),z=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,B=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,a=[];return n=n.replace(z,function(e,n){var r=I(n,{decodeValue:!0}),o=r["data-text"],i=void 0===o?"":o,s=r["data-url"],c=void 0===s?"":s,l=r["data-numero"],u="ref_".concat(t,"_").concat(l),d=a.filter(function(e){return e.refKey===u}),m="".concat(u,"_").concat(d.length);a.push({refKey:u,text:i,url:c,numero:l});var h=[i,c].filter(Boolean).join(" ");return Object(A.renderToStaticMarkup)(p.a.createElement("sup",{"data-text":i,"data-url":c,"data-numero":l,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":h,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},p.a.createElement("a",{id:m,href:"#".concat(u),"data-reference-link":!0,"aria-labelledby":u},"[",l,"]")))}),a.length?n=n.concat(Object(A.renderToStaticMarkup)(p.a.createElement(_.a,{referenceList:a}))):n}(t,e)}},Q=n(15),U=(n(2036),function(e){var t=function(e){if(0!==e.intersectionRatio){var t=e.target;t.dataset.zaDetailViewId=t.cardShowViewId,Q.default.trackCardShow(t,{},{link:{url:t.href}}),n.unobserve(t),t.dataset.zaDetailViewId=t.clickViewId}},n=new IntersectionObserver(function(e){e.forEach(t)},{threshold:[.1]});return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'}].forEach(function(t){var a=t.selector,r=t.cardShowViewId,o=t.clickViewId;Array.from(e.querySelectorAll(a)).forEach(function(e){e.cardShowViewId=r,e.clickViewId=o,n.observe(e)})}),function(){n.disconnect()}});n(2052),n(874),n(2083);function F(e){return!(!e||1===e)}function V(e,t){var n=Array.from((e||document).querySelectorAll("img.lazy")).filter(function(e){return!e.dataset.thumbnail}),a=O()(navigator.userAgent).Mobile,r=a?320:600,o=t.props,i=o.onLoadImageFail,s=o.onLoadImageSuccess,c=o.onLoadImageTimeout;return[].map.call(n,function(e){var n=e.dataset,o=n.actualsrc,l=n.rawwidth,u=n.rawheight,d=function(e,t){var n=Number(window.getComputedStyle(e).width.replace("px","")),a=e.dataset.rawwidth,r=void 0===a?0:a;if(F(n))return n;var o=Number(r);return F(o)?o:t}(e,r),m=l/u,h=document.createElement("span");e.parentNode.replaceChild(h,e);var f=Object(j.imgUrl)(o,{quality:a?50:80,size:"hd"});return Object(v.unstable_renderSubtreeIntoContainer)(t,p.a.createElement(S.a,{className:[].filter.call(e.classList,function(e){return"lazy"!==e}).join(" "),width:d,height:d/m,url:f,thumbnail:Object(j.imgUrl)(f,"60w"),onLoadImageSuccess:s,onLoadImageFail:i,onLoadImageTimeout:c,onLoad:function(){Object(v.unmountComponentAtNode)(h),e.src=f,h.parentNode.replaceChild(e,h)}}),h),h})}var H=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={referenceListId:f()()},n.handleRef=function(e){var t=n.props.onRef;n.root=e,t&&t(e)},n.handleClick=function(e){var t=n.props.onClick;if(t&&t(e),!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){e.preventDefault();var a=e.target.getAttribute("href"),r=document.querySelector(a);Object(N.b)(r),document.documentElement.setAttribute("data-focus-visible","")}},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.mount()}},{key:"componentDidUpdate",value:function(e){this.props.html!==e.html&&(this.unmount(),this.mount())}},{key:"componentWillUnmount",value:function(){this.isUmounting=!0,this.unmount()}},{key:"mount",value:function(){var e=this;this.vagueImageNodes=V(this.root,this),Array.from(this.root.querySelectorAll("img[eeimg]")).forEach(function(e){e.setAttribute("data-formula",e.alt),e.alt="[公式]"}),setTimeout(function(){e.isUmounting||(e.disposeTrackZA&&e.disposeTrackZA(),e.disposeTrackZA=U(e.root))})}},{key:"unmount",value:function(){this.vagueImageNodes&&this.vagueImageNodes.forEach(function(e){return Object(v.unmountComponentAtNode)(e)}),this.disposeTrackZA&&(this.disposeTrackZA(),this.disposeTrackZA=null)}},{key:"render",value:function(){var e=this.props,t=e.tag,n=e.className,a=e.html,r=e.clearBoth,o=l()(e,["tag","className","html","clearBoth"]),i=this.state.referenceListId;return p.a.createElement(t,Object.assign({ref:this.handleRef,className:g()("RichText","ztext",n,{"RichText--clearBoth":r}),dangerouslySetInnerHTML:{__html:C()([q,B(i),L])(a)},onClick:this.handleClick},w()(o,["onClick","onRef","onLoadImageFail","onLoadImageSuccess","onLoadImageTimeout"])))}}]),t}(m.Component);H.propTypes={tag:d.a.string,html:d.a.string.isRequired,clearBoth:d.a.bool,onRef:d.a.func},H.defaultProps={tag:"div",clearBoth:!1};t.a=H},2044:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(2023),p=(n(2058),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"renderThumbnail",value:function(){var e=this.props.error;return d.a.createElement("div",{className:"VideoErrorCard-thumbnail"},d.a.createElement("div",{className:"VideoErrorCard-error"},e.message||"错误"))}},{key:"render",value:function(){var e=this.props,t=e.isLens,n=e.id;return d.a.createElement("div",{className:"VideoErrorCard"},d.a.createElement(m.b,Object.assign({},this.props,t&&{playerUrl:"https://www.zhihu.com/video/".concat(n)},{thumbnail:this.renderThumbnail(),showPlayButton:!1,onBeforePlay:function(){return!1}})))}}]),t}(u.Component));p.propTypes={error:l.a.object.isRequired},t.a=p},2045:function(e,t,n){"use strict";var a=n(2091),r=n(3),o=n(4),i=n(7),s=n(5),c=n(6),l=n(0),u=n.n(l),d=n(1),m=n.n(d),p=n(17),h=n(8),f=n.n(h),v=(n(2191),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.commercial,a=e.positive,r=e.annotation,o=e.disclaimer,i=e.circle,s=e.paidContent;if(!(n||a||r||o||i||s))return null;var c=[s,n,a,r,!r&&o,i].filter(Boolean).slice(0,2);return u.a.createElement("div",{className:f()("Labels",t)},c.map(function(e,t){return u.a.createElement("div",{className:"Labels-item",key:t},e)}))}}]),t}(u.a.Component));v.propTypes={className:m.a.string,commercial:m.a.node,positive:m.a.node,annotation:m.a.node,disclaimer:m.a.node,circle:m.a.node,paidContent:m.a.node};var b=v,g=n(2064),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[g.e[e],t].filter(Boolean).join(" · ")},w=function(e,t){switch(t){case"online_roundtable":return e.onlineRoundtable?{icon:g.b[t],title:y(t,e.onlineRoundtable.name),shortTitle:g.d[t],description:g.a[t],link:"https://www.zhihu.com/roundtable/".concat(e.onlineRoundtable.urlToken),linkDescription:g.c[t],zaName:g.g[t]}:null;case"relevant":return e.relevantInfo&&e.relevantInfo.isRelevant?{icon:g.b[t],title:y(t),shortTitle:g.d[t],description:g.a[t],zaName:g.g[t]}:null;case"professional":return e.recognitionInfo&&e.recognitionInfo.recognizedCount?{icon:g.b[t],title:y(t),shortTitle:g.d[t],description:g.a[t].replace("{}",String(e.recognitionInfo.recognizedCount)),link:"javascript:;",members:e.recognitionInfo.latestRecognizers,zaName:g.g[t]}:null;default:var n=e.includedInfos?e.includedInfos.find(function(e){return e.type===t}):null;return n?{icon:g.b[t],title:y(t,n.title),shortTitle:g.d[t],description:g.a[t],link:n.url,linkDescription:g.c[t],zaName:g.g[t]}:null}},E=n(2192),C=n.n(E),k=n(272),O=n(15),j=(n(2197),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={expanded:!1,width:null},n.bar=null,n.list=null,n.popover=null,n.trackListCardShow=C()(function(){O.default.setModule(n.list,{module:"Content",module_name:"正向列表卡片"}),O.default.trackCardShow(n.list,{id:3770})}),n.expand=function(){var e=n.props,t=e.isMobile,a=e.onExpand,r=e.data;t&&n.setState({width:n.bar.getBoundingClientRect().width}),n.setState({expanded:!0},function(){n.trackListCardShow(),a&&a(r)})},n.collapse=function(){n.setState({expanded:!1})},n.handleToggle=function(){n.state.expanded?n.collapse():n.expand()},n.handleDismiss=function(e){n.state.expanded&&(n.bar.contains(e.target)||n.popover.contains(e.target)||n.collapse())},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDismiss),document.addEventListener("touchstart",this.handleDismiss)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleDismiss),document.removeEventListener("touchstart",this.handleDismiss)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.isExpandable,r=t.renderBar,o=t.renderItems,i=t.placement,s=t.borderStyle,c=t.arrowed,l=a(n);return u.a.createElement("div",{className:"PositiveLabelLayout"},u.a.createElement("div",{ref:function(t){return e.bar=t},className:"PositiveLabelLayout-bar"},r(n,{expandable:l,onExpand:this.handleToggle})),l&&u.a.createElement(k.a,{onRef:function(t){return e.popover=t},className:f()("PositiveLabelLayout-popover","PositiveLabelLayout-popover--".concat(i),"PositiveLabelLayout-popover--".concat(s)),isOpen:this.state.expanded,target:this.bar,placement:i,arrowed:c,listenResize:!0},u.a.createElement("div",{ref:function(t){return e.list=t},className:"PositiveLabelLayout-list",style:{width:this.state.width}},o(n))))}}]),t}(u.a.Component));j.propTypes={data:m.a.object.isRequired,isExpandable:m.a.func.isRequired,renderBar:m.a.func.isRequired,renderItems:m.a.func.isRequired,placement:m.a.string,isMobile:m.a.bool.isRequired,borderStyle:m.a.oneOf(["none","common"]),arrowed:m.a.bool.isRequired,onExpand:m.a.func},j.defaultProps={borderStyle:"common"};var N=j,S=n(263),A=n(2010),T=n(85),R=(n(2198),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.members;return u.a.createElement("div",{className:"PositiveLabelMembers"},e.slice(0,3).reverse().map(function(e){return u.a.createElement(T.a,{key:e.id,className:"PositiveLabelMembers-avatar",url:e.avatarUrl,size:20})}))}}]),t}(u.a.Component));R.propTypes={members:m.a.array};var I=R,x=(n(2199),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).root=null,n.handleLinkClick=function(e){var t=n.props,a=t.type,r=t.link,o=t.onLinkClick,i=t.zaName;O.default.trackEvent(n.root,{id:3771,name:"一个"},{button:{text:i}}),o&&o(e,r,a)},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expandable,a=t.zaName;O.default.setModule(this.root,{module:"Content",module_name:a}),Object(S.onViewedOnce)(this.root,function(){O.default.trackCardShow(e.root,{id:3769,name:n?"多个":"一个"})})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.description,r=e.meta,o=e.link,i=e.linkDescription,s=e.members;return u.a.createElement("div",{className:"PositiveLabelBar-content"},u.a.createElement(t,{className:"PositiveLabelBar-icon"}),u.a.createElement("div",{className:"PositiveLabelBar-main"},u.a.createElement("span",{className:"PositiveLabelBar-title"},n),a&&u.a.createElement("span",{className:"PositiveLabelBar-description"}," "+a)),(o||r||s&&Boolean(s.length))&&u.a.createElement("div",{className:"PositiveLabelBar-side"},s&&Boolean(s.length)&&u.a.createElement("div",{className:"PositiveLabelBar-members"},u.a.createElement(I,{members:s})),o&&!r&&u.a.createElement("span",{className:"PositiveLabelBar-link"},i&&u.a.createElement("span",{className:"PositiveLabelBar-linkDescription"},i),u.a.createElement(A.a,{className:"PositiveLabelBar-linkIcon"})),r&&u.a.createElement("span",{className:"PositiveLabelBar-meta"},r)))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.shortTitle,r=e.description,o=e.meta,i=e.link,s=e.expandable,c=e.members;return u.a.createElement("div",{className:"PositiveLabelBar-content"},u.a.createElement(t,{className:"PositiveLabelBar-icon"}),u.a.createElement("div",{className:"PositiveLabelBar-main"},u.a.createElement("span",{className:"PositiveLabelBar-title"},o&&a||n),r&&!o&&u.a.createElement("span",{className:"PositiveLabelBar-description"}," "+r),o&&u.a.createElement("span",{className:"PositiveLabelBar-meta"}," "+o)),(i||s||c&&Boolean(c.length))&&u.a.createElement("div",{className:"PositiveLabelBar-side"},c&&Boolean(c.length)&&u.a.createElement("div",{className:"PositiveLabelBar-members"},u.a.createElement(I,{members:c})),i&&!s&&u.a.createElement("span",{className:"PositiveLabelBar-link"},u.a.createElement(A.a,{className:"PositiveLabelBar-linkIcon"})),s&&u.a.createElement("span",{className:"PositiveLabelBar-expand"},"点击查看")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,a=t.link,r=t.expandable,o=t.onExpand,i=n?this.renderMobileContent():this.renderDesktopContent();return a&&!r?u.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelBar PositiveLabelBar--link",href:a,onClick:this.handleLinkClick},i):r?u.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelBar PositiveLabelBar--expandable",onClick:o},i):u.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelBar"},i)}}]),t}(u.a.Component));x.propTypes={isMobile:m.a.bool.isRequired,icon:m.a.func.isRequired,title:m.a.string.isRequired,shortTitle:m.a.string,description:m.a.string,meta:m.a.string,link:m.a.string,linkDescription:m.a.string,onLinkClick:m.a.func,expandable:m.a.bool.isRequired,onExpand:m.a.func,members:m.a.array,zaName:m.a.string},x.defaultProps={isMobile:!1,expandable:!1};var P=x,M=(n(2200),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).root=null,n.handleLinkClick=function(e){var t=n.props,a=t.type,r=t.link,o=t.onLinkClick,i=t.zaName;O.default.trackEvent(n.root,{id:3771,name:"一个"},{button:{text:i}}),o&&o(e,r,a)},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expandable,a=t.zaName;O.default.setModule(this.root,{module:"Content",module_name:a}),Object(S.onViewedOnce)(this.root,function(){O.default.trackCardShow(e.root,{id:3769,name:n?"多个":"一个"})})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.description,r=e.linkDescription;return u.a.createElement("div",{className:"PositiveLabelRoundtableBar-content"},u.a.createElement(t,{className:"PositiveLabelRoundtableBar-icon"}),u.a.createElement("div",{className:"PositiveLabelRoundtableBar-main"},u.a.createElement("div",{className:"PositiveLabelRoundtableBar-header"},u.a.createElement("span",{className:"PositiveLabelRoundtableBar-title"},n),u.a.createElement("span",{className:"PositiveLabelRoundtableBar-badge"},"进行中")),u.a.createElement("div",{className:"PositiveLabelRoundtableBar-description"},a)),u.a.createElement("div",{className:"PositiveLabelRoundtableBar-side"},u.a.createElement("span",{className:"PositiveLabelRoundtableBar-link"},u.a.createElement("span",{className:"PositiveLabelRoundtableBar-linkDescriptio"},r),u.a.createElement(A.a,{className:"PositiveLabelRoundtableBar-linkIcon"}))))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.description;return u.a.createElement("div",{className:"PositiveLabelRoundtableBar-content"},u.a.createElement(t,{className:"PositiveLabelRoundtableBar-icon"}),u.a.createElement("div",{className:"PositiveLabelRoundtableBar-main"},u.a.createElement("div",{className:"PositiveLabelRoundtableBar-header"},u.a.createElement("span",{className:"PositiveLabelRoundtableBar-title"},n),u.a.createElement("span",{className:"PositiveLabelRoundtableBar-badge"},"进行中")),u.a.createElement("div",{className:"PositiveLabelRoundtableBar-description"},a)),u.a.createElement("div",{className:"PositiveLabelRoundtableBar-side"},u.a.createElement("span",{className:"PositiveLabelRoundtableBar-link"},u.a.createElement(A.a,{className:"PositiveLabelRoundtableBar-linkIcon"}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,a=t.link,r=n?this.renderMobileContent():this.renderDesktopContent();return u.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelRoundtableBar PositiveLabelRoundtableBar--link",href:a,onClick:this.handleLinkClick},r)}}]),t}(u.a.Component));M.propTypes={isMobile:m.a.bool.isRequired,icon:m.a.func.isRequired,title:m.a.string.isRequired,description:m.a.string,meta:m.a.string,link:m.a.string,linkDescription:m.a.string,onLinkClick:m.a.func,expandable:m.a.bool.isRequired,onExpand:m.a.func,zaName:m.a.string},M.defaultProps={isMobile:!1,expandable:!1};var L=M,D=(n(2201),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).root=null,n.handleLinkClick=function(e){var t=n.props,a=t.type,r=t.link,o=t.onLinkClick,i=t.zaName;O.default.trackEvent(n.root,{id:3771,name:"多个"},{button:{text:i}}),o&&o(e,r,a)},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"renderContent",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.description,r=e.link,o=e.members;return u.a.createElement("div",{className:"PositiveLabelItem-content"},u.a.createElement(t,{className:"PositiveLabelItem-icon"}),u.a.createElement("div",{className:"PositiveLabelItem-main"},u.a.createElement("span",{className:"PositiveLabelItem-title"},n),a&&u.a.createElement("span",{className:"PositiveLabelItem-description"}," "+a)),(r||o&&Boolean(o.length))&&u.a.createElement("div",{className:"PositiveLabelItem-side"},o&&Boolean(o.length)&&u.a.createElement("div",{className:"PositiveLabelItem-members"},u.a.createElement(I,{members:o})),r&&u.a.createElement("span",{className:"PositiveLabelItem-link"},u.a.createElement(A.a,{className:"PositiveLabelItem-linkIcon"}))))}},{key:"render",value:function(){var e=this,t=this.props.link,n=this.renderContent();return t?u.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelItem PositiveLabelItem--link",href:t,onClick:this.handleLinkClick},n):u.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelItem"},n)}}]),t}(u.a.Component));D.propTypes={isMobile:m.a.bool.isRequired,icon:m.a.func.isRequired,title:m.a.string.isRequired,description:m.a.string,link:m.a.string,onLinkClick:m.a.func,members:m.a.array,zaName:m.a.string},D.defaultProps={isMobile:!1};var q=D,_=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).isExpandable=function(e){return e.items.length>1&&"online_roundtable"!==e.items[0].type},n.renderBar=function(e,t){var a=t.expandable,r=t.onExpand,o=n.props,i=o.isMobile,s=o.onLinkClick,c=e.items[0],l=c.type,d=c.props,m=Object.assign({isMobile:i,type:l},d,{meta:a?"relevant"===l?"及 ".concat(e.items.length-1," 项收录"):i?"等 ".concat(e.items.length," 项收录"):"共 ".concat(e.items.length," 项收录"):null,onLinkClick:s,expandable:a,onExpand:r});return"online_roundtable"===l?u.a.createElement(L,m):u.a.createElement(P,m)},n.renderItems=function(e){var t=n.props,a=t.isMobile,r=t.onLinkClick;return e.items.map(function(e){var t=e.type,n=e.props;return u.a.createElement(q,Object.assign({key:t,isMobile:a,type:t},n,{onLinkClick:r}))})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.data,a=e.placement,r=e.borderStyle,o=e.arrowed,i=e.onExpand,s=function(e){var t=g.f.map(function(t){return{type:t,props:w(e,t)}}).filter(function(e){return e.props});return t.length?{items:t}:null}(n);return s?u.a.createElement("div",{className:"PositiveLabel"},u.a.createElement(N,{arrowed:o||t,isMobile:t,placement:a||(t?"bottom":"bottom-right"),borderStyle:r||(t?"none":"common"),data:s,isExpandable:this.isExpandable,renderBar:this.renderBar,renderItems:this.renderItems,onExpand:i})):null}}]),t}(u.a.Component);_.propTypes={isMobile:m.a.bool.isRequired,data:m.a.object.isRequired,onLinkClick:m.a.func,placement:m.a.string,borderStyle:m.a.oneOf(["none","common"]),arrowed:m.a.bool.isRequired,onExpand:m.a.func},_.defaultProps={isMobile:!1};var z=_,B=(n(2202),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.disclaimerInfo;return n?u.a.createElement("div",{className:f()("DisclaimerLabel",{"DisclaimerLabel--mobile":t})},u.a.createElement("div",{className:"DisclaimerLabel-title"},n.description),u.a.createElement("div",{className:"DisclaimerLabel-description"},n.subDescription)):null}}]),t}(u.a.Component));B.propTypes={isMobile:m.a.bool.isRequired,disclaimerInfo:m.a.object.isRequired},B.defaultProps={isMobile:!1};var Q=B,U=n(2327),F=(n(2203),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){O.default.trackCardShow(this,{id:4027})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.description;return u.a.createElement("div",{className:"CircleLabelBar"},u.a.createElement("div",{className:"CircleLabelBar-content"},u.a.createElement(t,{className:"CircleLabelBar-icon"}),u.a.createElement("div",{className:"CircleLabelBar-main"},u.a.createElement("span",{className:"CircleLabelBar-title"},n),a&&u.a.createElement("span",{className:"CircleLabelBar-description"}," "+a))))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.linkDescription,r=e.onLinkClick,o=Boolean(r);return u.a.createElement("div",{className:"CircleLabelBar",onClick:function(e){return o&&r(e)}},u.a.createElement("div",{className:"CircleLabelBar-content"},u.a.createElement(t,{className:"CircleLabelBar-icon"}),u.a.createElement("div",{className:"CircleLabelBar-main"},u.a.createElement("span",{className:"CircleLabelBar-title"},n)),o&&u.a.createElement("div",{className:"CircleLabelBar-side"},u.a.createElement("span",{className:"CircleLabelBar-link"},a&&u.a.createElement("span",{className:"CircleLabelBar-linkDescription"},a),u.a.createElement(A.a,{className:"CircleLabelBar-linkIcon"})))))}},{key:"render",value:function(){var e=this.props.isMobile;return u.a.createElement("div",null,e?this.renderMobileContent():this.renderDesktopContent())}}]),t}(u.a.Component));F.propTypes={isMobile:m.a.bool.isRequired,icon:m.a.func.isRequired,title:m.a.string.isRequired,link:m.a.string,linkDescription:m.a.string,onLinkClick:m.a.func},F.defaultProps={isMobile:!1};var V=F,H=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.circleInfo,a=e.onLinkClick,r=function(e){return e?{icon:U.a,title:"圈内说 · 相关专业用户撰写",hasDesktopLink:!1,hasMobileLink:!0,linkDescription:"查看 ".concat(e.realmMemberCount," 个回答"),id:e.id}:null}(n);return r?u.a.createElement("div",{className:"CircleLabel"},u.a.createElement(V,Object.assign({isMobile:t},r,{onLinkClick:a}))):null}}]),t}(u.a.Component);H.propTypes={isMobile:m.a.bool.isRequired,circleInfo:m.a.object.isRequired,onLinkClick:m.a.func},H.defaultProps={isMobile:!1};var W=H,G=n(10),K=function(e){return u.a.createElement(G.a,e,u.a.createElement("path",{d:"M8.306 23h-.092C3.678 23 0 19.379 0 14.912c0-3.681 2.497-6.788 5.914-7.767V3.5c0-.87.09-1.185.26-1.502.17-.318.42-.568.738-.738.318-.17.633-.26 1.502-.26H20.5c.87 0 1.185.09 1.502.26.318.17.568.42.738.738S23 2.63 23 3.5v13.676h-4.248c-.58 0-.79.06-1.001.174-.212.113-.378.28-.492.492-.113.211-.173.422-.173 1.001V23H8.306zm-.092-1.941c3.448 0 6.243-2.752 6.243-6.147 0-3.395-2.795-6.147-6.243-6.147s-6.243 2.752-6.243 6.147c0 3.395 2.795 6.147 6.243 6.147zm7.547-12.294a.647.647 0 0 0 0 1.294h3.963a.647.647 0 1 0 0-1.294zm-3.285-3.236a.647.647 0 1 0 0 1.295h7.248a.647.647 0 1 0 0-1.295zM18.4 23v-3.88a.65.65 0 0 1 .65-.65H23zm-9.2-6.47h1.982a.647.647 0 0 1 0 1.294H9.2v1.121c0 .273-.03.381-.087.487a.59.59 0 0 1-.246.246c-.105.057-.213.087-.487.087h-.332c-.273 0-.381-.03-.487-.087a.59.59 0 0 1-.246-.246c-.056-.106-.086-.214-.086-.487v-1.121H5.247a.647.647 0 1 1 0-1.295H7.23v-1.294H5.247a.647.647 0 1 1 0-1.294H6.61l-1.774-1.905c-.159-.17-.201-.255-.224-.352s-.013-.193.028-.285c.04-.092.1-.17.288-.312l.224-.169c.188-.142.282-.18.39-.201.108-.02.215-.012.317.025s.188.09.346.26l2.01 2.156 2.009-2.157c.158-.17.243-.222.345-.26s.21-.045.318-.024c.107.02.201.059.39.201l.224.17c.188.142.247.219.288.31.04.093.05.19.028.286-.023.097-.066.182-.224.352L9.818 13.94h1.364a.647.647 0 0 1 0 1.294H9.2z",fillRule:"evenodd"}))};K.defaultProps={name:"PaidContent"};var Y=K,$=function(e){return u.a.createElement(G.a,e,u.a.createElement("defs",null,u.a.createElement("linearGradient",{id:"id-609579976-a",x1:"29.377%",x2:"72.366%",y1:"10.503%",y2:"87.913%"},u.a.createElement("stop",{offset:"0%",stopColor:"#B39874"}),u.a.createElement("stop",{offset:"100%",stopColor:"#805820"}))),u.a.createElement("path",{fill:"url(#id-609579976-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};$.defaultProps={name:"VIPNight"};var J=$,Z=function(e){return u.a.createElement(G.a,e,u.a.createElement("defs",null,u.a.createElement("linearGradient",{id:"id-763684632-a",x1:"29.377%",x2:"72.366%",y1:"10.503%",y2:"87.913%"},u.a.createElement("stop",{offset:"0%",stopColor:"#F2D9B6"}),u.a.createElement("stop",{offset:"100%",stopColor:"#BF8B43"}))),u.a.createElement("path",{fill:"url(#id-763684632-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};Z.defaultProps={name:"VIP"};var X=Z,ee=n(2016),te=n(1985),ne=function(e){return u.a.createElement(G.a,e,u.a.createElement("path",{d:"M4 2h12a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm3 7.278v5.444a.792.792 0 0 0 1.209.674l4.48-2.774a.792.792 0 0 0-.012-1.354l-4.48-2.67A.792.792 0 0 0 7 9.278zM19.538 18.5c-.038 0-.038-13-.038-13 2.656 1.131 4.5 3.62 4.5 6.508 0 2.875-1.827 5.354-4.462 6.492z",fillRule:"evenodd"}))};ne.defaultProps={name:"RemixAlbum"};var ae=ne,re=function(e){return u.a.createElement(G.a,e,u.a.createElement("path",{d:"M5 2h14c1.105 0 2 .814 2 1.818v16.364C21 21.186 20.105 22 19 22H5c-1.105 0-2-.814-2-1.818V3.818C3 2.814 3.895 2 5 2zm6.5 16v-1.525A5 5 0 0 1 7 11.5a.5.5 0 1 1 1 0 4 4 0 1 0 8 0 .5.5 0 1 1 1 0 5 5 0 0 1-4.5 4.975V18h2a.5.5 0 1 1 0 1h-5a.5.5 0 1 1 0-1h2zm-2-10.336v3.672C9.5 12.805 10.62 14 12 14c1.378 0 2.5-1.193 2.5-2.664V7.664C14.5 6.195 13.38 5 12 5c-1.378 0-2.5 1.193-2.5 2.664z",fillRule:"evenodd"}))};re.defaultProps={name:"RemixInstabook"};var oe=re,ie=n(2300),se=n(94),ce=(n(2204),"purchase_required"),le="vip_free",ue="purchased",de="ebook",me="live",pe="remix_album",he="remix_instabook",fe="PaidContentLabel-icon",ve=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).handleClick=function(){var e=n.props.link;se.default.dispatch("base/openURL",{url:e})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"renderMainContent",value:function(){var e=this.props,t=e.theme,n=e.paidInfo.type,a=e.showVipFreeDesc,r="dark"===t;switch(n){case ce:return u.a.createElement(u.a.Fragment,null,u.a.createElement(Y,{className:"".concat(fe)}),"包含付费内容");case ue:return u.a.createElement(u.a.Fragment,null,u.a.createElement(Y,{className:"".concat(fe)}),"已购付费内容");case le:return u.a.createElement(u.a.Fragment,null,r?u.a.createElement(J,{className:"".concat(fe)}):u.a.createElement(X,{className:"".concat(fe)}),u.a.createElement("div",{className:"PaidContentLabel-vipLabel"},u.a.createElement("div",{className:"PaidContentLabel-vipLabel-left"},"会员专享"),a&&u.a.createElement("div",{className:"PaidContentLabel-vipLabel-right"},"你可以完整查看该付费内容")));case de:return u.a.createElement(u.a.Fragment,null,u.a.createElement(ee.a,{className:"".concat(fe)}),"选自电子书");case me:return u.a.createElement(u.a.Fragment,null,u.a.createElement(te.a,{className:"".concat(fe)}),"选自 Live");case pe:return u.a.createElement(u.a.Fragment,null,u.a.createElement(ae,{className:"".concat(fe)}),"选自私家课");case he:return u.a.createElement(u.a.Fragment,null,u.a.createElement(oe,{className:"".concat(fe)}),"选自讲书");default:return null}}},{key:"render",value:function(){var e=this.props.paidInfo.type===le;return u.a.createElement("div",{className:f()("PaidContentLabel",{"PaidContentLabel-vipFree":e})},u.a.createElement("div",{className:"PaidContentLabel-main"},this.renderMainContent()),u.a.createElement(ie.a,{onClick:this.handleClick,className:"PaidContentLabel-HelpOutline"}))}}]),t}(u.a.Component);ve.propTypes={link:m.a.string,paidInfo:m.a.object.isRequired,onPaidContentLabelClick:m.a.func,showVipFreeDesc:m.a.bool},ve.defaultPorps={showVipFreeDesc:!1};var be=ve,ge=n(501),ye=n(133),we=n(181),Ee=n(80),Ce=n(502),ke=n(86),Oe=(n(2205),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.shown,a=e.data,r=e.paging,o=(r=void 0===r?{}:r).isEnd,i=void 0!==o&&o,s=r.isLoading,c=void 0!==s&&s,l=r.totals,d=e.loadAnswerRecognizerList,m=e.answerId;return u.a.createElement(we.b,{size:"fullPage",onClose:t},n&&u.a.createElement("div",{className:"RecognizerListModal"},u.a.createElement("div",{className:"RecognizerListModal-header"},"已有 ",l||"-"," 位用户对该回答送出了专业徽章",u.a.createElement("div",{className:"RecognizerListModal-headerDescription"},"社区内有着专业创作水平的用户有着对其他创作用户送出「专业徽章」的特权，以示对其他用户创作专业内容的鼓励")),u.a.createElement(Ee.b,{isDrained:i,isLoading:c,onLoad:function(){d(m)}},a.map(function(e){return u.a.createElement(Ce.a,{className:"UserItem",key:e.id,user:e})}))))}}]),t}(u.a.Component));Oe.propTypes={onClose:m.a.func.isRequired,shown:m.a.bool.isRequired,answerId:m.a.number.isRequired};var je,Ne=Object(p.connect)(function(e,t){var n=Object(ge.a)(e,t.answerId)||{},a=n.data,r=void 0===a?[]:a,o=n.paging,i=void 0===o?{}:o;return{data:r.map(function(t){return Object(ke.c)(e,{urlToken:t})}),paging:i}},{loadAnswerRecognizerList:ge.d})(Oe),Se=n(19),Ae=(n(2206),Object(ye.a)()(je=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={recognizerListModalShown:!1},n.isFetched=!1,n.loadLabels=function(){var e=n.props,t=e.loadLabel,a=e.item;if(a){var r=a.isLabeled,o=a.id,i=a.type;r&&!n.isFetched&&(t(i,o),n.isFetched=!0)}},n.handlePositiveLabelClick=function(e,t,a){"professional"===a&&n.toggleRecognizerModal()},n.toggleRecognizerModal=function(){n.setState({recognizerListModalShown:!n.state.recognizerListModalShown})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadLabels()}},{key:"componentDidUpdate",value:function(){this.loadLabels()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.item,a=e.commercialLabels,r=e.annotationLabels,o=this.state.recognizerListModalShown,i=null,s=null,c=null,d=null,m={item:n,isMobile:!1};if(n&&n.isLabeled)if(t){i=(t.includedInfos&&Boolean(t.includedInfos.length)||t.onlineRoundtable||t.relevantInfo||t.recognitionInfo)&&u.a.createElement(z,Object.assign({},m,{data:t,onLinkClick:this.handlePositiveLabelClick})),s=t.disclaimerInfo&&u.a.createElement(Q,{disclaimerInfo:t.disclaimerInfo}),c=t.circleInfo&&u.a.createElement(W,Object.assign({},m,{circleInfo:t.circleInfo}));var p=n.paidInfo&&n.paidInfo.type===Se.D.EBOOK;d=t.paidInfo&&u.a.createElement(be,{showVipFreeDesc:p,paidInfo:t.paidInfo})}else i=u.a.createElement("div",{className:"LabelContainer-placeholder"});return u.a.createElement(l.Fragment,null,u.a.createElement(b,{className:"LabelContainer",positive:i,annotation:r,commercial:a,disclaimer:s,circle:c,paidContent:d}),u.a.createElement(Ne,{onClose:this.toggleRecognizerModal,answerId:n.id,shown:o}))}}]),t}(u.a.Component))||je);Ae.propTypes={data:m.a.object,item:m.a.object.isRequired,commercialLabels:m.a.node,annotationLabels:m.a.node};var Te=Object(p.connect)(function(e,t){var n=t.item;return{data:Object(ge.c)(e,n)}},{loadLabel:ge.e})(Ae),Re=n(2),Ie=n(22),xe=n(44),Pe=n.n(xe),Me=n(81),Le=n.n(Me),De=["answer","article","post","item"],qe=function(e){return e.itemType||De.find(function(t){return e[t]})},_e=function(e){return Le()(Object(p.connect)(function(e,t){return{useNewLabels:Object(ge.f)(e,t[qe(t)])}})(function(t){var n=t.showLabelInfo,a=void 0===n||n,r=t.showLabels,o=void 0===r||r,i=Object(Ie.a)(t,["showLabelInfo","showLabels"]),s=qe(i),c=i,l=[];return o||l.push("isLabeled"),a||(l.push("labelInfo"),l.push("hermesLabel")),s&&l.length>0&&(c=Object.assign({},c,Object(Re.a)({},s,Pe()(i[s],l)))),u.a.createElement(e,c)}),e)},ze=Object(l.createContext)({showLabelInfo:!0,showLabels:!0}),Be=ze.Provider,Qe=ze.Consumer,Ue=function(e){return function(t){var n=u.a.createElement(Qe,null,function(n){return u.a.createElement(e,Object.assign({},t,{showLabelProps:n}))});return Le()(n,e)}};n.d(t,"b",function(){return a.a}),n.d(t,"a",function(){return Te}),n.d(t,"d",function(){return _e}),n.d(t,"c",function(){return Be}),n.d(t,"e",function(){return Ue})},2046:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(0),l=n.n(c),u=n(16),d=n(1984),m=n(152),p=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,a=e.label,r=e.onRef;return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.c,{keyMap:{BOOKMARK:"s c"},handlers:{BOOKMARK:n}}),l.a.createElement(u.c,{onRef:r,className:t,preset:"plain",onClick:n,icon:d.a,label:a}))}}]),t}(l.a.Component);p.defaultProps={label:"收藏"};var h=p;n.d(t,"a",function(){return h})},2047:function(e,t,n){"use strict";var a=n(22),r=n(3),o=n(4),i=n(7),s=n(5),c=n(6),l=n(1),u=n.n(l),d=n(0),m=n.n(d),p=n(17),h=n(8),f=n.n(h),v=n(85),b=n(44),g=n.n(b),y=n(16),w=n(121),E=n(192),C=n(182),k=n(15),O=n(48),j=n(19),N=n(117);var S=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).load=function(){var e=n.props,t=e.dispatch,a=e.id;t(Object(N.r)(a))},n.track=function(){var e=n.props.topic;n.hoverCardElement&&e&&(k.default.setModule(n.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:e.id,item_num:e.questionsCount,follower_num:e.followersCount}}}),k.default.trackCardShow(n.hoverCardElement))},n.handleFollow=n.context.authRequired(function(){var e=!n.props.topic.isFollowing;k.default.trackEvent(n.hoverCardElement,{action:e?"Follow":"UnFollow",element:"Button"});var t=n.props,a=t.dispatch,r=t.id;a(Object(N.D)(r))},j.N.follow),n.handleOpen=function(){n.load(),n.track()},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,a=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,r=t.topic,o=t.id,i=t.isLoading,s=t.onRef,c=Object(a.a)(t,["toggler","topic","id","isLoading","onRef"]),l=r||{},u=l.name,d=l.introduction,p=l.questionsCount,h=l.followersCount,f=l.bestAnswersCount,v=l.avatarUrl,b=l.isFollowing,g=l.headerCard,k="//www.zhihu.com/topic/".concat(o),j=g&&g.avatarUrl||v;return m.a.createElement(E.b,Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},c,{onRef:function(t){s&&"function"==typeof s&&s(t),e.hoverCardElement=t}}),m.a.createElement(E.a,{title:m.a.createElement("a",{target:"_blank",href:k},u),avatarUrl:j}),d&&m.a.createElement("div",null,m.a.createElement(C.a,{className:"HoverCard-description",html:d})),m.a.createElement("div",null,this.isTopicReady()&&m.a.createElement(w.a,null,m.a.createElement(w.a.Item,{tag:O.a,preset:"plain",a:!0,to:"".concat(k,"/questions"),name:"问题",value:p,target:"_blank"}),m.a.createElement(w.a.Item,{tag:O.a,preset:"plain",a:!0,to:"".concat(k,"/top-answers"),name:"精华",value:f,target:"_blank"}),m.a.createElement(w.a.Item,{tag:O.a,preset:"plain",a:!0,to:"".concat(k,"/followers"),name:"关注者",target:"_blank",value:h})),m.a.createElement("div",{className:"HoverCard-buttons"},r&&m.a.createElement(y.c,{preset:"primary",color:b?"grey":"blue",onClick:this.handleFollow},b?"已关注":"关注话题"))))}}]),t}(d.Component);S.contextTypes={authRequired:u.a.func};var A,T,R,I=Object(p.connect)(function(e,t){var n=t.id,a=e.entities.topics,r=e.loading.local;return{topic:a[n],isLoading:Boolean(r["topic/".concat(n)])}})(S),x=n(55),P=Object(p.connect)(function(e){return{isMobile:Object(x.d)(e,{includeTablet:!0})}})((R=T=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,r=t.topic,o=r.name,i=r.avatarUrl,s=r.id,c=r.headerCard,l=t.avatar,u=t.avatarProps,d=t.noHoverCard,p=t.noLink,h=t.style,b=t.className,y=t.children,w=Object(a.a)(t,["isMobile","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children"]),E=void 0===d?n:d,C=c&&c.avatarUrl||i;e=l?m.a.createElement(v.a,Object.assign({className:"TopicLink-avatar",url:C,alt:o},u)):y||o,p||E||(e=m.a.createElement(I,{toggler:e,id:s}));var k=p?"span":"a";return m.a.createElement(k,Object.assign({style:h,className:f()("TopicLink",b),href:"//www.zhihu.com/topic/".concat(s),target:"_blank"},g()(w,["dispatch"])),e)}}]),t}(d.Component),T.propTypes={topic:u.a.object.isRequired,user:u.a.object,avatar:u.a.bool,avatarProps:u.a.object,noHoverCard:u.a.bool,noLink:u.a.bool,style:u.a.object,className:u.a.string,children:u.a.node},T.defaultProps={avatar:!1,noLink:!1},A=R))||A;t.a=P},2048:function(e,t,n){"use strict";
/** @license React v16.8.3
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=n(497),r=n(0);function o(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=0;a<t;a++)n+="&args[]="+encodeURIComponent(arguments[a+1]);!function(e,t,n,a,r,o,i,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,a,r,o,i,s],l=0;(e=Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var i="function"==typeof Symbol&&Symbol.for,s=i?Symbol.for("react.portal"):60106,c=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,d=i?Symbol.for("react.provider"):60109,m=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,v=i?Symbol.for("react.memo"):60115,b=i?Symbol.for("react.lazy"):60116;function g(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case p:return"ConcurrentMode";case c:return"Fragment";case s:return"Portal";case u:return"Profiler";case l:return"StrictMode";case f:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case m:return"Context.Consumer";case d:return"Context.Provider";case h:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case v:return g(e.type);case b:if(e=1===e._status?e._result:null)return g(e)}return null}var y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;y.hasOwnProperty("ReactCurrentDispatcher")||(y.ReactCurrentDispatcher={current:null});var w={};function E(e,t){for(var n=0|e._threadCount;n<=t;n++)e[n]=e._currentValue2,e._threadCount=n+1}for(var C=new Uint16Array(16),k=0;15>k;k++)C[k]=k+1;C[15]=0;var O=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j=Object.prototype.hasOwnProperty,N={},S={};function A(e){return!!j.call(S,e)||!j.call(N,e)&&(O.test(e)?S[e]=!0:(N[e]=!0,!1))}function T(e,t,n,a){if(null==t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function R(e,t,n,a,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new R(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];I[t]=new R(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new R(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new R(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new R(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new R(e,3,!0,e,null)}),["capture","download"].forEach(function(e){I[e]=new R(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){I[e]=new R(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){I[e]=new R(e,5,!1,e.toLowerCase(),null)});var x=/[\-:]([a-z])/g;function P(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,P);I[t]=new R(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,P);I[t]=new R(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,P);I[t]=new R(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new R(e,1,!1,e.toLowerCase(),null)});var M=/["'&<>]/;function L(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=M.exec(e);if(t){var n,a="",r=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}r!==n&&(a+=e.substring(r,n)),r=n+1,a+=t}e=r!==n?a+e.substring(r,n):a}return e}var D=null,q=null,_=null,z=!1,B=!1,Q=null,U=0;function F(){return null===D&&o("307"),D}function V(){return 0<U&&o("312"),{memoizedState:null,queue:null,next:null}}function H(){return null===_?null===q?(z=!1,q=_=V()):(z=!0,_=q):null===_.next?(z=!1,_=_.next=V()):(z=!0,_=_.next),_}function W(e,t,n,a){for(;B;)B=!1,U+=1,_=null,n=e(t,a);return q=D=null,U=0,_=Q=null,n}function G(e,t){return"function"==typeof t?t(e):t}function K(e,t,n){if(D=F(),_=H(),z){var a=_.queue;if(t=a.dispatch,null!==Q&&void 0!==(n=Q.get(a))){Q.delete(a),a=_.memoizedState;do{a=e(a,n.action),n=n.next}while(null!==n);return _.memoizedState=a,[a,t]}return[_.memoizedState,t]}return e=e===G?"function"==typeof t?t():t:void 0!==n?n(t):t,_.memoizedState=e,e=(e=_.queue={last:null,dispatch:null}).dispatch=function(e,t,n){if(25>U||o("301"),e===D)if(B=!0,e={action:n,next:null},null===Q&&(Q=new Map),void 0===(n=Q.get(t)))Q.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}.bind(null,D,e),[_.memoizedState,e]}function Y(){}var $=0,J={readContext:function(e){var t=$;return E(e,t),e[t]},useContext:function(e){F();var t=$;return E(e,t),e[t]},useMemo:function(e,t){if(D=F(),t=void 0===t?null:t,null!==(_=H())){var n=_.memoizedState;if(null!==n&&null!==t){e:{var a=n[1];if(null===a)a=!1;else{for(var r=0;r<a.length&&r<t.length;r++){var o=t[r],i=a[r];if((o!==i||0===o&&1/o!=1/i)&&(o==o||i==i)){a=!1;break e}}a=!0}}if(a)return n[0]}}return e=e(),_.memoizedState=[e,t],e},useReducer:K,useRef:function(e){D=F();var t=(_=H()).memoizedState;return null===t?(e={current:e},_.memoizedState=e):t},useState:function(e){return K(G,e)},useLayoutEffect:function(){},useCallback:function(e){return e},useImperativeHandle:Y,useEffect:Y,useDebugValue:Y},Z={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function X(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ee={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},te=a({menuitem:!0},ee),ne={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ae=["Webkit","ms","Moz","O"];Object.keys(ne).forEach(function(e){ae.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ne[t]=ne[e]})});var re=/([A-Z])/g,oe=/^ms-/,ie=r.Children.toArray,se=y.ReactCurrentDispatcher,ce={listing:!0,pre:!0,textarea:!0},le=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ue={},de={};var me=Object.prototype.hasOwnProperty,pe={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function he(e,t){void 0===e&&o("152",g(t)||"Component")}function fe(e,t,n){function i(r,i){var s=function(e,t,n){var a=e.contextType;if("object"==typeof a&&null!==a)return E(a,n),a[n];if(e=e.contextTypes){for(var r in n={},e)n[r]=t[r];t=n}else t=w;return t}(i,t,n),c=[],l=!1,u={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===c)return null},enqueueReplaceState:function(e,t){l=!0,c=[t]},enqueueSetState:function(e,t){if(null===c)return null;c.push(t)}},d=void 0;if(i.prototype&&i.prototype.isReactComponent){if(d=new i(r.props,s,u),"function"==typeof i.getDerivedStateFromProps){var m=i.getDerivedStateFromProps.call(null,r.props,d.state);null!=m&&(d.state=a({},d.state,m))}}else if(D={},d=i(r.props,s,u),null==(d=W(i,r.props,d,s))||null==d.render)return void he(e=d,i);if(d.props=r.props,d.context=s,d.updater=u,void 0===(u=d.state)&&(d.state=u=null),"function"==typeof d.UNSAFE_componentWillMount||"function"==typeof d.componentWillMount)if("function"==typeof d.componentWillMount&&"function"!=typeof i.getDerivedStateFromProps&&d.componentWillMount(),"function"==typeof d.UNSAFE_componentWillMount&&"function"!=typeof i.getDerivedStateFromProps&&d.UNSAFE_componentWillMount(),c.length){u=c;var p=l;if(c=null,l=!1,p&&1===u.length)d.state=u[0];else{m=p?u[0]:d.state;var h=!0;for(p=p?1:0;p<u.length;p++){var f=u[p];null!=(f="function"==typeof f?f.call(d,m,r.props,s):f)&&(h?(h=!1,m=a({},m,f)):a(m,f))}d.state=m}}else c=null;if(he(e=d.render(),i),r=void 0,"function"==typeof d.getChildContext&&"object"==typeof(s=i.childContextTypes))for(var v in r=d.getChildContext())v in s||o("108",g(i)||"Unknown",v);r&&(t=a({},t,r))}for(;r.isValidElement(e);){var s=e,c=s.type;if("function"!=typeof c)break;i(s,c)}return{child:e,context:t}}var ve=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");r.isValidElement(t)?t.type!==c?t=[t]:(t=t.props.children,t=r.isValidElement(t)?[t]:ie(t)):t=ie(t),t={type:null,domNamespace:Z.html,children:t,childIndex:0,context:w,footer:""};var a=C[0];if(0===a){var i=C,s=2*(a=i.length);65536>=s||o("304");var l=new Uint16Array(s);for(l.set(i),(C=l)[0]=a+1,i=a;i<s-1;i++)C[i]=i+1;C[s-1]=0}else C[0]=C[a];this.threadID=a,this.stack=[t],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=n,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}return e.prototype.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;C[e]=C[0],C[0]=e}},e.prototype.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,a=this.threadID;E(n,a);var r=n[a];this.contextStack[t]=n,this.contextValueStack[t]=r,n[a]=e.props.value},e.prototype.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=n},e.prototype.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},e.prototype.read=function(e){if(this.exhausted)return null;var t=$;$=this.threadID;var n=se.current;se.current=J;try{for(var a=[""],r=!1;a[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var i=this.threadID;C[i]=C[0],C[0]=i;break}var s=this.stack[this.stack.length-1];if(r||s.childIndex>=s.children.length){var c=s.footer;if(""!==c&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===s.type)this.currentSelectValue=null;else if(null!=s.type&&null!=s.type.type&&s.type.type.$$typeof===d)this.popProvider(s.type);else if(s.type===f){this.suspenseDepth--;var l=a.pop();if(r){r=!1;var u=s.fallbackFrame;u||o("303"),this.stack.push(u);continue}a[this.suspenseDepth]+=l}a[this.suspenseDepth]+=c}else{var m=s.children[s.childIndex++],p="";try{p+=this.render(m,s.context,s.domNamespace)}catch(e){throw e}a.length<=this.suspenseDepth&&a.push(""),a[this.suspenseDepth]+=p}}return a[0]}finally{se.current=n,$=t}},e.prototype.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?L(n):this.previousWasTextNode?"\x3c!-- --\x3e"+L(n):(this.previousWasTextNode=!0,L(n));if(e=(t=fe(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!r.isValidElement(e)){if(null!=e&&null!=e.$$typeof){var i=e.$$typeof;i===s&&o("257"),o("258",i.toString())}return e=ie(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}if("string"==typeof(i=e.type))return this.renderDOM(e,t,n);switch(i){case l:case p:case u:case c:return e=ie(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case f:o("294")}if("object"==typeof i&&null!==i)switch(i.$$typeof){case h:D={};var g=i.render(e.props,e.ref);return g=W(i.render,e.props,g,e.ref),g=ie(g),this.stack.push({type:null,domNamespace:n,children:g,childIndex:0,context:t,footer:""}),"";case v:return e=[r.createElement(i.type,a({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case d:return n={type:e,domNamespace:n,children:i=ie(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case m:i=e.type,g=e.props;var y=this.threadID;return E(i,y),i=ie(g.children(i[y])),this.stack.push({type:e,domNamespace:n,children:i,childIndex:0,context:t,footer:""}),"";case b:o("295")}o("130",null==i?i:typeof i,"")},e.prototype.renderDOM=function(e,t,n){var i=e.type.toLowerCase();n===Z.html&&X(i),ue.hasOwnProperty(i)||(le.test(i)||o("65",i),ue[i]=!0);var s=e.props;if("input"===i)s=a({type:void 0},s,{defaultChecked:void 0,defaultValue:void 0,value:null!=s.value?s.value:s.defaultValue,checked:null!=s.checked?s.checked:s.defaultChecked});else if("textarea"===i){var c=s.value;if(null==c){c=s.defaultValue;var l=s.children;null!=l&&(null!=c&&o("92"),Array.isArray(l)&&(1>=l.length||o("93"),l=l[0]),c=""+l),null==c&&(c="")}s=a({},s,{value:void 0,children:""+c})}else if("select"===i)this.currentSelectValue=null!=s.value?s.value:s.defaultValue,s=a({},s,{value:void 0});else if("option"===i){l=this.currentSelectValue;var u=function(e){if(null==e)return e;var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(s.children);if(null!=l){var d=null!=s.value?s.value+"":u;if(c=!1,Array.isArray(l)){for(var m=0;m<l.length;m++)if(""+l[m]===d){c=!0;break}}else c=""+l===d;s=a({selected:void 0,children:void 0},s,{selected:c,children:u})}}for(w in(c=s)&&(te[i]&&(null!=c.children||null!=c.dangerouslySetInnerHTML)&&o("137",i,""),null!=c.dangerouslySetInnerHTML&&(null!=c.children&&o("60"),"object"==typeof c.dangerouslySetInnerHTML&&"__html"in c.dangerouslySetInnerHTML||o("61")),null!=c.style&&"object"!=typeof c.style&&o("62","")),c=s,l=this.makeStaticMarkup,u=1===this.stack.length,d="<"+e.type,c)if(me.call(c,w)){var p=c[w];if(null!=p){if("style"===w){m=void 0;var h="",f="";for(m in p)if(p.hasOwnProperty(m)){var v=0===m.indexOf("--"),b=p[m];if(null!=b){var g=m;if(de.hasOwnProperty(g))g=de[g];else{var y=g.replace(re,"-$1").toLowerCase().replace(oe,"-ms-");g=de[g]=y}h+=f+g+":",f=m,h+=v=null==b||"boolean"==typeof b||""===b?"":v||"number"!=typeof b||0===b||ne.hasOwnProperty(f)&&ne[f]?(""+b).trim():b+"px",f=";"}}p=h||null}m=null;e:if(v=i,b=c,-1===v.indexOf("-"))v="string"==typeof b.is;else switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":v=!1;break e;default:v=!0}v?pe.hasOwnProperty(w)||(m=A(m=w)&&null!=p?m+'="'+L(p)+'"':""):(v=w,m=p,p=I.hasOwnProperty(v)?I[v]:null,(b="style"!==v)&&(b=null!==p?0===p.type:2<v.length&&("o"===v[0]||"O"===v[0])&&("n"===v[1]||"N"===v[1])),b||T(v,m,p,!1)?m="":null!==p?(v=p.attributeName,m=3===(p=p.type)||4===p&&!0===m?v+'=""':v+'="'+L(m)+'"'):m=A(v)?v+'="'+L(m)+'"':""),m&&(d+=" "+m)}}l||u&&(d+=' data-reactroot=""');var w=d;c="",ee.hasOwnProperty(i)?w+="/>":(w+=">",c="</"+e.type+">");e:{if(null!=(l=s.dangerouslySetInnerHTML)){if(null!=l.__html){l=l.__html;break e}}else if("string"==typeof(l=s.children)||"number"==typeof l){l=L(l);break e}l=null}return null!=l?(s=[],ce[i]&&"\n"===l.charAt(0)&&(w+="\n"),w+=l):s=ie(s.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?X(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:i,children:s,childIndex:0,context:t,footer:c}),this.previousWasTextNode=!1,w},e}(),be={renderToString:function(e){e=new ve(e,!1);try{return e.read(1/0)}finally{e.destroy()}},renderToStaticMarkup:function(e){e=new ve(e,!0);try{return e.read(1/0)}finally{e.destroy()}},renderToNodeStream:function(){o("207")},renderToStaticNodeStream:function(){o("208")},version:"16.8.3"},ge={default:be},ye=ge&&be||ge;e.exports=ye.default||ye},2049:function(e,t,n){},2050:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(225),i=n.n(o);n(2051);t.a=function(e){var t=e.referenceList,n=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"参考"),r.a.createElement("ol",{className:"ReferenceList",onClick:n},i()(t,"refKey").map(function(e){var n=t.filter(function(t){return t.refKey===e.refKey}),a=n.length>1?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map(function(e,t){var n="".concat(e.refKey,"_").concat(t);return r.a.createElement("sup",{key:n,className:"ReferenceList-backLink"},r.a.createElement("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))})):r.a.createElement("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return r.a.createElement("li",{id:e.refKey,key:e.refKey,tabIndex:0},a,e.text&&r.a.createElement("span",null,e.text),e.text&&e.url&&" ",e.url&&r.a.createElement("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))})))}},2051:function(e,t,n){},2052:function(e,t,n){},2053:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(0),r=n.n(a),o=(n(2152),32300);function i(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,a=t.reasonDescription;return r.a.createElement("span",{className:"AnnotationTag"},n===o?"该内容已被标记":a)}},2054:function(e,t,n){},2055:function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return c(e);if("number"==typeof e)return s(e,t);return null},e.exports.format=s,e.exports.parse=c;var a=/\B(?=(\d{3})+(?!\d))/g,r=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),i=t&&t.thousandsSeparator||"",s=t&&t.unitSeparator||"",c=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,l=Boolean(t&&t.fixedDecimals),u=t&&t.unit||"";u&&o[u.toLowerCase()]||(u=n>=o.pb?"PB":n>=o.tb?"TB":n>=o.gb?"GB":n>=o.mb?"MB":n>=o.kb?"KB":"B");var d=(e/o[u.toLowerCase()]).toFixed(c);return l||(d=d.replace(r,"$1")),i&&(d=d.replace(a,i)),d+s+u}function c(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=i.exec(e),a="b";return n?(t=parseFloat(n[1]),a=n[4].toLowerCase()):(t=parseInt(e,10),a="b"),Math.floor(o[a]*t)}},2056:function(e,t,n){},2057:function(e,t,n){},2058:function(e,t,n){},2059:function(e,t,n){"use strict";e.exports=n(2060)},2060:function(e,t,n){"use strict";
/** @license React v16.4.1
 * create-subscription.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var a=n(376),r=n(0);function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.createSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe;return function(e){function r(){var n,a;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return n=a=o(this,e.call.apply(e,[this].concat(s))),a.state={source:a.props.source,value:null!=a.props.source?t(a.props.source):void 0},a._hasUnmounted=!1,a._unsubscribe=null,o(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),r.getDerivedStateFromProps=function(e,n){return e.source!==n.source?{source:e.source,value:null!=e.source?t(e.source):void 0}:null},r.prototype.componentDidMount=function(){this.subscribe()},r.prototype.componentDidUpdate=function(e,t){this.state.source!==t.source&&(this.unsubscribe(t),this.subscribe())},r.prototype.componentWillUnmount=function(){this.unsubscribe(this.state),this._hasUnmounted=!0},r.prototype.render=function(){return this.props.children(this.state.value)},r.prototype.subscribe=function(){var e=this,r=this.state.source;if(null!=r){var o=n(r,function(t){e._hasUnmounted||e.setState(function(e){return t===e.value||r!==e.source?null:{value:t}})});"function"!=typeof o&&function(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);a(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}("266"),this._unsubscribe=o,(o=t(this.props.source))!==this.state.value&&this.setState({value:o})}},r.prototype.unsubscribe=function(){"function"==typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null},r}(r.Component)}},2061:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(516);function r(e){var t=e.badge;if(!e.isOrg)return!1;var n=Object(a.a)(t)||{};return Boolean(n.identityInfo)}},2062:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},2063:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(0),l=n.n(c),u=n(8),d=n.n(u),m=n(16),p=n(181),h=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handleSubmit=function(){var e=n.props,t=e.onSubmit,a=e.onCancel,r=e.needCancel;(void 0===r||r)&&a(),t()},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,a=e.shown,r=e.onCancel,o=e.className,i=e.isMobile,s=l.a.createElement(m.c,{key:"confirm",preset:"primary",color:"blue",onClick:this.handleSubmit},"确认"),c=l.a.createElement(m.c,{key:"cancel",onClick:r},"取消"),u=i?[c,s]:[s,c];return l.a.createElement(p.b,{wrapperClassName:"ConfirmModal-wrapper",className:d()("ConfirmModal",o),title:t,size:i?"small":"default",subtitle:n,onClose:r,closeButton:!1,buttonGroupOnly:!0},a&&l.a.createElement(p.a,{direction:i?"horizontal":"vertical"},u))}}]),t}(c.Component);t.a=h},2064:function(e,t,n){"use strict";var a=n(1979),r=n(0),o=n.n(r),i=n(10),s=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M15.465 4.544l2.272.406c.67.12 1.193.644 1.313 1.313l.406 2.272c.042.231.132.45.266.643l1.32 1.894a1.624 1.624 0 0 1 0 1.856l-1.32 1.894a1.624 1.624 0 0 0-.266.643l-.406 2.272a1.624 1.624 0 0 1-1.313 1.313l-2.272.406c-.231.042-.45.132-.643.266l-1.894 1.32a1.624 1.624 0 0 1-1.856 0l-1.894-1.32a1.624 1.624 0 0 0-.643-.266l-2.272-.406a1.624 1.624 0 0 1-1.313-1.313l-.406-2.272a1.624 1.624 0 0 0-.266-.643l-1.32-1.894a1.624 1.624 0 0 1 0-1.856l1.32-1.894c.134-.193.224-.412.266-.643l.406-2.272c.12-.67.644-1.193 1.313-1.313l2.272-.406c.231-.042.45-.132.643-.266l1.894-1.32a1.624 1.624 0 0 1 1.856 0l1.894 1.32.643.266zM12 14.187c.526 0 .977-.209 1.351-.625.375-.416.562-.916.562-1.501V8.659c0-.584-.187-1.085-.562-1.501-.374-.416-.825-.625-1.35-.625-.527 0-.978.209-1.352.625a2.166 2.166 0 0 0-.562 1.501v3.402c0 .585.187 1.085.562 1.501.374.416.825.625 1.351.625zm3.436-3.159a.373.373 0 0 0-.278-.121c-.107 0-.199.04-.277.121a.402.402 0 0 0-.117.289v.82c0 .79-.27 1.466-.812 2.027-.54.562-1.191.843-1.952.843-.76 0-1.412-.281-1.953-.843a2.818 2.818 0 0 1-.81-2.027v-.82a.402.402 0 0 0-.118-.289.373.373 0 0 0-.277-.121c-.107 0-.2.04-.278.121a.401.401 0 0 0-.117.289v.82c0 .944.303 1.765.91 2.463.606.698 1.356 1.098 2.248 1.2v1.94c-.002.22.13.33.395.33s.397-.11.395-.33V15.8c.892-.102 1.642-.502 2.248-1.2.607-.698.91-1.52.91-2.463v-.82a.401.401 0 0 0-.117-.289z",fillRule:"evenodd"}))};s.defaultProps={name:"LabelRelevant"};var c=s,l=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M12.868 2.899l6.597 3.8c.537.31.868.881.868 1.5v7.602c0 .619-.33 1.19-.868 1.5l-6.597 3.8c-.537.31-1.199.31-1.736 0l-6.597-3.8a1.731 1.731 0 0 1-.868-1.5V8.199c0-.619.33-1.19.868-1.5l6.597-3.8a1.74 1.74 0 0 1 1.736 0zm-2.614 11.85a.29.29 0 0 1 .255.148l1.239 2.207a.289.289 0 0 0 .504 0l1.24-2.207a.29.29 0 0 1 .254-.148l2.52.023a.29.29 0 0 0 .253-.434l-1.284-2.192a.288.288 0 0 1 0-.292l1.284-2.192a.288.288 0 0 0-.253-.434l-2.52.023a.29.29 0 0 1-.255-.148l-1.239-2.207a.289.289 0 0 0-.504 0l-1.24 2.207a.29.29 0 0 1-.254.148l-2.52-.023a.29.29 0 0 0-.253.434l1.284 2.192a.288.288 0 0 1 0 .292L7.48 14.338a.288.288 0 0 0 .253.434l2.52-.023z",fillRule:"evenodd"}))};l.defaultProps={name:"LabelEditorRecommendation"};var u=l,d=n(1980),m=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M3.85 5.266c1.093-.4 2.175-.6 3.245-.6 1.338 0 2.675.313 4.01.939a.6.6 0 0 1 .346.543v10.31a.24.24 0 0 1-.342.216c-1.337-.626-2.675-.94-4.014-.94-1.186 0-2.387.246-3.604.738a.6.6 0 0 1-.824-.557V6.957a1.8 1.8 0 0 1 1.182-1.69zm9.045.339c1.335-.626 2.672-.938 4.01-.938 1.07 0 2.152.2 3.246.6a1.8 1.8 0 0 1 1.182 1.69v8.958a.6.6 0 0 1-.824.557c-1.217-.492-2.418-.737-3.604-.737-1.339 0-2.677.313-4.014.94a.24.24 0 0 1-.342-.218V6.148a.6.6 0 0 1 .346-.543zm4.01 11.282c1.311 0 2.619.27 3.918.806.419.172.62.656.45 1.081a.813.813 0 0 1-1.065.457c-1.108-.457-2.207-.684-3.303-.684-1.08 0-2.163.22-3.254.664h.001a1.8 1.8 0 0 1-.649.121l-2.079.001c-.195 0-.39-.04-.568-.12-1.094-.445-2.18-.666-3.261-.666-1.096 0-2.195.227-3.303.684a.813.813 0 0 1-1.065-.457.834.834 0 0 1 .45-1.081c1.3-.536 2.607-.806 3.918-.806a10.009 10.009 0 0 1 3.391.604 3 3 0 0 0 1.025.18l.973.001a3 3 0 0 0 1.028-.18 10.01 10.01 0 0 1 3.393-.604z",fillRule:"evenodd"}))};m.defaultProps={name:"LabelWeekly"};var p=m,h=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M10.037 3.2h3.926c2.377 0 3.24.248 4.109.712a4.846 4.846 0 0 1 2.016 2.016c.464.87.712 1.732.712 4.109v3.926c0 2.377-.248 3.24-.712 4.109a4.846 4.846 0 0 1-2.016 2.016c-.87.464-1.732.712-4.109.712h-3.926c-2.377 0-3.24-.248-4.109-.712a4.846 4.846 0 0 1-2.016-2.016c-.464-.87-.712-1.732-.712-4.109v-3.926c0-2.377.248-3.24.712-4.109a4.846 4.846 0 0 1 2.016-2.016c.87-.464 1.732-.712 4.109-.712zM12 17.61a1.027 1.027 0 0 0 0-2.053A3.557 3.557 0 1 1 15.557 12a1.027 1.027 0 1 0 2.053 0A5.61 5.61 0 1 0 12 17.61z",fillRule:"evenodd"}))};h.defaultProps={name:"LabelDaily"};var f=h,v=function(e){return o.a.createElement(i.a,e,o.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285zM11.875 8.84a4.21 4.21 0 1 0 0 8.42 4.21 4.21 0 0 0 0-8.42zm2.086 4.044l-.8.815.19 1.152c.063.386-.149.555-.487.37l-.989-.545-.988.544c-.332.183-.551.025-.486-.37l.188-1.15-.8-.816c-.268-.274-.192-.54.186-.598l1.106-.168.494-1.047c.166-.352.432-.359.601 0l.494 1.047 1.106.168c.37.057.46.319.185.598zm2.066-6.143h-2.65a.298.298 0 0 0-.291.217l-.817 1.504s1.75.098 2.782 1.027l1.22-2.298a.268.268 0 0 0 .062-.164c0-.158-.137-.286-.306-.286zM11.73 8.46l-.816-1.503a.298.298 0 0 0-.292-.217h-2.65c-.169 0-.306.128-.306.286a.27.27 0 0 0 .062.164l1.22 2.298c1.033-.929 2.782-1.027 2.782-1.027z"}))};v.defaultProps={name:"LabelProfessional"};var b=v;n.d(t,"f",function(){return g}),n.d(t,"b",function(){return y}),n.d(t,"e",function(){return w}),n.d(t,"d",function(){return E}),n.d(t,"a",function(){return C}),n.d(t,"c",function(){return k}),n.d(t,"g",function(){return O});var g=["online_roundtable","relevant","editor_recommendation","roundtable","special","weekly","daily","professional"],y={online_roundtable:a.a,relevant:c,editor_recommendation:u,roundtable:a.a,special:d.a,weekly:p,daily:f,professional:b},w={online_roundtable:"知乎圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"知乎圆桌精选",special:"专题收录",weekly:"知乎周刊收录",daily:"知乎日报收录",professional:"专业"},E={online_roundtable:"知乎圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌精选",special:"专题收录",weekly:"周刊收录",daily:"日报收录",professional:"专业"},C={online_roundtable:"此回答被收录进圆桌精选",relevant:"此回答由问题相关方亲自撰写",professional:"已有 {} 人赠与了专业徽章"},k={online_roundtable:"前往圆桌",roundtable:"前往圆桌",special:"前往专题",weekly:"前往周刊",daily:"前往日报"},O={online_roundtable:"圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌",special:"专题收录",weekly:"周刊收录",daily:"日报收录",professional:"内容专业"}},2065:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(8),i=n.n(o);n(2207);function s(e){var t=e.className;return r.a.createElement("span",{className:i()("ActivityItem-StickyMark",t)},"置顶")}n.d(t,"a",function(){return s})},2066:function(e,t,n){"use strict";var a=n(22),r=n(3),o=n(4),i=n(7),s=n(5),c=n(6),l=n(0),u=n.n(l),d=n(1),m=n.n(d),p=n(496),h=n(152),f=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,r=Object(a.a)(e,["containerClassName","selector"]);return u.a.createElement(h.b,{className:t,selector:n},u.a.createElement(p.b,r))}}]),t}(l.Component);f.propTypes={containerClassName:m.a.string,selector:m.a.string},f.defaultProps={selector:".List-item"};var v=f;n.d(t,"a",function(){return v})},2067:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(29),l=n(30),u=n.n(l),d=n(0),m=n.n(d),p=n(1),h=n.n(p),f=n(10),v=function(e){return m.a.createElement(f.a,e,m.a.createElement("path",{d:"M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"}))};v.defaultProps={name:"Browser"};var b=v,g=n(2005),y=n(8),w=n.n(y),E=n(44),C=n.n(E),k=n(52),O=(n(2049),function(){return m.a.createElement("div",{className:"LinkCard-image LinkCard-image--default"},m.a.createElement(b,{size:32}))}),j=/^https?:\/\/link\.zhihu\.com/,N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e;if(j.test(e)){var n=e.match(/target=([^=]+)/)||[],a=Object(c.a)(n,2)[1];a&&(t=decodeURIComponent(a))}var r=t.split("/");return Object(c.a)(r,3)[2]||""},S=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"renderLinkMeta",value:function(){var e=this.props,t=e.url,n=e.entityType,a=e.entityData,r=N(t);if(n&&a&&"job"===n){var o=a.salary,i=a.city,s=a.location,c=a.seniority,l=a.education;return m.a.createElement("span",{className:"LinkCard-meta"},m.a.createElement("span",{className:"LinkCard-textMeta"},c&&m.a.createElement("span",{className:"LinkCard-metaItem"},c),l&&m.a.createElement("span",{className:"LinkCard-metaItem"},l),(i||s)&&m.a.createElement("span",{className:"LinkCard-metaItem"},i,m.a.createElement("span",{className:"LinkCard-metaItem-jobLocation"},s))),o&&m.a.createElement("span",{className:"LinkCard-badge"},o))}return m.a.createElement("span",{className:"LinkCard-meta"},m.a.createElement(g.a,{size:17,center:!0}),r)}},{key:"render",value:function(){var e=C()(this.props,["entityType","entityData"]),t=e.text,n=e.target,a=e.url,r=e.image,o=e.imageWidth,i=e.imageHeight,s=e.component,c=e.className,l=u()(e,["text","target","url","image","imageWidth","imageHeight","component","className"]),d=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return{modifier:"horizontal",size:"180x120"};if(n<=.8)return{modifier:"vertical",size:"120x160"}}return{modifier:"square",size:"ipico"}}(o,i),p=d.modifier,h=d.size,f=!r&&function(e){var t=N(e);return"zhihu.com"===t||t.endsWith(".zhihu.com")}(a)?"https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg":Object(k.imgUrl)(r,h);return m.a.createElement(s,Object.assign({target:n,href:a,"data-draft-node":"block","data-draft-type":"link-card"},f&&{"data-image":f},o&&{"data-image-width":o},i&&{"data-image-height":i},{className:w()("LinkCard",c,{"LinkCard--hasImage":Boolean(f),"LinkCard--noImage":!f})},l),f&&m.a.createElement("span",{className:"LinkCard-backdrop",style:{backgroundImage:"url(".concat(f,")")}}),m.a.createElement("span",{className:"LinkCard-content"},m.a.createElement("span",{className:"LinkCard-text"},m.a.createElement("span",{className:"LinkCard-title","data-text":!0},t),this.renderLinkMeta()),m.a.createElement("span",{className:"LinkCard-imageCell"},f?m.a.createElement("img",{className:w()("LinkCard-image","LinkCard-image--".concat(p)),alt:"图标",src:f}):m.a.createElement(O,null))))}}]),t}(m.a.Component);S.propTypes={component:h.a.oneOfType([h.a.string,h.a.func]),target:h.a.string,url:h.a.string.isRequired,text:h.a.string.isRequired,image:h.a.string,imageWidth:h.a.oneOfType([h.a.string,h.a.number]),imageHeight:h.a.oneOfType([h.a.string,h.a.number])},S.defaultProps={component:"a",target:"_blank"};t.a=S},2068:function(e,t,n){e.exports=n(2235)()},2069:function(e,t,n){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e.length>t?e.slice(0,t)+n:e}function r(e,t){for(var n,a=0,r="",o=e.length,i=0;i<o&&((n=e[i]).charCodeAt(0)<128?a+=1:a+=2,r+=n,!(a>=t-1));i+=1);return r}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var o=null;function i(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"undefined"==typeof document?t=r(n=e.replace(/<.+?>/g,""),a):((o=o||document.createElement("div")).textContent=e,t=r(n=o.textContent.replace(/<.+?>/g,""),a));var c=!1;return t!==n&&(c=!0,t=t.slice(0,t.length-i.length),t+=i),s?{output:t,truncated:c}:t}},2070:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(0),r=n.n(a),o=n(1),i=n.n(o),s=n(8),c=n.n(s),l=n(1989),u=n(2043);n(2151);function d(e){var t=e.annotationDetail,n=e.className;if(!t)return null;var a=t.detail,o=t.member,i=t.reasonDescription,s=t.type,d=o?"".concat(o.name,"："):"";return r.a.createElement("section",{className:c()("Annotation-mark",n)},r.a.createElement("header",{className:"Annotation-header"},"strong"===s&&r.a.createElement(l.a,{size:16,center:!0,text:!0,className:"Annotation-alert"}),r.a.createElement("h1",{className:"Annotation-markTitle"},i||"该内容已被标记")),(a||d)&&r.a.createElement(u.a,{className:"Annotation-markSummary",html:"".concat(d).concat(a||"未填写原因")}))}d.propTypes={annotationDetail:i.a.shape({reason:i.a.number.isRequired,reasonDescription:i.a.string,type:i.a.oneOf(["strong","weak"]).isRequired,detail:i.a.string,member:i.a.shape({name:i.a.string.isRequired}),showOuter:i.a.bool}).isRequired}},2071:function(e,t,n){"use strict";var a=n(9),r=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],o=function(e){return r.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};t.a=function(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;var r=Object(a.a)(n.childNodes),i=!0,s=!1,c=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=l.value;if("BR"===d.nodeName&&d.previousSibling&&"BR"!==d.previousSibling.nodeName&&d.nextSibling&&"BR"===d.nextSibling.nodeName){for(var m=t.createElement("p"),p=d.previousSibling;p&&!o(p)&&("BR"!==p.nodeName||p.previousSibling&&"BR"!==p.previousSibling.nodeName&&!o(p.previousSibling));){var h=m.childNodes;h.length>0?m.insertBefore(p,h[0]):m.appendChild(p),p=d.previousSibling}m.childNodes.length>0&&(n.insertBefore(m,d),d.nextSibling.parentNode.removeChild(d.nextSibling),d.parentNode.removeChild(d))}}}catch(e){s=!0,c=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw c}}return n.innerHTML}},2073:function(e,t,n){"use strict";var a,r,o,i,s=n(2),c=n(3),l=n(4),u=n(7),d=n(5),m=n(6),p=n(0),h=n.n(p),f=n(1),v=n.n(f),b=n(17),g=n(2251),y=n(50),w=n(24),E=n(103),C=(n(2118),{all:"开放评论",censor:"预审评论",nobody:"关闭评论"}),k={all:"允许任何人评论",follower:"允许关注我的人评论",censor:"评论由我筛选后显示",followee:"允许我关注的人评论",paid:"付费用户可评论",nobody:"关闭评论"},O=Object(b.connect)(function(e){return{isOrg:Object(w.f)(e)}})((o=r=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleClickOption=function(e){var t=n.props,a=t.isOrg,r=t.target,o=t.onChange,i=t.current;if(e!==i)if(r){var s=r.id;r.adminClosedComment?Object(E.b)("此内容无法更改评论权限",{theme:"red-ghost"}):a||"censor"!==e&&"censor"!==i?o(s,e):Object(E.a)("你确定要更改评论权限吗？",{content:"censor"===e?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then(function(){return o(s,e)}).catch(function(){return null})}else o(e)},n.getCommentPermission=function(){var e=n.props.target,t=e&&"answer"===e.type&&"paid"===e.answerType;return Object.keys(k).filter(function(n){if("paid"!==n||t)return"follower"!==n||e&&"article"===e.type}).reduce(function(e,t){return Object.assign({},e,Object(s.a)({},t,k[t]))},{})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isOrg,a=t.current,r=n?C:this.getCommentPermission();return h.a.createElement(p.Fragment,null,Object.keys(r).map(function(t){var n=t===a;return h.a.createElement(y.b,{key:t,onClick:function(){return e.handleClickOption(t)},className:"CommentPermission-item"},n&&h.a.createElement(g.a,{text:!0,center:!0}),r[t])}))}}]),t}(p.Component),r.propTypes={current:v.a.string.isRequired,target:v.a.object,onChange:v.a.func.isRequired},a=o))||a,j=n(41),N=n(2119),S=n.n(N),A=n(180),T=Object(A.a)({view:{id:3038},trackCardShow:!0})(i=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return h.a.createElement("img",{src:S.a,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})}}]),t}(p.Component))||i;T.showModal=function(e){j.b.open(function(t){var n=(e||{}).reportText;return setTimeout(t,2e3),h.a.createElement(j.b,{title:"举报成功",onClose:t},h.a.createElement("div",{style:{textAlign:"center"}},h.a.createElement("div",null,n||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"),h.a.createElement(T,null)))})};var R=T,I=n(16),x=n(185),P=(n(2120),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={reportModalShown:!1},n.handleSubmit=function(){var e=n.props,t=e.id,a=e.onDelete,r=e.onClose;a(t),r()},n.handleReportModalOpen=function(){return n.setState({reportModalShown:!0})},n.handleReportModalClose=function(){n.setState({reportModalShown:!1}),n.handleSubmit()},n.handleSuccess=function(){n.handleSubmit()},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.shown,a=e.onClose,r=e.reportAndDeleteExperiment;return h.a.createElement(p.Fragment,null,h.a.createElement(j.b,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:a,footer:r&&h.a.createElement("div",{className:"CommentDeleteAndReport-extra"},"评论若构成举报条件可以",h.a.createElement(I.c,{preset:"link",onClick:this.handleReportModalOpen},"删除并举报"))},n&&h.a.createElement(j.a,{direction:"horizontal"},h.a.createElement(I.c,{onClick:a},"取消"),h.a.createElement(I.c,{preset:"primary",color:"blue",onClick:this.handleSubmit},"确定"))),h.a.createElement(x.a,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose}))}}]),t}(p.Component));n.d(t,"c",function(){return O}),n.d(t,"a",function(){return P}),n.d(t,"b",function(){return R})},2074:function(e,t,n){"use strict";var a=n(29),r=n(3),o=n(4),i=n(7),s=n(5),c=n(6),l=n(1),u=n.n(l),d=n(0),m=n.n(d),p=n(8),h=n.n(p),f=n(16),v=n(2252),b=n(2253),g=n(15),y=n(60),w=n(41),E=n(152),C=n(9),k=n(38),O=n(101),j=(n(2129),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={step:0},n.containerRef=m.a.createRef(),n.reasonButtonRefs=[],n.toggleStep=function(){n.setState({step:0===n.state.step?1:0},function(){n.popover.position()})},n.handleKeyDown=function(e){var t=Number(e.key);t&&n.reasonButtonRefs[t-1]&&n.reasonButtonRefs[t-1].focus()},n.handleNeverShowVoteDownReason=function(){n.props.onSetVoteDownReason(!1),n.popover.close()},n.handleSelectReason=function(e){n.props.onSelectVoteDownReason(e),n.popover.close()},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,a=t.positionStatus,r=this.state.step,o=Object(C.a)(n).sort(function(e,t){return e.sort-t.sort});return m.a.createElement(O.a,{className:"VoteDownReasonMenu",targetClassName:"VoteDownReasonMenu-target",positionStatus:a,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0},m.a.createElement("div",{className:"VoteDownReasonMenu-container",onKeyDown:this.handleKeyDown,tabIndex:-1},m.a.createElement("div",{className:"VoteDownReasonMenu-header"},0===r&&"已反对，你觉得",1===r&&"不再显示该反馈功能？"),m.a.createElement("div",{className:"VoteDownReasonMenu-action"},0===r&&m.a.createElement(f.c,{preset:"plain",className:"VoteDownReasonMenu-ignoreButton preventCloseOnTarget",onClick:this.toggleStep},"不再显示"),0===r&&m.a.createElement("div",{className:"VoteDownReasonMenu-spliter"}),m.a.createElement(f.c,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭",tabIndex:1},m.a.createElement(k.a,{className:"VoteDownReasonMenu-closeIcon",name:"remove",width:12,height:12,fill:"#a5b6cf"}))),0===r&&m.a.createElement("div",{className:"VoteDownReasonMenu-reasonList"},o.map(function(t,n){return m.a.createElement(f.c,{preset:"plain",className:"VoteDownReasonMenu-reason",key:t.reasonId,onClick:function(){e.handleSelectReason(t)},onRef:function(t){return e.reasonButtonRefs[n]=t}},t.name)})),1===r&&m.a.createElement("div",{className:"VoteDownReasonMenu-disableReason"},m.a.createElement("div",{className:"VoteDownReasonMenu-disableReasonHint"},"你可以在「设置」页面中的「屏蔽」开启。"),m.a.createElement("div",{className:"VoteDownReasonMenu-disableReasonButtonList"},m.a.createElement(f.c,{className:"preventCloseOnTarget",onClick:this.toggleStep},"返回"),m.a.createElement(f.c,{color:"blue",onClick:this.handleNeverShowVoteDownReason},"不再显示")))))}}]),t}(d.Component));j.defaultProps={reasonList:[]};var N=j,S=n(19);n(2090);n.d(t,"a",function(){return A});var A=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:n.props.isRecognized}},n.voteUpButtonRef=m.a.createRef(),n.voteDownButtonRef=m.a.createRef(),n.shouldShowMenu=function(){var e=n.props,t=e.voting,a=e.voteDownReason,r=e.onLoadVoteDownReason;return!!e.isShowVoteDownMenu&&(-1===t?(n.popover.close(),!1):!!a||(n.isPendingForVoteDownReason=!0,r(),!1))},n.onVote=n.context.authRequired(function(e){n.props.onVote(e)},S.N.vote),n.voteUp=function(e){var t=1===n.props.voting?["UnUpvote","neutral"]:["Upvote","up"],r=Object(a.a)(t,2),o=r[0],i=r[1];n.vote(e,o,i),n.voteUpButtonRef.current.focus()},n._voteDown=function(e){var t=-1===n.props.voting?["UnDownvote","neutral"]:["Downvote","down"],r=Object(a.a)(t,2),o=r[0],i=r[1];n.vote(e,o,i),n.voteDownButtonRef.current.focus()},n.voteDown=function(e){n.shouldShowMenu()&&n.popover.open(),n._voteDown(e)},n.vote=function(e,t,a){var r=n.props,o=r.disableAuth,i=r.handleToggleGuide,s=r.onClick,c=r.type,l=r.zaIds,u=l.voteUp,d=l.voteDown,m=t.includes("Upvote")?u:d;"article"===c&&"down"===a&&g.default.trackEvent(n.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),g.default.trackEvent(t.includes("Upvote")?n.voteUpButtonRef.current:n.voteDownButtonRef.current,Object.assign({action:t,element:"Button"},m&&{id:m})),s?s(e):o?i():n.onVoteWithRecognize(t,a)},n.onVoteWithRecognize=function(e,t){var a=n.props.voting;!n.state.recognizeInfo.isRecognized||1!==a||"UnUpvote"!==e&&"Downvote"!==e?n.onVote(t):n.setState({recognizeInfo:Object.assign({},n.state.recognizeInfo,{showRecognizeModal:!0,action:e,voteType:t})})},n.handleConfirmCancelRecognize=function(){n.onVote(n.state.recognizeInfo.voteType),n.setState({recognizeInfo:Object.assign({},n.state.recognizeInfo,{isRecognized:!1,showRecognizeModal:!1})})},n.handleCloseCancelRecognizeModal=function(){return n.setState({recognizeInfo:Object.assign({},n.state.recognizeInfo,{showRecognizeModal:!1})})},n.handleTogglerClick=function(e){n.shouldShowMenu()||e.preventDefault(),n._voteDown(e)},n.renderVoteUpButton=function(){var e=n.props,t=e.isOwner,a=e.count,r=e.voting,o=e.disabled,i=e.hideDesc,s=1===r?"已赞同":"赞同",c=[s,Object(y.niceNumber)(a)].join(" "),l=[!i&&s,0!==a&&Object(y.niceNumber)(a)].filter(Boolean).join(" ");return m.a.createElement(f.c,{className:h()("VoteButton VoteButton--up",{"is-active":1===r}),disabled:t||o,onClick:n.voteUp,"aria-label":c,onRef:n.voteUpButtonRef},m.a.createElement(v.a,{center:!0,size:10,className:"VoteButton-TriangleUp"}),l)},n.renderVoteDownButton=function(){var e=n.props,t=e.voting,a=e.disabled,r=-1===t?"已反对":"反对";return m.a.createElement(f.c,{className:h()("VoteButton VoteButton--down",{"is-active":-1===t},{"VoteButton--mobileDown":!1}),disabled:a,onClick:n._voteDown,"aria-label":r,onRef:n.voteDownButtonRef},m.a.createElement(b.a,{center:!0,size:10}))},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,a=t.positionStatus,r=t.isShowVoteDownMenu,o=t.voteDownReason,i=this.state.recognizeInfo,s=i.showRecognizeModal,c="UnUpvote"===i.action,l=r&&!0;return m.a.createElement("span",{ref:this.voteButtonRef},m.a.createElement(E.c,{keyMap:{VOTE_UP:"v",VOTE_DOWN:"d"},handlers:{VOTE_UP:this.voteUp,VOTE_DOWN:this.voteDown}}),this.renderVoteUpButton(),!n&&!l&&this.renderVoteDownButton(),!n&&l&&m.a.createElement(N,{reasonList:o,toggler:this.renderVoteDownButton(),popoverRef:function(t){return e.popover=t},positionStatus:a,onTogglerClick:this.handleTogglerClick,onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}),m.a.createElement(w.b,{title:"确定".concat(c?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal},s&&m.a.createElement("div",null,m.a.createElement("div",null,c?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"),m.a.createElement(w.a,{direction:"horizontal"},m.a.createElement(f.c,{onClick:this.handleCloseCancelRecognizeModal},c?"暂不取消":"暂不选择"),m.a.createElement(f.c,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize},c?"取消赞同":"选择反对")))))}}]),t}(d.Component);A.contextTypes={authRequired:u.a.func},A.propTypes={voting:u.a.oneOf([-1,0,1]).isRequired,disabled:u.a.bool,type:u.a.string,hideDesc:u.a.bool,zaIds:u.a.shape({voteUp:u.a.number,voteDown:u.a.number}),isRecognized:u.a.bool},A.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}}},2075:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=o,t.unobserve=i,t.destroy=s;var a=new Map,r=new Map;function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},o=arguments[3],i=n.root,s=n.rootMargin,l=n.threshold||0;if(e&&t){var u=s?l.toString()+"_"+s:""+l.toString();i&&(u=o?o+"_"+u:null);var d=u?r.get(u):null;d||(d=new IntersectionObserver(c,n),u&&r.set(u,d));var m={callback:t,visible:!1,options:n,observerId:u,observer:u?void 0:d};return a.set(e,m),d.observe(e),m}}function i(e){if(e){var t=a.get(e);if(t){var n=t.observerId,o=t.observer,i=n?r.get(n):o;i&&i.unobserve(e);var s=!1;n&&a.forEach(function(t,a){t&&t.observerId===n&&a!==e&&(s=!0)}),i&&!s&&(i.disconnect(),r.delete(n)),a.delete(e)}}}function s(){r.forEach(function(e){e.disconnect()}),r.clear(),a.clear()}function c(e){e.forEach(function(e){var t=e.isIntersecting,n=e.intersectionRatio,r=e.target,o=a.get(r);if(o&&n>=0){var i=o.options,s=!1;Array.isArray(i.threshold)?s=i.threshold.some(function(e){return o.visible?n>e:n>=e}):void 0!==i.threshold&&(s=o.visible?n>i.threshold:n>=i.threshold),void 0!==t&&(s=s&&t),o.callback&&o.callback(s)}})}t.default={observe:o,unobserve:i,destroy:s}},2076:function(e,t,n){},2077:function(e,t,n){var a=n(2041)(!0);e.exports=a},2078:function(e,t,n){var a=n(875),r=a&&new a;e.exports=r},2079:function(e,t){e.exports={}},2080:function(e,t,n){var a=n(2027),r=n(2037),o=n(2038),i=n(2081);e.exports=function(e){var t=o(e),n=i[t];if("function"!=typeof n||!(t in a.prototype))return!1;if(e===n)return!0;var s=r(n);return!!s&&e===s[0]}},2081:function(e,t,n){var a=n(2027),r=n(2025),o=n(2026),i=n(90),s=n(135),c=n(2082),l=Object.prototype.hasOwnProperty;function u(e){if(s(e)&&!i(e)&&!(e instanceof a)){if(e instanceof r)return e;if(l.call(e,"__wrapped__"))return c(e)}return new r(e)}u.prototype=o.prototype,u.prototype.constructor=u,e.exports=u},2082:function(e,t,n){var a=n(2027),r=n(2025),o=n(518);e.exports=function(e){if(e instanceof a)return e.clone();var t=new r(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},2083:function(e,t,n){},2084:function(e,t,n){},2085:function(e,t,n){},2086:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(496),p=n(60),h=n(80),f=n(525),v=n(502),b=(n(2161),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,a=e.items,r=e.voteupCount,o=e.onLoad,i=e.text,s=e.isRewardList,c=e.notice,l=e.type,u=e.currentUser,b={getContainer:function(e){return e}};return d.a.createElement("div",{className:"VoterList"},d.a.createElement(f.a,{header:"".concat(Object(p.formatNumber)(r)," 人").concat(i||"赞同了")}),s&&c&&d.a.createElement("div",{className:"VoterList-description"},d.a.createElement("p",null,c)),d.a.createElement(h.b,Object.assign({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:o,placeholder:d.a.createElement(h.a,{className:"List-item",withAvatar:!0})},b),a&&a.map(function(e,t){return d.a.createElement(m.a,{key:"".concat(t,".").concat(e.urlToken)},d.a.createElement(v.a,{currentUser:u,user:e,isRewardList:s,meta:null,type:l}))})))}}]),t}(u.Component));b.propTypes={isFetching:l.a.bool.isRequired,isDrained:l.a.bool.isRequired,items:l.a.array.isRequired,voteupCount:l.a.number.isRequired,text:l.a.string.isRequired,onLoad:l.a.func.isRequired,isRewardList:l.a.bool,type:l.a.string,currentUser:l.a.object},t.a=b},2089:function(e,t,n){"use strict";var a=n(9),r=n(29),o=n(3),i=n(4),s=n(7),c=n(5),l=n(26),u=n(6),d=n(0),m=n.n(d),p=n(1),h=n.n(p),f=n(8),v=n.n(f),b=n(17),g=n(23),y=n(510),w=n(2e3),E=n(1988),C=n(2296),k=n(2328),O=n(2329),j=n(15),N=n(16),S=n(38),A=n(50),T=n(92),R=n(31),I=n.n(R),x=(n(2093),n(53)),P=n(181),M=32305,L=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}],D=(n(2156),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,a=e.onChange,r=e.className;return m.a.createElement("div",{className:v()("RadioButtons",r)},t.map(function(e,t){var r=e.value,o=e.text,i=e.placeholder;return m.a.createElement("label",{key:t,className:"RadioButtons-item"},m.a.createElement("span",{className:"RadioButtons-text"},o),m.a.createElement("input",{type:"radio",className:"RadioButtons-input",value:r,checked:n===r,onChange:function(){return a(r,i)}}))}))}}]),t}(d.PureComponent));D.propTypes={options:h.a.arrayOf(h.a.shape({value:h.a.string,text:h.a.string,placeholder:h.a.string})).isRequired,value:h.a.string,onChange:h.a.func,className:h.a.string};n(2157);var q=function(){return n.e(10).then(n.bind(null,1977))},_=L.map(function(e){var t=e.code,n=e.description,a=e.placeholder;return{text:n,value:String(t),placeholder:a}}),z=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},n.handleReasonCodeChange=function(e,t){n.setState({selectedReasonCode:Number(e),selectedReasonPlaceholder:t||""}),n.input&&n.input.resetWithValue(t||"")},n.handleAddAnnotation=function(){var e=n.props,t=e.addAnnotation,a=e.type,r=e.urlToken,o=e.showNotification,i=e.onClose;t(a,r,n.state.selectedReasonCode,n.input.toHTML()).then(function(){i(),o&&o("标记内容成功")})},n.handleReasonDescriptionChange=function(e){n.setState({isReasonDescriptionEmpty:e.isEmpty})},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,a=t.shown,r=t.className,o=this.state,i=o.selectedReasonCode,s=o.isReasonDescriptionEmpty,c=o.selectedReasonPlaceholder,l=function(e){var t=L.find(function(t){return t.code===e});return t&&t.description}(i),u=32300===i;return m.a.createElement(P.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:r},a&&m.a.createElement("div",null,m.a.createElement("div",{className:"AddAnnotationModal-body"},m.a.createElement(D,{options:_,onChange:this.handleReasonCodeChange,value:String(i)}),i&&m.a.createElement("div",null,m.a.createElement("div",{className:"AddAnnotationModal-description"},l,"（",u?"必填":"选填","）"),m.a.createElement(x.a,{getComponent:q,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:c,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange}))),m.a.createElement(P.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup"},m.a.createElement(N.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!i||u&&s},"标记"))))}}]),t}(d.PureComponent);z.propTypes={addAnnotation:h.a.func.isRequired,onClose:h.a.func.isRequired,shown:h.a.bool.isRequired,type:h.a.oneOf([0,1,2]).isRequired,urlToken:h.a.oneOfType([h.a.number,h.a.string]),showNotification:h.a.func,className:h.a.string};var B=n(37),Q=n(57),U=n.n(Q),F=n(100),V=(n(2158),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={isReasonDescriptionEmpty:!0},n.handleCancelAnnotation=function(){var e=n.props,t=e.cancelAnnotation,a=e.type,r=e.urlToken,o=e.showNotification,i=e.onClose;t(a,r,M,n.input.value).then(function(){i(),o&&o("撤销标记成功")})},n.handleReasonDescriptionChange=function(e){return n.setState({isReasonDescriptionEmpty:e.isEmpty})},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,a=t.shown,r=t.className,o=this.state.isReasonDescriptionEmpty;return m.a.createElement(P.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:r},a&&m.a.createElement("div",{className:"CancelAnnotationModal"},m.a.createElement(F.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),m.a.createElement(P.a,{direction:"horizontal"},Object(B.isBrowser)()&&!U()(window.navigator.userAgent).Mobile&&m.a.createElement(N.c,{onClick:n,size:"spread"},"取消"),m.a.createElement(N.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:o},"撤销标记"))))}}]),t}(d.PureComponent));V.propTypes={cancelAnnotation:h.a.func.isRequired,onClose:h.a.func.isRequired,shown:h.a.bool.isRequired,type:h.a.oneOf([0,1,2]).isRequired,urlToken:h.a.oneOfType([h.a.number.isRequired,h.a.string.isRequired]),showNotification:h.a.func,className:h.a.string};var H=n(102),W=n(508),G=n(19),K=n(61),Y=n(70),$=n(2),J=n(12),Z=n(36),X=n(11),ee=Object.assign({},Object(X.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),te=function(e){return e===G.b?"answers":e===G.d?"pins":e===G.c?"articles":null},ne=n(21),ae=n(265),re=n(55),oe=n(226),ie=n(24),se=n(63),ce=n(2061),le=n(507),ue=n(2095),de=n(2073),me=n(180),pe=n(2105),he=n(513),fe=n(41),ve=n(48),be=n(2106),ge=n.n(be),ye=n(2121),we=n.n(ye),Ee=n(2122),Ce=n.n(Ee),ke=n(2159),Oe=n.n(ke),je=(n(2160),{answerAdmireCouldOpen:{image:we.a,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/profit/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:we.a,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},promotionCouldOpen:{image:Oe.a,title:"开启「自定义推广」权益",content:"你已经获得了「自定义推广」权益，使用「自定义推广」可以让内容得到更多展示机会。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/tools/custom_promotion",detailViewName:"promotion",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},promotionCouldUse:{image:Oe.a,title:"使用「自定义推广」权益",content:"你可以使用「自定义推广」权益，使这篇内容获得更多展示机会。快去使用权益吧。",buttonText:"立即使用权益",buttonLink:"https://www.zhihu.com/creator/tools/custom_promotion",detailViewName:"promotion",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:Ce.a,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/tools/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:Ce.a,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}});var Ne=function(e){var t=e.notification,n=void 0===t?{}:t,a=e.className,r=e.onRead,o=e.onUseAdmire,i=e.onUseRecommend,s=Object.keys(n).find(function(e){return n[e]}),c=je[s]||{},l=c.title,u=c.image,p=c.content,h=c.buttonText,f=c.buttonLink,b=c.detailViewName,g=c.cardShowId,y=c.buttonClickId,w=c.readAlwaysId,E=c.readNextId;return Object(d.useEffect)(function(){s&&j.default.trackCardShow(null,{id:g,name:b})},[s,g,b]),m.a.createElement(fe.b,{className:v()("CreatorRightsNotification",a),onClose:function(){r("next"),j.default.trackEvent(null,{id:E,name:b})}},s&&m.a.createElement(m.a.Fragment,null,m.a.createElement("img",{className:"CreatorRightsNotification-background",src:ge.a,alt:"blue background"}),m.a.createElement("img",{className:"CreatorRightsNotification-liukanshan",src:u,alt:"liukanshan image"}),m.a.createElement("div",{className:"CreatorRightsNotification-title"},l),m.a.createElement("div",{className:"CreatorRightsNotification-content"},p),m.a.createElement(fe.a,{className:"CreatorRightsNotification-buttonGroup"},f?m.a.createElement(ve.a,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:f,target:"_blank",onClick:function(){r("current"),j.default.trackEvent(null,{id:y,name:b})}},h):m.a.createElement(N.c,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){r("current"),j.default.trackEvent(null,{id:y,name:b}),"answerAdmireCouldUse"===s&&o(),"recommendationCouldUse"===s&&i()}},h),m.a.createElement(N.c,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){r("always"),j.default.trackEvent(null,{id:w,name:b})}},"不再提醒"))))},Se=n(2046),Ae=n(2150),Te=n(2053),Re=n(262),Ie=n(2021),xe=n(2109),Pe=n(2028),Me=n(2029),Le=n(185),De=n(2147),qe=n(500),_e=n(2128),ze=n(2034),Be=n(2099),Qe=(n(2183),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.activateReward;return m.a.createElement("div",{className:"Reward"},m.a.createElement("button",{className:"Reward-activateBtn",onClick:e},"开启赞赏"),m.a.createElement("div",{className:"Reward-activateHint"},"赞赏开启后，读者将可以付费支持你的创作。"))}}]),t}(d.Component));Qe.propTypes={activateReward:h.a.func};n(2184);var Ue=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.activateReward,a=e.totalMoney,r=e.showRewarders;return m.a.createElement("div",null,m.a.createElement("div",{className:"Reward-tagline"},t||G.j,m.a.createElement("a",{className:"Reward-editButton",onClick:n},m.a.createElement(S.a,{left:!0,name:"modify"}),m.a.createElement("span",null,"编辑"))),Boolean(a)&&m.a.createElement("div",{className:"Reward-money"},m.a.createElement("span",{onClick:r},"￥ ",a.toFixed(2))))}}]),t}(d.Component);Ue.propTypes={activateReward:h.a.func,tagline:h.a.string,totalMoney:h.a.number,showRewarders:h.a.func};var Fe=n(2086),Ve=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,a=e.items,r=e.voteupCount,o=e.isRewardList,i=e.onClose,s=e.notice;return m.a.createElement(P.b,{size:"fullPage",onClose:i},t&&m.a.createElement(Fe.a,{items:a,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:r,onLoad:n,isRewardList:o,notice:s,type:"rewardPeople"}))}}]),t}(d.Component);Ve.propTypes={onLoad:h.a.func,modalShown:h.a.bool};var He,We,Ge,Ke=n(60),Ye=(n(2185),Object(me.a)({module:"UserList",moduleName:"*** 人已赞赏"})((Ge=We=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={hoverName:""},n.hoverUser=function(e){n.setState({hoverName:e.target.dataset.name})},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,a=t.handleListShown,r=t.rewardMemberCount,o=t.onUserClick,i=this.state.hoverName,s=n.slice(0,5);return m.a.createElement("div",{className:"Reward-count"},m.a.createElement("p",{className:"Reward-User-text",onClick:a},"".concat(Object(Ke.formatNumber)(r)," 人已赞赏")),m.a.createElement("div",null,s.map(function(t,n){return m.a.createElement(g.Link,{key:n,to:"//www.zhihu.com/".concat(t.userType,"/").concat(t.urlToken),className:"Reward-User-img","data-hover-title":i,target:"_blank",onClick:o},m.a.createElement("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"}))}),r>6&&m.a.createElement("span",{className:"Reward-MoreUser",onClick:a},m.a.createElement("i",null),m.a.createElement("i",null),m.a.createElement("i",null))))}}]),t}(d.Component),We.propTypes={users:h.a.array,handleListShown:h.a.func,rewardMemberCount:h.a.number,onUserClick:h.a.func},We.defaultProps={users:[]},He=Ge))||He),$e=(n(2186),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,a=e.isAuthor,r=e.users,o=e.onUserClick;return t?m.a.createElement(Ye,{users:r,onUserClick:o,handleListShown:n,rewardMemberCount:t}):m.a.createElement("div",{className:"Reward-countZero"},a?"还没有人赞赏。":"还没有人赞赏，快来当第一个赞赏的人吧！")}}]),t}(d.Component));$e.propTypes={rewardMemberCount:h.a.number,handleListShown:h.a.func,isAuthor:h.a.bool,users:h.a.array,onUserClick:h.a.func};n(2187);var Je=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return m.a.createElement("div",null,m.a.createElement("div",{className:"Reward-tagline"},t||G.j),m.a.createElement("button",{className:"Reward-rewardBtn",onClick:n},"赞赏"))}}]),t}(d.Component);Je.propTypes={onClick:h.a.func,tagline:h.a.string};n(2188);var Ze,Xe,et,tt=function(){return n.e(7).then(n.bind(null,3218)).then(function(e){return e.TipjarDialog})},nt=Object(b.connect)(null,{updateAnswerReward:K.F,updateArticleReward:ae.l,createArticleTipjar:ae.b,getRewardUserDetails:ae.i,getPagingArticleRewardUser:ae.f,getPagingArticleRewardUserDetails:ae.g,getArticleRewardUser:ae.e,updateEntitiesUsers:ae.m,getRewardUser:ae.h,createTipjar:ae.c,removeTradeNumber:ae.k,onRewardSuccess:ae.j,showNotification:ne.h})((et=Xe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={TipjarRender:!1,modalShown:!1,rewardModalShown:!1},n.onSubmitReward=function(e){I.a.set("isRewardable",!0),n.updateReward(e),n.unactivateReward()},n.onPaySuccess=function(){var e=n.props,t=e.reward,a=e.currentUser,r=e.id,o=e.type,i=t[o][r].users,s=[a];Array.isArray(i)&&(i.push(a),s=i),n.props.onRewardSuccess(s,r,o),n.colseTijarDialog(),n.props.showNotification("你已赞赏成功！")},n.onLoad=function(e){"article"===n.props.type?"normal"===e?n.onLoadArticleRewardUser():n.onLoadArticleRewardUserDetails():n.onLoadRewardUser()},n.onLoadArticleRewardUser=function(){var e=n.props.id;n.props.getArticleRewardUser(e)},n.onLoadArticleRewardUserDetails=function(){var e=n.props,t=e.id;e.isAuthor?n.props.getPagingArticleRewardUserDetails(t):n.props.getPagingArticleRewardUser(t)},n.onLoadRewardUser=function(){var e=n.props,t=e.id;e.isAuthor?n.props.getRewardUserDetails(n.props.id):n.props.getRewardUser(t).then(function(e){var t=e.payload.data;if(t.length>0){var a={};t.forEach(function(e){a[e.urlToken]=e}),n.props.updateEntitiesUsers(a)}})},n.handleListShown=function(e){var t=n.props.onRewardUserMoreClick;t&&t(e),n.setState({modalShown:!0})},n.handleListHide=function(){n.setState({modalShown:!1})},n.updateReward=function(e){var t=n.props,a=t.type,r=t.id,o=t.rewardInfo.canOpenReward;if("article"===a){var i=!!o||void 0;n.props.updateArticleReward(r,e,i)}else n.props.updateAnswerReward(r,e)},n.activateReward=function(){n.setState({rewardModalShown:!0})},n.unactivateReward=function(){n.setState({rewardModalShown:!1})},n.showRewarders=function(){n.setState({modalShown:!0})},n.addReward=n.context.authRequired(function(e,t){var a=n.props,r=a.id;"article"===a.type?n.props.createArticleTipjar(r,e):n.props.createTipjar(r,e,t)},void 0,ne.b),n.handleRewardButtonClick=function(e){var t=n.props.onRewardButtonClick;t&&t(e),n.setState({TipjarRender:!0})},n.colseTijarDialog=function(){n.setState({TipjarRender:!1})},n.removeTradeNumber=function(){var e=n.props,t=e.id,a=e.type;n.props.removeTradeNumber(t,a)},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal"),this.props.imperativeRef&&(this.props.imperativeRef.current={activateReward:this.activateReward.bind(this)})}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,a=t.isAuthor,r=t.isMobile,o=t.id,i=t.reward,s=t.author,c=t.type,l=t.ua,u=t.rewardInfo,d=u.canOpenReward,p=u.isRewardable,h=u.tagline,f=u.rewardTotalMoney,v=u.rewardMemberCount,b=t.onRewardUserClick;if(a&&n&&"organization"===n.userType)return null;var g=this.state,y=g.TipjarRender,w=g.modalShown,E=g.rewardModalShown,C=m.a.createElement(Be.a,{submitRewardText:function(t){return e.onSubmitReward(t)},onClose:this.unactivateReward,tagline:h,edit:!0});if(a&&d)return m.a.createElement("div",null,m.a.createElement(Qe,{activateReward:this.activateReward}),E&&C);if(p){var k=i&&i[c][o]||{},O=k.tradeNumber,j=k.users,N=k.notice,S=m.a.createElement(Ve,{modalShown:w,items:j,voteupCount:v,onLoad:this.onLoad,isRewardList:a,notice:N,onClose:this.handleListHide}),A=m.a.createElement($e,{rewardMemberCount:v,handleListShown:this.handleListShown,onUserClick:b,users:j,isAuthor:a});if(!a)return m.a.createElement("div",{className:"Reward"},m.a.createElement(Je,{tagline:h,onClick:this.handleRewardButtonClick}),A,E&&C,S,m.a.createElement(x.a,{getComponent:tt,author:s,tagline:h,isMobile:r,ua:l,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:O,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:y,type:c}));var T=(Number(f)||0)/100;return m.a.createElement("div",{className:"Reward"},m.a.createElement(Ue,{tagline:h,activateReward:this.activateReward,totalMoney:T,showRewarders:this.showRewarders}),E&&C,S,A)}return null}}]),t}(m.a.Component),Xe.propTypes={reward:h.a.object,isAuthor:h.a.bool,author:h.a.object,id:h.a.number,rewardInfo:h.a.object,currentUser:h.a.object,ua:h.a.object,type:h.a.string,isMobile:h.a.bool,onRewardButtonClick:h.a.func,onRewardUserClick:h.a.func,onRewardUserMoreClick:h.a.func},Xe.contextTypes={authRequired:h.a.func},Xe.defaultProps={rewardInfo:{},type:"answer"},Ze=et))||Ze,at=n(2063),rt=n(10),ot=function(e){return m.a.createElement(rt.a,e,m.a.createElement("path",{d:"M16.387 10.869l-3.188-4.27A1 1 0 1 1 14.8 5.401l4.92 6.59-4.883 7.491a1 1 0 1 1-1.676-1.092l3.6-5.522H7a3 3 0 0 1-3-3V7a1 1 0 1 1 2 0v2.869a1 1 0 0 0 1 1h9.387z"}))};ot.defaultProps={name:"Jump"};var it=ot;n(2189);var st=function(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var a=n.tail,r=a.url,o=a.message;return m.a.createElement("a",{className:v()("CommercialQuestionTail",t),href:r},o,m.a.createElement(it,{className:"CommercialQuestionTail-Icon",center:!0,text:!0}))},ct=n(2045),lt=n(2065);function ut(e){var t=e.markInfo,n=G.y[t.markType];if(!n)return null;var a=t.roundtable&&"https://www.zhihu.com/roundtable/".concat(t.roundtable.urlToken);return a?m.a.createElement("a",{href:a},n):m.a.createElement("span",null,n)}var dt,mt,pt,ht,ft,vt=n(2141),bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.contentExpanded,a=t.unescapable,r=e.labelInfo,o=e.hermesLabel;return m.a.createElement(d.Fragment,null,!n&&!a&&m.a.createElement(ct.b,{labelInfo:r||o}))},gt=n(2300),yt=n(2326),wt=n(2070),Et=n(2208),Ct=n.n(Et),kt=function(e){var t=e.answer,n=e.canCollapse,a=t.isNormal,r=void 0===a||a,o=t.collapsedBy,i=t.reviewInfo,s=(i=void 0===i?{}:i).isReviewing,c=i.tips,l=t.suggestEdit,u=(l=void 0===l?{}:l).title,d=l.unnormalDetails,p=(d=void 0===d?{}:d).reason,h=d.description,f=t.collapseReason;return s?m.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-status"},c):r?"community"===o?m.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-statusContent"},m.a.createElement("div",{className:"AnswerItem-statusReason"},"该回答已被折叠 ",m.a.createElement("span",null,m.a.createElement("a",{target:"_blank",href:"/question/20120168","data-tooltip":"点击了解更多",className:"AnswerItem-complaintHelp"},m.a.createElement(gt.a,{className:"AnswerItem-complaintIcon",width:16})))),f&&m.a.createElement("div",{className:"AnswerItem-statusDescription"},"折叠原因：",f)):"org"!==o||n?null:m.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-status"},"回答被提问机构移至隐藏区（",m.a.createElement("a",{href:"/org-intro#org-question",target:"_blank"},"为什么？"),"）"):m.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-statusContent"},m.a.createElement("div",{className:"AnswerItem-statusReason"},h,"：",p),m.a.createElement("div",{className:"AnswerItem-statusDescription"},"作者修改内容通过后，回答会重新显示恢复正常 ",m.a.createElement("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink"},u)))},Ot=function(e){var t=e.answer,n=e.canCollapse,a=t.collapsedBy,r=t.relevantInfo,o=(r=void 0===r?{}:r).relevantType;return Object(K.k)(t)||Object(K.l)(t)||"org"===a&&!n?m.a.createElement("div",{className:"AnswerItem-meta",key:"commercial"},"brand_special"===o&&m.a.createElement("div",{className:"AnswerItem-commercialBadge AnswerItem-commercialBadge-brand"},m.a.createElement(yt.a,{size:16}),m.a.createElement("b",null,"品牌特邀："),"本文由品牌邀请撰写"),"brand_best"===o&&m.a.createElement("span",{className:"AnswerItem-sticky","data-tooltip":"本回答由品牌设为精选","data-tooltip-position":"bottom"},"品牌精选")):null},jt=function(e){var t=e.answer,n=t.annotationDetail,a=t.reviewInfo,r=(a=void 0===a?{}:a).isReviewing,o=t.isNormal,i=void 0===o||o,s=t.collapsedBy;return!r&&i&&"community"!==s&&n?m.a.createElement(wt.a,{key:"annotation",annotationDetail:n}):null},Nt=function(e){var t=e.answer;return Object(K.l)(t)?m.a.createElement("div",{className:"AnswerItem-commercialBadge",key:"positive"},m.a.createElement(Ct.a,{style:{marginRight:"6px",verticalAlign:"text-bottom"},size:16}),m.a.createElement("b",null,"亲自答："),"此回答由问题相关方亲自撰写"):null},St=n(2148),At=(n(2136),function(e){return"plain"===e||"special-plain"===e}),Tt=At,Rt={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},It=["zhi-hu-ri-bao-51-41"],xt=(dt=Object(me.a)(function(e){var t=e.answer,n=e.trackCardShow,a=void 0===n||n,r=e.zaInfos,o=void 0===r?{}:r;return Object.assign({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},o.index&&{index:o.index},{},o.cardShow&&{view:{id:o.cardShow}},{trackCardShow:a})}),mt=Object(b.connect)(function(e,t){var n=e.entities,a=n.drafts,r=void 0===a?{}:a,o=n.questions,i=n.answers,s=e.question.draftStatus,c=e.reward,l=e.switches,u=e.video.shareVideoDetail,d=t.answer,m=t.relatedTo,p=t.location,h=p.pathname,f=p.query,v=null;Object(re.i)(e).Wechat&&(v=f.hb_wx_block);var b=h.split("/"),g=!1;!b[1]||"org"!==b[1]&&"people"!==b[1]||(g=b[2]&&-1!==It.indexOf(b[2]));var y=i[d.id]?Object.assign({},i[d.id]):d;o[y.question.id]&&(y.question=Object.assign({},d.question,{},o[y.question.id]));var w=Object(ie.c)(e),E=["question","answer"].includes(m),C=Object(re.c)(e)&&E;return{draft:d&&r["question_".concat(d.question.id)],draftStatus:s[d.question.id],answer:y,ua:Object(re.i)(e),reward:c,switches:l,isHuman:C,shouldOia:Object(re.f)(e)&&!g,shouldSpecialOia:Object(re.g)(e)&&!g,canOia:Object(re.d)(e),isWechat:e.env.userAgent.Wechat,concernedUpvoters:Object(K.e)(e,{id:d.id}),currentUser:w,shareVideoDetail:u,isBrandAnswer:Object(K.j)(d),permission:Object(Y.Q)(e),wxBlock:v,ecommerce:Object(W.c)(e,{type:"answer",urlToken:String(d.id)})}},{updateAnswerUnhelpful:K.I,updateAnswerReshipmentSettings:K.E,updateAnswerCommentPermission:K.D,updateAnswerCollapsed:K.C,updateAnswerStick:K.G,deleteAnswer:K.g,restoreAnswer:K.y,updateAnswer:K.B,loadAnswerForSettings:K.r,showNotification:ne.h,addAnnotation:function(e,t,n,a){return{API:{types:ee.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(Z.getFormData)(Object(J.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:a}))},UPDATE:{success:function(n){var a=te(e);return a?Object($.a)({},a,Object($.a)({},t,n)):null}}}},cancelAnnotation:function(e,t,n,a){return{API:{types:ee.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(Z.getFormData)(Object(J.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:a}))},UPDATE:{success:function(n){var a=te(e);return a?Object($.a)({},a,Object($.a)({},t,Object.assign({},n,{annotationDetail:null}))):null}}}},addRewardTagline:ae.a,updateAnswerReward:K.F,getVoteDownReason:K.i,selectVoteDownReason:K.A,loadAnswerConcernedVoters:K.o,fillCurrentUserIfNeeded:ie.e,loadVideoDetails:oe.d,readContentRightsNotification:se.O,postToolsRecommend:se.N,checkEcommerce:W.a}),dt(pt=Object(g.withRouter)(pt=mt(pt=Object(ct.d)((ft=ht=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:n.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:n.props.expanded,hasFetchedLabels:!1,showWechatExpand:!1},n.answerFormRef=m.a.createRef(),n.rewardContainerRef=m.a.createRef(),n.onCloseReward=function(){var e=n.props.answer.id;I.a.set("isRewardable",!1),n.props.updateAnswerReward(e,"")},n.openModal=function(e,t){n.setState(Object.assign({},t))},n.openDeleteModal=function(){setTimeout(function(){n.setState({deleteModalShown:!0})})},n.closeModal=function(){n.setState({commentsShown:!1});var e=n.props.onCloseComment;"function"==typeof e&&e()},n.closeDeleteModal=function(){n.setState({deleteModalShown:!1})},n.disableAuth=function(){var e=n.props.router,t=(e=void 0===e?{}:e).location;(t=void 0===t?{}:t).pathname;return!1}(),n.loadAnswerConcernedVoters=function(){var e=n.props,t=e.concernedUpvoters,a=e.answer,r=e.loadAnswerConcernedVoters;!t&&n.context.currentUser&&r(a.id)},n.handleExpand=function(e){var t=n.props.onToggleExpand;e&&n.loadAnswerConcernedVoters(),t&&t(e),n.setState({contentExpanded:e})},n.handleUpdateUnhelpful=n.context.authRequired(function(){var e=n.props,t=e.answer,a=t.id,r=t.relationship.isNothelp,o=e.updateAnswerUnhelpful,i=!r;j.default.trackEvent(n.contentItem,{action:i?"NoHelp":"UnNoHelp",element:"Button"}),o(a,i)},G.N.unhelpful),n.handleReshipmentSettings=function(e){var t=n.props,a=t.answer.id,r=t.updateAnswerReshipmentSettings,o=t.fillCurrentUserIfNeeded;"need_payment"===e?Promise.resolve(o(["caEnabled"])).then(function(){n.props.currentUser.caEnabled?r(a,e):window.open("/copyright/invite")}):r(a,e)},n.handleLoadAnswerForSettings=function(){var e=n.props,t=e.answer.id;(0,e.loadAnswerForSettings)(t)},n.handleDeleteAnswer=function(){var e=n.props,t=e.answer.id;(0,e.deleteAnswer)(t)},n.handlePositionStatusChange=function(e){n.setState({positionStatus:e})},n.handleCollapseModalShow=function(){n.setState({collapseModalShown:!0})},n.handleCollapseModalHide=function(){n.setState({collapseModalShown:!1})},n.handleUpdateAnswerCollapsed=function(){var e=n.props,t=e.answer,a=t.id,r=t.collapsedBy,o=e.updateAnswerCollapsed,i=e.showNotification;return"community"===r?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):o(a)},n.handleUpdateAnswerStick=function(){var e=n.props,t=e.answer.id;return(0,e.updateAnswerStick)(t)},n.handleRestoreAnswer=function(){var e=n.props,t=e.answer,a=t.id,r=t.question;(0,e.restoreAnswer)(r.id,a)},n.handleStartEditAnswer=function(){var e=n.props,t=e.draftStatus,a=e.hasPublishingDraft;t&&t.loading?T.a.alert("草稿正在加载中……"):a?T.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。"):n.setState({editing:!0},function(){n.answerFormRef.current.focus()})},n.handleCancelEditAnswer=function(){n.setState({editing:!1});var e=n.props,t=e.onCloseEditing,a=e.onCloseComment;"function"==typeof a&&a(),"function"==typeof t&&t()},n.handleSubmitAnswer=function(e){var t=n.props,a=t.answer.id,r=t.updateAnswer;return n.handleCancelEditAnswer(),r(a,e).then(function(e){return j.default.trackEvent(n.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),e})},n.handleReportOpen=function(){var e=n.props.zaInfos.report;j.default.trackEvent(n.contentItem,Object.assign({action:"Report",element:"Button",is_intent:!0},e&&{id:e})),n.context.authRequired(function(){return n.setState({reportModalShown:!0})},G.N.report)()},n.handleReportHide=function(){n.setState({reportModalShown:!1})},n.handleFavlistsShown=function(e){var t=n.props,a=t.shouldOia,r=t.zaInfos.favlists;j.default.trackEvent(n.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},r&&{id:r})),a?n.createOpenInAppHandler("collect_answer")(e):n.disableAuth?n.handleToggleGuide():n.context.authRequired(function(){return n.setState({favlistsShown:!0})},G.N.favlists)()},n.handleFavlistHide=function(){n.setState({favlistsShown:!1})},n.handleLogMoreClick=function(){var e=n.props.zaInfos.options;j.default.trackEvent(n.contentItem,Object.assign({action:"Click",element_name:"MoreAction"},e&&{id:e}))},n.handleShowAddAnnotationModal=function(){return n.setState({addAnnotationModalShown:!0})},n.handleCloseAddAnnotationModal=function(){return n.setState({addAnnotationModalShown:!1})},n.handleShowCancelAnnotationModal=function(){return n.setState({cancelAnnotationModalShown:!0})},n.handleCloseCancelAnnotationModal=function(){return n.setState({cancelAnnotationModalShown:!1})},n.handleToggleGuide=function(){n.setState({guideShown:!n.state.guideShown})},n.handleClickVideoMoreButton=function(){n.setState({shouldShowVideoDetails:!1})},n.startEditing=function(){var e=n.props,t=e.answer.relationship,a=(t=void 0===t?{}:t).isAuthor,r=e.editable;n.context.currentUser&&a&&r&&n.handleStartEditAnswer()},n.addRewardTagline=function(e){var t=n.props.answer.id;Object(ae.a)(e,t)},n.createOpenInAppHandler=function(e){var t=n.props,a=t.answer,r=a.type,o=a.id,i=t.wxBlock;return function(t){t&&t.preventDefault(),"1"===i&&j.default.trackEvent(Object(l.a)(n),{id:5550,action:"Click"},{button:{text:"openapp"}}),Object(H.b)(Object(le.a)({type:r,id:o}),Object.assign({utm_content:e},"1"===i&&{yyb_ckey:"CK1430255776739"}))}},n.renderLabels=function(){var e=n.props,t=e.useNewLabels,a=e.answer,r=e.canCollapse,o=e.relatedTo,i=n.state.contentExpanded,s=kt({answer:a,canCollapse:r}),c=jt({answer:a}),l=Ot({answer:a,canCollapse:r}),u=Nt({answer:a});if(t){if(s)return{labels:[s],editingLabels:[]};var d=[m.a.createElement(ct.a,{key:"labels",item:a,commercialLabels:l,annotationLabels:c})];return i||o?{labels:d,editingLabels:d}:{labels:[],editingLabels:d}}var p=[c,l,u];return{labels:[s].concat(p),editingLabels:p}},n.renderPrefix=function(){var e=n.props,t=e.answer,a=e.relatedTo,r={contentExpanded:n.state.contentExpanded,unescapable:Boolean(a)};return bt(t,r)},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,a=t.byComment,r=t.editing,o=t.loadVideoDetails,i=t.answer,s=i.id,c=i.content,l=t.ecommerce,u=t.checkEcommerce,d=this.state.shareVideoQuery;d&&o(d).then(function(){e.setState({shouldShowVideoDetails:!0})}),n&&this.loadAnswerConcernedVoters(),a&&setTimeout(function(){return e.setState({commentsShown:Boolean(a)})}),r&&this.startEditing(),l||u({content:c,type:"answer",urlToken:String(s)})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,a=n.reshipmentSettings,r=n.commentPermission,o=e.answer,i=o.reshipmentSettings,s=o.commentPermission,c=e.editing;!a&&i&&!r&&s&&setTimeout(function(){return t.settingsTogglerEl.click()}),c&&!this.props.editing&&this.startEditing()}},{key:"getShareVideoId",value:function(){this.props.location;return null}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(Rt).map(function(n){var a=Object(ue.a)(n,e);return m.a.createElement(A.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(ue.b)(n,e)},a&&m.a.createElement(S.a,{className:"Button-icon",name:a}),Rt[n])})}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=t.id,a=t.type,r=t.voteupCount,o=t.markInfos,i=t.isNormal,s=void 0===i||i,c=e.actor,l=e.action,u=(e.isHuman,e.concernedUpvoters),p=e.useNewLabels,h=o&&o.length>0&&!p;if(!h&&!r)return null;var f=c&&c.urlToken,v=h&&o.filter(function(e){return G.y[e.markType]}).map(function(e,t){return m.a.createElement(d.Fragment,{key:t},0!==t&&"、",m.a.createElement(ut,{markInfo:e}))});return s&&m.a.createElement("div",{className:"AnswerItem-extraInfo",key:"answerExtraInfo"},h&&v.length&&m.a.createElement(y.CJKSpace,null,"收录于",v),h&&Boolean(r)&&" · ",m.a.createElement(xe.a,{id:n,type:a,voteupCount:r,upvotedFollowees:(u||[]).filter(function(e){return f!==e.urlToken}),too:"voted"===l}))}},{key:"renderSettings",value:function(){var e=this,t=this.context.currentUser,n=this.props,a=n.answer,r=a.collapsedBy,o=a.relationship,i=(o=void 0===o?{}:o).isAuthor,s=a.reshipmentSettings,c=a.commentPermission,l=a.question.questionType,u=a.rewardInfo,d=(u=void 0===u?{}:u).isRewardable,p=void 0!==d&&d,h=a.relevantInfo,f=n.answer,v=n.canCollapse;return t&&i?s&&c?m.a.createElement(A.c,{key:"settings",toggler:m.a.createElement(N.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:w.a,label:"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(s),m.a.createElement(A.a,null),m.a.createElement(de.c,{target:f,onChange:this.props.updateAnswerCommentPermission,current:f.commentPermission}),m.a.createElement(A.a,null),p&&m.a.createElement(A.b,{onClick:this.onCloseReward},"关闭赞赏"),m.a.createElement(A.b,{onClick:this.openDeleteModal},"删除"),"commercial"===l&&v&&"nobody"===r&&(!h||"brand_special"!==h.relevantType)&&[m.a.createElement(A.a,{key:"MenuDivider"}),m.a.createElement(A.b,{key:"MenuItem",onClick:this.handleUpdateAnswerCollapsed},"隐藏")]):m.a.createElement(N.c,{key:"settings",preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:w.a,label:"设置"}):null}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?m.a.createElement(A.b,{onClick:function(){j.default.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer=".concat(e),target:"_blank"},"申请授权"):"disallowed"===t?m.a.createElement(A.b,{tag:"a",target:"_blank",href:"/terms#sec-licence-6"},"禁止转载"):null}},{key:"renderOptions",value:function(){var e=this;if(!this.context.currentUser)return null;var t=this.props,n=t.answer,a=t.canCollapse,r=t.renderExtraOptions,o=t.permission.canBrandAdminEdit,i=n.id,s=n.reshipmentSettings,c=n.relationship,l=(c=void 0===c?{}:c).isAuthor,u=c.isNothelp,d=n.collapsedBy,p=n.question.questionType,h=n.annotationAction,f=void 0===h?[]:h,v=n.annotationDetail,b={toggler:m.a.createElement(N.c,{preset:"plain",className:"OptionsButton",icon:E.a,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},g="commercial"===p,y="nobody"!==d;return l?null:m.a.createElement(A.c,Object.assign({},b,{key:"options"}),!1,a&&!g&&m.a.createElement(A.b,{onClick:y?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow},y?"取消隐藏":"隐藏"),o&&g&&!y&&m.a.createElement(A.b,{onClick:this.handleUpdateAnswerCollapsed},"隐藏"),f&&f.some(function(e){return G.a.add===e})&&!v&&m.a.createElement(A.b,{onClick:this.handleShowAddAnnotationModal},"标记内容"),f&&f.some(function(e){return G.a.cancel===e})&&v&&m.a.createElement(A.b,{onClick:this.handleShowCancelAnnotationModal},"撤销标记"),m.a.createElement(A.b,{onClick:this.handleUpdateUnhelpful},u?"撤销没有帮助":"没有帮助"),m.a.createElement(A.b,{onClick:this.handleReportOpen},"举报"),this.renderReshipment(i,s),r&&r({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=function(e){var t=e.thumbnail,n=e.voteupCount,a=e.question.id,r=e.id,o=e.createdTime,i=e.updatedTime,s=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/".concat(a,"/answer/").concat(r),dateCreated:new Date(1e3*o).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:s}}(this.props.answer);return Object.keys(e).map(function(t){return m.a.createElement("meta",{key:t,itemProp:t,content:e[t]})})}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize,a=(n=void 0===n?{}:n).winnersAnswerTokens,r=n.prizes;if(!n.status)return null;var o=["一","二","三"],i=null;return r&&a&&a.forEach(function(e,n){e.includes(t)&&null===i&&(i=r&&r[1]&&r[1].name?"得".concat(o[n],"等奖"):"奖")}),i&&m.a.createElement("div",{className:"AnswerItem-brandQuestionPrizeTip"},"该回答在有奖问答中获",i)}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,a=t.expanded,r=t.isBrandAnswer,o=n.question;return(a||e)&&(o&&"commercial"===o.questionType||r)?m.a.createElement(Ae.a,{type:n.type,id:n.id}):null}},{key:"renderEditTime",value:function(){var e=this.props,t=e.shouldOia,n=e.answer,a=n.id,r=n.createdTime,o=n.updatedTime,i=n.question.id,s="/question/".concat(i,"/answer/").concat(a);return m.a.createElement(ze.a,Object.assign({created:r,updated:o,href:s},t&&{onClick:this.createOpenInAppHandler("click_answer")}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.answer,o=t.reward,i=t.answer,s=i.id,c=i.isNormal,l=void 0===c||c,u=i.isDelete,d=i.question,p=i.rewardInfo,h=i.question,f=h.title,b=h.id,y=h.questionType,w=h.isMuted,E=h.commercial,j=i.author,A=i.excerpt,R=i.content,I=i.editableContent,x=i.commentCount,P=i.adminClosedComment,M=i.relationship,L=(M=void 0===M?{}:M).isAuthor,D=M.isRecognized,q=i.collapsedBy,_=i.isSticky,B=i.thumbnail,Q=i.thumbnailExtraInfo,U=i.reviewInfo,F=(U=void 0===U?{}:U).isReviewing,H=U.editType,W=i.relevantInfo,K=(W=void 0===W?{}:W).relevantType,Y=i.annotationDetail,$=i.paidInfo,J=void 0===$?{}:$,Z=i.creatorRightsNotification,X=t.relatedTo,ee=t.editable,te=t.byComment,ne=t.draft,ae=t.expanded,re=t.lastreadTouchable,oe=t.preset,ie=t.canCollapse,se=t.canStick,le=t.itemProp,ue=void 0===le?"answer":le,de=t.addAnnotation,me=t.cancelAnnotation,pe=t.showNotification,fe=t.dataZaIndex,ve=t.blockReading,be=(t.isWechat,t.lessExcerpt),ge=(t.isHuman,t.ua),ye=t.shouldSpecialOia,we=t.shareVideoDetail,Ee=t.shouldOia,Ce=t.formatContent,ke=t.zaInfos,Oe=ke.expand,je=ke.title,Ae=ke.voteUp,xe=ke.thank,Be=ke.voteDown,Qe=ke.toggleComment,Ue=ke.share,Fe=ke.getCommentAction,Ve=t.handleToggleSticky,He=t.renderActionButtons,We=t.permission.canBrandAdminEdit,Ge=t.readContentRightsNotification,Ke=t.wxBlock,Ye=t.ecommerce,$e="function"==typeof Ve,Je=this.context.currentUser,Ze="/question/".concat(b,"/answer/").concat(s),Xe=this.state,et=Xe.reportModalShown,tt=Xe.deleteModalShown,rt=Xe.collapseModalShown,ot=Xe.favlistsShown,it=Xe.editing,ct=Xe.commentsShown,ut=Xe.commentsAutoFocus,dt=Xe.commentPattern,mt=Xe.addAnnotationModalShown,pt=Xe.cancelAnnotationModalShown,ht=Xe.positionStatus,ft=Xe.shareVideoQuery,bt=Xe.shouldShowVideoDetails,gt=Xe.contentExpanded,yt=Xe.showWechatExpand,wt=ft&&bt?{title:we.title,thumbnail:we.coverUrl,isLens:!0,id:ft,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(ft)}:null;if(u)return m.a.createElement("div",{className:"AnswerItem-deleted"},"你已经删除了该问题的回答，如果需要修改，请先  ",m.a.createElement("a",{onClick:this.handleRestoreAnswer},"撤销删除"));var Et=!(F&&"create"===H),Ct="commercial"===y,kt="nobody"!==q,Ot=!function(e){return"special-plain"===e}(oe)&&m.a.createElement(qe.a,{className:v()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":X}),key:"authorInfo",preset:Tt(oe)?"plain":"default",author:j,relatedTo:X}),jt=this.renderAnswerExtraInfo(),Nt=this.renderLabels(),Rt=Nt.labels,It=Nt.editingLabels;if(it)return m.a.createElement("div",null,Ot,It,jt,m.a.createElement(De.a,{className:"AnswerItem-form",bordered:!0,isReediting:!0,imperativeRef:this.answerFormRef,question:d,answer:n,defaultValue:I,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:p.isRewardable,addRewardTagline:this.addRewardTagline}));var xt=At(oe)?[[Ot].concat(Object(a.a)(Rt)),jt]:[[Ot].concat(Object(a.a)(Rt),[jt]),null],Pt=Object(r.a)(xt,2),Mt=Pt[0],Lt=Pt[1],Dt="mainEntityOfPage"===ue||"acceptedAnswer"===ue,qt=ye&&!Dt||"1"===Ke,_t=!wt&&this.renderEditTime(),zt=J.content,Bt=this.isPaidAnswer?zt:R;return m.a.createElement(Re.e,{onRef:function(t){return e.contentItem=t},className:"AnswerItem","data-za-index":fe,"data-zop":JSON.stringify({authorName:j.name,itemId:s,title:f,type:"answer"}),data:n,link:Ze,meta:Mt,title:!X&&m.a.createElement("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0},m.a.createElement("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(b)}),m.a.createElement("meta",{itemProp:"name",content:f}),$e&&this.props.isSticky&&m.a.createElement(lt.a,null),m.a.createElement(g.Link,Object.assign({to:Ze,target:"_blank","data-za-detail-view-element_name":"Title"},je&&{"data-za-detail-view-id":je}),f)),lastreadTouchable:re,name:s,itemProp:ue,itemType:"http://schema.org/Answer",itemScope:!0},m.a.createElement(vt.b,{answer:n}),this.renderMeta(),Ct&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),l||L?m.a.createElement(ze.b,Object.assign({ref:function(t){return e.richContent=t},onToggleExpend:this.handleExpand},qt&&{expandText:"App 内查看"},"1"===Ke&&Dt&&{expandText:m.a.createElement("div",{className:"RichContent-wechatExpand"},m.a.createElement("div",{onClick:function(t){e.setState({showWechatExpand:!0}),t.stopPropagation()}},m.a.createElement(C.a,null)),m.a.createElement(N.c,{preset:"primary",color:"blue",onClick:this.createOpenInAppHandler("expand_answer1")},"打开知乎阅读")),needExpandArrow:!1},{wxBlock:Ke},!1,{cover:B,hasVideo:Boolean(Q&&"video"===Q.type),videoData:wt,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean(X),expanded:ae,onPositionStatusChange:this.handlePositionStatusChange,before:Lt,excerpt:Ce?Ce(A,n):A,html:Ce?Ce(Bt||A,n):Bt||A,prefix:this.renderPrefix(),ecommerce:Ye,after:m.a.createElement("div",null,m.a.createElement(vt.a,{answer:n}),m.a.createElement(st,{className:"AnswerItem-CommercialQuestionTail",commercial:E}),_t,Je&&L&&ee&&m.a.createElement("a",{className:"AnswerItem-editButton",onClick:this.handleStartEditAnswer},m.a.createElement(S.a,{left:!0,name:"modify"}),m.a.createElement("span",{className:"AnswerItem-editButtonText"},"修改",ne&&ne.editableContent&&"（有未发布的编辑草稿）")),Je&&m.a.createElement(nt,{imperativeRef:this.rewardContainerRef,reward:o,currentUser:Je,rewardInfo:p,isAuthor:L,id:s,author:j,ua:ge})),data:n,onClick:qt?this.createOpenInAppHandler("expand_answer".concat(Ke)):this.disableAuth&&ve&&this.handleToggleGuide},be?{limit:74}:{},{zaIds:{expand:Oe}}),Et&&We&&Ct&&kt&&m.a.createElement(N.c,{className:v()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===q}),onClick:this.handleUpdateAnswerCollapsed},"公开回答"),Et&&se&&!kt&&"brand_special"!==K&&m.a.createElement(N.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick},_?"取消精选":"设为精选"),He({componentList:[{name:"vote",component:Et&&m.a.createElement(_e.a,Object.assign({key:"vote",answer:n,disabled:Ct&&w},Ee&&{onClick:this.createOpenInAppHandler("vote_answer")},{disableAuth:this.disableAuth,isRecognized:D,handleToggleGuide:this.handleToggleGuide,positionStatus:ht,zaIds:{voteUp:Ae,voteDown:Be}}))},{name:"comment",component:Et&&m.a.createElement(Pe.a,Object.assign({onInstance:function(t){return e.commentButton=t},key:"comment",onClick:this.openModal},!1,{commentsShown:ct,commentClosed:P,count:x,positionStatus:ht,zaInfos:{toggleComment:Qe,getCommentAction:Fe}}))},{name:"share",component:Et&&m.a.createElement(Ie.a,{key:"share",id:s,type:"answer",title:f,authorName:j&&j.name,href:Ze,positionStatus:ht,zaShareId:Ue})},{name:"favlist",component:Et&&(!Je||!Je.isOrg)&&m.a.createElement(Se.a,{key:"favlist",onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:"收藏"})},{name:"thank",component:Et&&!L&&m.a.createElement(St.a,{key:"thank",zaInfo:xe,answer:n})},{name:"sticky",component:$e&&L&&Object(ce.a)(Je)&&m.a.createElement(N.c,{key:"sticky",preset:"plain",onClick:Ve,icon:this.props.isSticky?k.a:O.a,label:this.props.isSticky?"取消置顶":"置顶"})},{name:"options",component:Et&&this.renderOptions()},{name:"settings",component:this.renderSettings()},{name:"annotation",component:!gt&&m.a.createElement(Te.a,{key:"annotation",annotationDetail:Y})}]})):_t,m.a.createElement(Me.a,{shown:ct,parent:n,byComment:te,commentPattern:dt,autoFocus:ut,onClose:this.closeModal}),m.a.createElement(Le.a,{type:"answer",urlToken:s,shown:et,onClose:this.handleReportHide,zaEnabled:!0}),m.a.createElement(z,{addAnnotation:de,onClose:this.handleCloseAddAnnotationModal,shown:mt,type:G.b,urlToken:s,showNotification:pe}),m.a.createElement(V,{cancelAnnotation:me,onClose:this.handleCloseCancelAnnotationModal,shown:pt,type:G.b,urlToken:s,showNotification:pe}),Je&&L&&m.a.createElement(at.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:tt,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),ie&&m.a.createElement(at.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:rt,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),m.a.createElement(he.a,{id:s,type:"answer",shown:ot,onClose:this.handleFavlistHide,zaEnabled:!0}),!1,m.a.createElement(Ne,{notification:Z,onRead:function(e){Ge("answer",s,e)},onUseAdmire:function(){e.rewardContainerRef.current.activateReward()},onUseRecommend:function(){var t=e.props.postToolsRecommend;T.a.confirm(m.a.createElement("div",{style:{textAlign:"center"}},"该推荐将使用本月的 1 次推荐次数。"),{title:"确定是否推荐？"}).then(function(){return t("answer",s)},function(){})}}),m.a.createElement(at.a,{title:"是否打开知乎 App 阅读全文",shown:yt,onCancel:function(){e.setState({showWechatExpand:!1},function(){e.richContent.getWrappedInstance().handleExpand()})},onSubmit:function(){e.setState({showWechatExpand:!1}),e.createOpenInAppHandler("expand_answer1")()},needCancel:!1,isMobile:!0}))}},{key:"isPaidAnswer",get:function(){return"paid"===this.props.answer.answerType}}]),t}(d.PureComponent),ht.contextTypes=Object.assign({currentUser:h.a.object,authRequired:h.a.func},!1),ht.propTypes={relatedTo:h.a.oneOf(["question","answer"]),editable:h.a.bool,preset:h.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:h.a.bool,shareVideoDetail:h.a.object,formatContent:h.a.func,renderExtraOptions:h.a.func,zaInfos:pe.a,onToggleExpand:h.a.func,useNewLabels:h.a.bool.isRequired,renderActionButtons:h.a.func},ht.defaultProps={editable:!1,preset:"primary",zaInfos:{},renderActionButtons:St.b},pt=ft))||pt)||pt)||pt)||pt);n.d(t,"a",function(){return xt})},2090:function(e,t,n){},2091:function(e,t,n){"use strict";var a=n(2),r=n(0),o=n.n(r),i=n(8),s=n.n(i),c=n(2326),l=n(2064),u=n(133),d=(n(2190),{alpha:1,group:"GYL02A"}),m={alpha:.08,group:"GYL02A"},p={brand_special:c.a},h=Object.assign({},l.b,{COMMERCIAL_ICONS:p});t.a=Object(u.a)(null)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,r=void 0===n?{}:n,i=e.className;if(!t)return null;var c=t.type,l=t.text,u=t.foregroundColor,p=t.backgroundColor,f=r.customIcon,v=r.customIconClassName,b=function(e){return"GBL07A"===(e||d).group?"commercial":"positive"}(u),g=function(e){return"GBL07A"===(e||m).group?"commercial":"positive"}(p),y=f||h[function(e){return"recognition"===e?"professional":e}(c)];return y?o.a.createElement("span",{className:s()("Label-icon","Label-iconColor--".concat(b),Object(a.a)({},"Label-iconColor--".concat(g,"Background"),p),i)},o.a.createElement(y,{center:!0,className:s()("Label-iconImg",v)}),l):null})},2093:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(57),p=n.n(m),h=n(26),f=n(28),v=n(15),b=n(531),g=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handleViewed=function(){var e=n.props.extra;setTimeout(function(){v.default.trackCardShow(Object(h.a)(n),{},e)})},n.trackEvent=function(e,t,a){v.default.trackEvent(e,t,Object.assign({},n.props.extra,{},a))},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setModule()}},{key:"componentDidUpdate",value:function(){this.setModule()}},{key:"setModule",value:function(){var e=this.props,t=e.module,n=e.index,a=e.isAd,r=e.moduleName,o=e.content,i=e.list,s=e.card,c=e.attachedInfoBytes;if(t){var l=Object(f.findDOMNode)(this);l&&v.default.setModule(l,{module:t,index:n,is_ad:a,module_name:r},function(e,t,n,a){return e?{card:{content:e}}:Object.assign({},t&&{card:t},{},n&&{list:n},{},a&&{attached_info_bytes:a})}(o,s,i,c))}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.trackCardShow,a=e.children,r="string"==typeof a.type?a:Object(u.cloneElement)(a,{trackEvent:this.trackEvent});return n?d.a.createElement(b.a,{id:t,onViewed:this.handleViewed},r):r}}]),t}(u.Component);g.propTypes={id:l.a.string,module:l.a.string,index:l.a.string,isAd:l.a.bool,content:l.a.object,extra:l.a.object,trackCardShow:l.a.bool,attachedInfoBytes:l.a.string},g.defaultProps={id:null,module:null,index:null,isAd:!1,content:null,extra:null,attachedInfoBytes:null,trackCardShow:!1};var y=g,w=n(181),E=n(102);n(2117);n.d(t,"a",function(){return O});var C={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},k={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},O=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).jumpToOAuthUrl=function(e){var t=n.props.redirectUrl,a=void 0===t?location.href:t,r=Object(E.c)(a),o=r.utm_source,i=r.utm_medium,s=p()(navigator.userAgent).isZhihu;location.href="zhihu"!==e?"https://www.zhihu.com/oauth/redirect/login/".concat(k[e],"?next=/oauth/account_callback&from=").concat(encodeURIComponent(a),"&utm_source=").concat(o,"&ref_source=").concat(i):s?"zhihu://signin?next=".concat(a):"https://www.zhihu.com/signin?next=".concat(a).concat(o?"?utm_source=".concat(o):"")},n.renderSignButtons=function(){var e=n.props.buttons;return"string"==typeof e?n.renderSingleSignButton({name:e}):e.map(function(e){return"string"==typeof e?n.renderSingleSignButton({name:e}):"object"==typeof e?n.renderSingleSignButton(e):null})},n.renderSingleSignButton=function(e){var t=e.name,a=e.text,r=e.fill,o=e.color,i="#fff"===r||"#ffffff"===r;return-1===Object.keys(C).indexOf(t)?null:d.a.createElement("button",{className:"SignInModal-button-".concat(t),key:t,style:{backgroundColor:r,borderColor:i?"#0f88eb":r,color:i?"#0f88eb":o},onClick:function(){n.jumpToOAuthUrl(t)}},a||C[t])},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.urlScheme,a=this.props.title||"".concat(n?"打开 App 或":"","登录后继续操作");return d.a.createElement(w.b,{size:"small",className:"SignInModal",title:a,onClose:t},d.a.createElement(y,{module:"SignForm",moduleName:a,trackCardShow:!0},d.a.createElement("div",{className:"SignInModal-content"},n&&d.a.createElement(E.a,{className:"SignInModal-openInAppButton",href:n},"立即打开 App"),this.renderSignButtons())))}}]),t}(u.Component);O.propTypes={onClose:l.a.func.isRequired,urlScheme:l.a.string,redirectUrl:l.a.string,buttons:l.a.oneOfType([l.a.array,l.a.string])},O.defaultProps={buttons:["zhihu"]}},2094:function(e,t,n){},2095:function(e,t,n){"use strict";function a(e,t){return e===t?"check":null}function r(e,t){return e===t?"is-selected":null}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},2096:function(e,t,n){var a=n(2123)();e.exports=a},2097:function(e,t,n){var a=n(2169),r=n(2062),o=n(2170);e.exports=function(e){return r(e)?o(e):a(e)}},2098:function(e,t,n){},2099:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(0),l=n.n(c),u=n(1),d=n.n(u),m=n(8),p=n.n(m),h=n(181),f=n(100),v=n(16),b=n(19);n(2178);var g=function(e){function t(e){var n;Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).onChangeInputType=function(e){n.setState({checked:e.target.checked})},n.onChangeInputValue=function(e){n.setState({text:e.target.value})},n.submit=function(){var e=n.state.text;n.props.submitRewardText(e)};var r,s=e.tagline;return n.state={text:(r=s,r.replace(/^「/,"").replace(/」$/,"")||"予人玫瑰，手有余香"),checked:!0},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.edit,a=this.state,r=a.text,o=a.checked;return l.a.createElement(h.b,{onClose:t,className:"RewardForm-rewardModal"},l.a.createElement("p",{className:"RewardForm-rewardTitle"},n?"编辑赞赏描述":"开启赞赏"),l.a.createElement(f.a,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:r,onChange:this.onChangeInputValue}),l.a.createElement("div",{className:"RewardForm-remark"},!n&&l.a.createElement("div",{className:"RewardForm-Protocol"},l.a.createElement("input",{className:"RewardForm-rewardCheckbox",type:"checkbox",onChange:this.onChangeInputType,checked:o}),l.a.createElement("p",null,"我已同意",l.a.createElement("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar"},"《知乎赞赏功能使用协议》"))),l.a.createElement("p",{className:"RewardForm-prompting"},"还可以输入".concat(20-r.length,"个字"))),l.a.createElement(v.c,{className:p()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!o}),onClick:this.submit,disabled:!o},"确定"))}}]),t}(c.Component);g.propTypes={onClose:d.a.func,submitRewardText:d.a.func,edit:d.a.bool,tagline:d.a.string},g.defaultProps={tagline:b.j}},2100:function(e,t,n){"use strict";var a=n(22),r=n(0),o=n.n(r),i=n(8),s=n.n(i),c=n(16),l=n(38),u=(n(2278),function(e){var t=e.onClick,n=e.text,r=e.className,i=Object(a.a)(e,["onClick","text","className"]);return o.a.createElement(c.c,Object.assign({preset:"link",onClick:t,className:s()("ModifyButton",r)},i),o.a.createElement(l.a,{name:"modify",width:12,className:"ModifyButton-icon"}),n)});u.defaultProps={text:"修改"},t.a=u},2104:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(8),p=n.n(m),h=n(184),f=n(83),v=!1,b="pointer";function g(){b="pointer"}function y(){b="wheel"}var w=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).currentDirection=null,n.lastEmitDirection=null,n.startPosition=0,n.previousPosition=0,n.handleScroll=function(){var e=window.pageYOffset;if(!(e<0)){var t=e<n.previousPosition?"up":"down";t!==n.currentDirection&&(n.currentDirection=t,n.startPosition=n.previousPosition),n.previousPosition=e;var a=n.props,r=a.threshold,o=a.emitOnce,i=a.onScrollUp,s=a.onScrollDown;Math.abs(n.startPosition-e)>=r&&("wheel"!==b||o&&n.lastEmitDirection===t||("up"===t&&i&&i(),"down"===t&&s&&s()),n.lastEmitDirection=t,n.startPosition=e)}},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){v||(window.addEventListener("click",g),window.addEventListener("wheel",y,{passive:!0}),window.addEventListener("mousewheel",y,{passive:!0}),window.addEventListener("touchmove",y,{passive:!0}),v=!0);var e=this.props,t=e.throttleRate,n=e.useRAF,a=window.pageYOffset;this.startPosition=a,this.previousPosition=a,this.subscription=Object(f.subscribe)("scroll",this.handleScroll,{throttleRate:t,useRAF:n})}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"render",value:function(){return this.props.children||null}}]),t}(u.Component);w.propTypes={throttleRate:l.a.number,useRAF:l.a.bool,emitOnce:l.a.bool,threshold:l.a.number,onScrollUp:l.a.func,onScrollDown:l.a.func},w.defaultProps={threshold:100,useRAF:!0,emitOnce:!0};var E=w,C=n(388),k=n(152),O=n(19),j=(n(2094),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={enabled:!1,shown:!1},n.handleScrollUp=function(){n.state.shown&&n.canToggle()&&n.setState({shown:!1})},n.handleScrollDown=function(){!n.state.shown&&n.canToggle()&&n.setState({shown:!0})},n.handlePositionStatusChange=function(e){n.canToggle()&&("normal"!==e?n.enable():n.disable())},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"canToggle",value:function(){return!(this.props.prevent||document.activeElement&&document.activeElement.closest(".SearchBar"))}},{key:"enable",value:function(){this.setState({enabled:!0,shown:!0})}},{key:"disable",value:function(){this.setState({enabled:!1,shown:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.offset,a=t.children,r=this.state,o=r.enabled,i=r.shown;return d.a.createElement(u.Fragment,null,d.a.createElement(k.a,{keyMap:{FOCUS_SEARCH:"/"},handlers:{FOCUS_SEARCH:function(){return e.setState({shown:!1})}}}),d.a.createElement(h.a,{offset:n,onPositionStatusChange:this.handlePositionStatusChange},d.a.createElement("div",null)),o&&d.a.createElement(E,{onScrollUp:this.handleScrollUp,onScrollDown:this.handleScrollDown}),d.a.createElement(C.a.Inlet,{shown:i},d.a.createElement("div",{className:p()("PageHeader",{"is-shown":i})},a)))}}]),t}(u.Component));j.propTypes={prevent:l.a.bool,offset:l.a.number},j.defaultProps={prevent:!1,offset:O.f};var N=j;n.d(t,"a",function(){return N})},2105:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(1),r=n.n(a),o=r.a.shape({cardShow:r.a.number,expand:r.a.number,title:r.a.number,voteUp:r.a.number,voteDown:r.a.number,share:r.a.number,favlists:r.a.number,thank:r.a.number,options:r.a.number,report:r.a.number,toggleComment:r.a.number,getCommentAction:r.a.func})},2106:function(e,t,n){e.exports=n.p+"assets/background_blue.94450cd0.svg"},2109:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(9),l=n(0),u=n.n(l),d=n(17),m=n(61),p=n(505),h=n(504),f=n(163),v=n(1),b=n.n(v),g=n(181),y=n(45),w=n(510),E=n(16),C=n(60),k=n(91),O=function(e){var t=e.upvotedFollowees,n=e.voteupCount,a=e.actionText,r=e.canClick,o=e.onClick;if(!n)return null;var i=t.length,s=i===n?"":"".concat(Object(C.formatNumber)(n)," 人");return u.a.createElement(w.CJKSpace,null,t.map(function(e,t){return u.a.createElement("span",{key:t},t>0&&"、",u.a.createElement(k.a,{key:t,noBadge:!0,user:e},e.name))}),i>0&&n-i>0&&"等",r?u.a.createElement(E.c,{preset:"plain",onClick:o},s,a):s+a)};O.propTypes={voteupCount:b.a.number.isRequired,upvotedFollowees:b.a.array.isRequired,actionText:b.a.string.isRequired,canClick:b.a.bool,onClick:b.a.func},O.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var j=O,N=n(2086),S=(n(2162),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={modalShown:!1},n.handleListHide=function(){return n.setState({modalShown:!1})},n.handleListShown=function(){return n.setState({modalShown:!0})},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(){var e=this.props.modalShown;e&&!this.state.modalShown&&this.setState({modalShown:e})}},{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,a=e.openable,r=e.type,o=e.too,i=e.isFetching,s=e.isDrained,c=e.items,l=e.onLoad;if(t<=0)return null;var d,m=this.state.modalShown;return d="pin"===r?"为该".concat(y.b[r],"鼓掌"):"column"===r?"关注":"".concat(o?"也":"","赞同了该").concat(y.b[r]),u.a.createElement("span",{className:"Voters"},u.a.createElement(j,{canClick:a,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:d}),u.a.createElement(g.b,{size:"fullPage",onClose:this.handleListHide},m&&u.a.createElement(N.a,{isFetching:i,isDrained:s,text:"column"===r?"关注了":"赞同了",items:c,voteupCount:t,onLoad:l})))}}]),t}(l.Component));S.propTypes={openable:b.a.bool,upvotedFollowees:b.a.array,id:b.a.oneOfType([b.a.number,b.a.string]),type:b.a.oneOf(["pin","answer","article","column"]).isRequired,modalShown:b.a.bool},S.defaultProps={openable:!0};var A,T,R,I=S,x={answer:"answers",article:"articles",pin:"pins",column:"columns"};var P=Object(d.connect)(function(e,t){var n=t.id,a=t.type,r=e.entities.users,o=e[x[a]]||{},i=o.voters,s=void 0===i?{}:i,l=o.concernedUpvoters,u=void 0===l?{}:l,d=s[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},m=d.isFetching,p=d.isDrained,h=d.order,f=d.ids,v=(u[n]||{ids:[]}).ids;return{isFetching:m,isDrained:p,order:h,items:[].concat(Object(c.a)(v),Object(c.a)(f.filter(function(e){return!v.includes(e)}))).map(function(e){return r[e]})}},{loadAnswerVoters:m.s,loadArticleVoters:p.c,loadPinVoters:h.f,loadColumnsFollowers:f.c})((R=T=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handleLoad=function(){var e=n.props,t=e.type,a=e.id,r=e.loadAnswerVoters,o=e.loadPinVoters,i=e.loadArticleVoters,s=e.loadColumnsFollowers;switch(t){case"answer":return r(a);case"pin":return o(a);case"article":return i(a);case"column":return s(a);default:return null}},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement(I,Object.assign({onLoad:this.handleLoad},this.props))}}]),t}(l.Component),T.propsTypes=Object.assign({},I.propsTypes),T.defaultProps=Object.assign({},I.defaultProps),A=R))||A;t.a=P},2110:function(e,t,n){"use strict";var a=n(9),r=n(3),o=n(4),i=n(7),s=n(5),c=n(6),l=n(0),u=n.n(l),d=n(8),m=n.n(d),p=n(1),h=n.n(p),f=n(870),v=n.n(f),b=n(56),g=n(2296),y=n(2012),w=n(2010),E=n(10),C=function(e){return u.a.createElement(E.a,e,u.a.createElement("path",{d:"M6.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L7.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L10 12l-3.782 3.716a.758.758 0 0 0 0 1.063zm5 0a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L12.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L15 12l-3.782 3.716a.758.758 0 0 0 0 1.063z",fillRule:"evenodd"}))};C.defaultProps={name:"DoubleArrowRight"};var k=C,O=(n(2126),["日","一","二","三","四","五","六"]),j=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={calendarDate:n.props.defaultCalendarDate||(Array.isArray(n.props.value)?n.props.value[0]:n.props.value),hoveringDate:null,now:new Date},n.handlePrevYearClick=function(){var e=Object(b.addYears)(n.state.calendarDate,-1);n.setState({calendarDate:e}),n.props.onCalendarDateChange(e)},n.handlePrevMonthClick=function(){var e=Object(b.addMonths)(n.state.calendarDate,-1);n.setState({calendarDate:e}),n.props.onCalendarDateChange(e)},n.handleNextMonthClick=function(){var e=Object(b.addMonths)(n.state.calendarDate,1);n.setState({calendarDate:e}),n.props.onCalendarDateChange(e)},n.handleNextYearClick=function(){var e=Object(b.addYears)(n.state.calendarDate,1);n.setState({calendarDate:e}),n.props.onCalendarDateChange(e)},n.handleDayClick=function(e){n.setState({calendarDate:e}),n.props.onCalendarDateChange(e),n.props.onChange(e)},n.handleDayHover=function(e){n.setState({hoveringDate:e}),n.props.onHover(e)},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.weekStartsOn,o=t.value,i=t.disabledDate,s=t.showToday,c=t.showPrevMonth,l=t.showPrevYear,d=t.showNextMonth,p=t.showNextYear,h=this.state,f=h.calendarDate,E=h.hoveringDate,C=h.now,j=Object(b.startOfWeek)(Object(b.startOfMonth)(f),{weekStartsOn:r}),N=Object(b.lastDayOfWeek)(Object(b.endOfMonth)(f),{weekStartsOn:r}),S=Object(a.a)(Array(Object(b.differenceInDays)(N,j)+1)).map(function(e,t){return Object(b.addDays)(j,t)}).reduce(function(e,t){var n=Object(b.differenceInCalendarWeeks)(t,j,{weekStartsOn:r});return e[n]=e[n]?[].concat(Object(a.a)(e[n]),[t]):[t],e},[]),A=S[0].map(b.getDay),T=Array.isArray(o),R=s;return u.a.createElement("div",{className:m()("Calendar",n,{"Calendar--hasBottomTool":R})},u.a.createElement("div",{className:"Calendar-topTool"},l&&u.a.createElement("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevYear",onClick:this.handlePrevYearClick},u.a.createElement(g.a,{size:20,center:!0})),c&&u.a.createElement("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevMonth",onClick:this.handlePrevMonthClick},u.a.createElement(y.a,{size:20,center:!0})),u.a.createElement("div",{className:"Calendar-topToolDate"},v()(f,"YYYY 年 M 月")),d&&u.a.createElement("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextMonth",onClick:this.handleNextMonthClick},u.a.createElement(w.a,{size:20,center:!0})),p&&u.a.createElement("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextYear",onClick:this.handleNextYearClick},u.a.createElement(k,{size:20,center:!0}))),u.a.createElement("table",{className:"Calendar-table",cellSpacing:0},u.a.createElement("thead",{className:"Calendar-thead"},u.a.createElement("tr",null,A.map(function(e){return u.a.createElement("th",{key:e,className:"Calendar-weekName"},O[e])}))),u.a.createElement("tbody",null,S.map(function(t,n){return u.a.createElement("tr",{key:n},t.map(function(t,n){var r=i(t),s=T?Object(b.isSameDay)(t,o[0])||Object(b.isSameDay)(t,o[1]):Object(b.isSameDay)(t,o),c=!1;if(T){var l=b.min.apply(void 0,Object(a.a)(o)),d=b.max.apply(void 0,Object(a.a)(o));c=Object(b.differenceInCalendarDays)(t,l)>0&&Object(b.differenceInCalendarDays)(d,t)>0}return u.a.createElement("td",{key:n,className:m()("Calendar-day",{"is-hovered":Object(b.isSameDay)(t,E),"is-today":Object(b.isSameDay)(t,C),"is-disabled":r,"is-not-this-month":!Object(b.isSameMonth)(t,f),"is-input-date":s,"is-in-range":c}),onClick:function(){r||e.handleDayClick(t)},onMouseEnter:function(){r||e.handleDayHover(t)},onMouseLeave:function(){r||e.handleDayHover(null)}},Object(b.getDate)(t))}))}))),R&&u.a.createElement("div",{className:"Calendar-bottomTool"},s&&u.a.createElement("button",{className:"Calendar-todayButton",onClick:function(){return e.handleDayClick(C)},disabled:i(C)},"今天")))}}]),t}(l.Component);j.defaultProps={weekStartsOn:0,disabledDate:function(){return!1},onChange:function(){return!1},onCalendarDateChange:function(){return!1},onHover:function(){return!1},showToday:!0,showPrevMonth:!0,showPrevYear:!0,showNextMonth:!0,showNextYear:!0},j.propTypes={defaultCalendarDate:h.a.instanceOf(Date),value:h.a.oneOfType([h.a.instanceOf(Date),h.a.arrayOf(h.a.instanceOf(Date))]),weekStartsOn:h.a.number,disabledDate:h.a.func,onChange:h.a.func,onHover:h.a.func,showToday:h.a.bool,showPrevMonth:h.a.bool,showPrevYear:h.a.bool,showNextMonth:h.a.bool,showNextYear:h.a.bool};t.a=j},2111:function(e,t,n){},2112:function(e,t,n){},2113:function(e,t,n){"use strict";var a=n(2114),r="Copy to clipboard: #{key}, Enter";e.exports=function(e,t){var n,o,i,s,c,l,u=!1;t||(t={}),n=t.debug||!1;try{if(i=a(),s=document.createRange(),c=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",document.body.appendChild(l),s.selectNode(l),c.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),u=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:r),window.prompt(o,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(s):c.removeAllRanges()),l&&document.body.removeChild(l),i()}return u}},2114:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},2115:function(e,t,n){},2116:function(e,t,n){},2117:function(e,t,n){},2118:function(e,t,n){},2119:function(e,t,n){e.exports=n.p+"assets/deleteComment.97d8abc0.gif"},2120:function(e,t,n){},2121:function(e,t,n){e.exports=n.p+"assets/liukanshan_coin.29bf8333.svg"},2122:function(e,t,n){e.exports=n.p+"assets/liukanshan_paper.d98ba9b2.svg"},2123:function(e,t,n){var a=n(2124),r=n(380),o=n(528);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&r(t,n,i)&&(n=i=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),i=void 0===i?t<n?1:-1:o(i),a(t,n,i,e)}}},2124:function(e,t){var n=Math.ceil,a=Math.max;e.exports=function(e,t,r,o){for(var i=-1,s=a(n((t-e)/(r||1)),0),c=Array(s);s--;)c[o?s:++i]=e,e+=r;return c}},2125:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(0),l=n.n(c),u=n(1),d=n.n(u),m=n(8),p=n.n(m),h=n(870),f=n.n(h),v=n(16),b=n(101),g=n(2297),y=n(2110),w=(n(2127),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={isFocused:!1},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.value,r=t.onChange,o=t.isButtonActive,i=t.toggler,s=t.disabledDate,c=t.getContainer,u=this.state.isFocused;return l.a.createElement(b.a,{className:p()("DatePicker",n),toggler:i||l.a.createElement(v.c,{className:p()("DatePicker-Button",{"is-active":u||o})},l.a.createElement(g.a,{center:!0,size:20}),f()(a,"YYYY/MM/DD")),onOpen:function(){e.setState({isFocused:!0})},onClose:function(){e.setState({isFocused:!1})},ref:function(t){e.popover=t},placement:"bottom",arrowed:!0,preventCloseOnTarget:!0,getContainer:c},l.a.createElement(y.a,{value:a,onChange:function(t){e.popover.close(),r(t)},disabledDate:s}))}}]),t}(c.Component));w.propTypes={toggler:d.a.element,disabledDate:d.a.func}},2126:function(e,t,n){},2127:function(e,t,n){},2128:function(e,t,n){"use strict";var a,r,o,i=n(22),s=n(3),c=n(4),l=n(7),u=n(5),d=n(6),m=n(0),p=n.n(m),h=n(1),f=n.n(h),v=n(17),b=n(44),g=n.n(b),y=n(21),w=n(187),E=n(61),C=n(19),k=n(2074),O=function(e,t){var n=e.entities.questions[t.answer.question.id];return n&&n.voteDownReason},j={loadSwitches:w.b,showNotification:y.h,updateAnswerVote:E.J,getVoteDownReason:E.i,selectVoteDownReason:E.A,setOpposeRightStatus:w.f},N=Object(v.connect)(function(e,t){return{voteDownReason:O(e,t),opposeRightStatusIsOn:Object(w.d)(e)}},j)((o=r=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleVote=n.context.authRequired(function(e){var t=n.props,a=t.answer;(0,t.updateAnswerVote)(a.id,e)},C.N.vote),n.handleLoadVoteDownReason=function(){var e=n.props,t=e.answer;(0,e.getVoteDownReason)(t.id,t.question.id)},n.handleSelectVoteDownReason=function(e){var t=n.props,a=t.answer,r=t.selectVoteDownReason,o=t.showNotification;r(a.id,e.reasonId).then(function(e){o(e.payload.message)})},n.handleSetShowVoteDownReason=function(e){(0,n.props.setOpposeRightStatus)(e)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.loadSwitches;this.shouldShowVoteDownMenu&&e(["opposeRight"])}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.voteDownReason,a=e.opposeRightStatusIsOn,r=Object(i.a)(e,["answer","voteDownReason","opposeRightStatusIsOn"]);return p.a.createElement(k.a,Object.assign({count:t.voteupCount,voting:t.relationship&&t.relationship.voting,isOwner:t.relationship&&t.relationship.isAuthor,isShowVoteDownMenu:this.shouldShowVoteDownMenu&&a,onVote:this.handleVote,voteDownReason:n,onLoadVoteDownReason:this.handleLoadVoteDownReason,onSelectVoteDownReason:this.handleSelectVoteDownReason,onSetVoteDownReason:this.handleSetShowVoteDownReason},g()(r,Object.keys(j))))}},{key:"shouldShowVoteDownMenu",get:function(){return Boolean(!this.props.disabled&&this.context.currentUser)}}]),t}(m.Component),r.contextTypes={currentUser:f.a.object,authRequired:f.a.func},a=o))||a;t.a=N},2129:function(e,t,n){},2130:function(e,t,n){},2131:function(e,t,n){},2132:function(e,t,n){},2133:function(e,t,n){},2134:function(e,t,n){},2135:function(e,t,n){},2136:function(e,t,n){},2141:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(17),i=n(3),s=n(4),c=n(7),l=n(5),u=n(6),d=n(8),m=n.n(d),p=n(2154),h=n(15),f=(n(2130),r.a.Component,n(1)),v=n.n(f),b=n(52),g=n(2010),y=(n(2131),"dark"),w="light",E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e,t){h.default.trackEvent(n.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}})},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.goodsCard.body.link;h.default.trackCardShow(this.node,{id:4241,name:"课程"},{link:{url:e,anchor:"课程"}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=t.zaInfo,o=t.goodsCard,i=t.className,s=n===y,c=o.header.title,l=o.body,u=l.title,d=l.cover,p=l.coverLabel,h=l.link,f=l.desc,v=l.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:m()("GoodsCard",i)},r.a.createElement("h1",{className:"GoodsCard-header"},c),r.a.createElement("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"GoodsCard-content",onClick:function(){return e.handleClick(h,u)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},r.a.createElement("div",{className:"GoodsCard-cover"},r.a.createElement("img",{className:m()("GoodsCard-cover-img",{"GoodsCard-cover-img--dark":s}),src:Object(b.imgUrl)(d,{size:"200x0"})}),r.a.createElement("div",{className:"GoodsCard-cover-label"},p)),r.a.createElement("div",{className:"GoodsCard-contnt"},r.a.createElement("div",null,r.a.createElement("h2",{className:"GoodsCard-contnt-title"},u),f&&r.a.createElement("p",{className:"GoodsCard-contnt-desc"},f)),r.a.createElement("p",{className:"GoodsCard-contnt-label"},v)),r.a.createElement("div",{className:"GoodsCard-contnt-ArrowRight"},r.a.createElement(g.a,null)))))}}]),t}(r.a.Component);E.propTypes={theme:v.a.oneOf([y,w])},E.defaultProps={theme:w};var C=E,k=n(94),O=(n(2132),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e,t){h.default.trackEvent(n.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}})},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.btnInfo,t=e.btnText,n=e.link;k.default.dispatch("vip/preloadVIPHybridPopup",{url:n}),h.default.trackCardShow(this.node,{id:4241,name:t},{link:{url:n,anchor:t}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,a=t.zaInfo,o=t.className,i=n.btnText,s=n.link;return r.a.createElement("div",{className:m()("PurchaseBtn",o)},r.a.createElement("div",{className:"PurchaseBtn-mask"}),r.a.createElement("a",{className:"PurchaseBtn-HybridLink",href:s,target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick(s,i)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},r.a.createElement("span",{className:"PurchaseBtn-text"},i)," ",r.a.createElement(g.a,{className:"PurchaseBtn-ArrowRight"})))}}]),t}(r.a.Component));n(2133);var j=function(e){var t=e.introCard,n=e.RichTextComponent,o=e.className,i=e.zaInfo,s=t.description,c=t.contentName,l=t.authorDesc,u=Object(a.useCallback)(function(e,t){var n=e.target,a=e.target,r=a.text,o=a.href;"A"===a.tagName&&h.default.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:r},link:{url:o}})},[]);return r.a.createElement("section",{className:m()("IntroCard",o),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[i]}})},r.a.createElement("p",{className:"IntroCard-description"},s),r.a.createElement("p",{onClick:function(e){return u(e,5326)},className:"IntroCard-contentName",dangerouslySetInnerHTML:{__html:c}}),n?r.a.createElement(n,{className:"IntroCard-authorDesc",html:l,onClick:function(e){return u(e,5325)}}):r.a.createElement("p",{onClick:function(e){return u(e,5325)},className:"IntroCard-authorDesc",dangerouslySetInnerHTML:{__html:l}}))},N=(n(2134),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.videoPrompt,n=e.showLine;return Boolean(t)&&r.a.createElement("div",{className:m()("VideoPrompt",{"VideoPrompt--line":n})},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))}}]),t}(r.a.Component));N.propTypes={videoPrompt:v.a.string,showLine:v.a.bool},N.defaultProps={videoPrompt:"",showLine:!1};var S=n(28),A=(n(2135),"dark"),T="light",R=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e,t){h.default.trackEvent(n.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}})},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.goodsCard.body.link;h.default.trackCardShow(this.node,{id:4241,name:"课程"},{link:{url:e,anchor:"课程"}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=t.zaInfo,o=t.goodsCard,i=t.className,s=n===A,c=o.header.title,l=o.body,u=l.title,d=l.cover,p=l.coverLabel,h=l.link,f=l.desc,v=l.label,g=l.vipNote;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:m()("GoodsCardV2",i)},r.a.createElement("h1",{className:"GoodsCardV2-header"},c),r.a.createElement("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"GoodsCardV2-content",onClick:function(){return e.handleClick(h,u)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},r.a.createElement("div",{className:"GoodsCardV2-cover"},r.a.createElement("img",{className:m()("GoodsCardV2-cover-img",{"GoodsCardV2-cover-img--dark":s}),src:Object(b.imgUrl)(d,{size:"200x0"})}),r.a.createElement("div",{className:"GoodsCardV2-cover-label"},p)),r.a.createElement("div",{className:"GoodsCardV2-detail"},r.a.createElement("div",null,r.a.createElement("h2",{className:"GoodsCardV2-detail-title"},u),f&&r.a.createElement("p",{className:"GoodsCardV2-detail-desc"},f),r.a.createElement("p",{className:"GoodsCardV2-detail-label"},v)),r.a.createElement("p",{className:"GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:g}})))))}}]),t}(r.a.Component);R.propTypes={theme:v.a.oneOf([A,T])},R.defaultProps={theme:T};var I=R,x=n(61),P=n(2033),M=n(25),L=n(263),D=n(133);function q(e){var t=e.id,n=e.logPaidAnswerRead,o=e.children,i=Object(a.useRef)(null);return Object(a.useEffect)(function(){var e=i.current;if(t&&e){var a=e instanceof Element?e:Object(S.findDOMNode)(e);a&&Object(L.onViewedOnce)(a,function(){return n(t)})}},[t,n]),r.a.cloneElement(o,{ref:i})}q.propTypes={id:v.a.oneOfType([v.a.number,v.a.string]).isRequired};var _=Object(M.compose)(Object(D.a)(null),Object(o.connect)(null,{logPaidAnswerRead:x.w}))(q);n.d(t,"a",function(){return B}),n.d(t,"b",function(){return Q});var z=function(e,t){var n=t.answer;return{paidContent:Object(x.x)(e,n.id)}},B=Object(o.connect)(z)(function(e){var t=e.answer,n=e.paidContent,o=void 0===n?{}:n,i=e.dispatch,s=t&&"paid"===t.answerType,c=o.isRequesting,l=o.result,u=o.error,d=t.paidInfo&&t.paidInfo.hasPurchased;if(Object(a.useEffect)(function(){!s||c||u||l||i(Object(x.t)(t.id))},[t.id,i,u,s,c,o,l]),!s||!l)return null;var m=l.isNew,p=l.goodsCard,h=l.btnInfo,f=l.zaInfo;return r.a.createElement(a.Fragment,null,r.a.createElement(_,{id:t.id},r.a.createElement("div",null)),!d&&h&&r.a.createElement(O,{btnInfo:h,zaInfo:f}),m?r.a.createElement(I,{className:"AnswerItem-GoodsCard",goodsCard:p,zaInfo:f}):r.a.createElement(C,{className:"AnswerItem-GoodsCard",goodsCard:p,zaInfo:f}))}),Q=Object(o.connect)(z)(function(e){var t=e.answer,n=void 0===t?{}:t,a=e.paidContent;if(!(n&&"paid"===n.answerType)||!a||!a.result)return null;var o=a.result,i=o.introCard,s=o.zaInfo;return r.a.createElement(j,{className:"AnswerItem-IntroCard",introCard:i,RichTextComponent:P.a,zaInfo:s})})},2142:function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=c(n(2237)),o=c(n(0)),i=c(n(2068)),s=(c(n(2238)),n(2239));function c(e){return e&&e.__esModule?e:{default:e}}i.default.any,i.default.func,i.default.node;var l=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.performAppear=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(o._handleDoneAppearing.bind(o,e,t)):o._handleDoneAppearing(e,t)},o._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performEnter=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(o._handleDoneEntering.bind(o,e,t)):o._handleDoneEntering(e,t)},o._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performLeave=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(o._handleDoneLeaving.bind(o,e,t)):o._handleDoneLeaving(e,t)},o._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)?o.keysToEnter.push(e):o.setState(function(t){var n=a({},t.children);return delete n[e],{children:n}})},o.childRefs=Object.create(null),o.state={children:(0,s.getChildMapping)(n.children)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,s.getChildMapping)(e.children),n=this.state.children;for(var a in this.setState({children:(0,s.mergeChildMappings)(n,t)}),t){var r=n&&n.hasOwnProperty(a);!t[a]||r||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(var o in n){var i=t&&t.hasOwnProperty(o);!n[o]||i||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[],n=function(n){var a=e.state.children[n];if(a){var i="string"!=typeof a.ref,s=e.props.childFactory(a),c=function(t){e.childRefs[n]=t};s===a&&i&&(c=(0,r.default)(a.ref,c)),t.push(o.default.cloneElement(s,{key:n,ref:c}))}};for(var i in this.state.children)n(i);var s=a({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,o.default.createElement(this.props.component,s,t)},t}(o.default.Component);l.displayName="TransitionGroup",l.propTypes={},l.defaultProps={component:"span",childFactory:function(e){return e}},t.default=l,e.exports=t.default},2143:function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};r(n(0));var a=r(n(2068));function r(e){return e&&e.__esModule?e:{default:e}}t.nameShape=a.default.oneOfType([a.default.string,a.default.shape({enter:a.default.string,leave:a.default.string,active:a.default.string}),a.default.shape({enter:a.default.string,enterActive:a.default.string,leave:a.default.string,leaveActive:a.default.string,appear:a.default.string,appearActive:a.default.string})])},2144:function(e,t,n){e.exports=n.p+"assets/logo.f6eef033.png"},2147:function(e,t,n){"use strict";var a=n(498),r=n(29),o=n(3),i=n(7),s=n(5),c=n(26),l=n(4),u=n(6),d=n(1),m=n.n(d),p=n(0),h=n.n(p),f=n(17),v=n(8),b=n.n(v),g=n(871),y=n.n(g),w=n(56),E=n(2298),C=n(10),k=function(e){return h.a.createElement(C.a,e,h.a.createElement("path",{d:"M12 2C6.478 2 2 6.498 2 12.013 2 17.527 6.478 22 12 22s10-4.473 10-9.987C22.025 6.498 17.547 2 12 2zm3.575 14.693s-3.677-2.45-4.135-2.8c-.458-.349-.458-.813-.458-.813l.005-5.66c0-.56.458-1.017 1.018-1.017s1.017.457 1.017 1.017l-.004 5.152 3.727 2.495c.458.305.62.99.27 1.44-.35.45-1.004.487-1.44.186z",fillRule:"evenodd"}))};k.defaultProps={name:"Time"};var O=k,j=function(e){return h.a.createElement(C.a,e,h.a.createElement("path",{d:"M12.9 11.433v-5.1a.9.9 0 1 0-1.8 0v6a.9.9 0 0 0 .9.9h4.8a.9.9 0 1 0 0-1.8h-3.9zM2.652 8.246a3.3 3.3 0 0 1 4.43-4.851 10.241 10.241 0 0 0-4.43 4.851zm14.266-4.851a3.3 3.3 0 0 1 4.43 4.851 10.241 10.241 0 0 0-4.43-4.851zM12 21.333a9 9 0 1 1 0-18 9 9 0 0 1 0 18z",fillRule:"evenodd"}))};j.defaultProps={name:"Clock"};var N=j,S=n(2001),A=n(2299),T=n(16),R=n(38),I=n(50),x=n(270),P=n(184),M=n(120),L=n(92),D=n(134),q=n(31),_=n.n(q),z=n(2163),B=n(189),Q=n(15),U=n(2096),F=n.n(U),V=n(2165),H=n.n(V),W=n(2174),G=n.n(W),K=n(119),Y=n(2125),$=(n(2175),F()(0,24).map(function(e){return H()(e,2,"0")})),J=F()(0,60).map(function(e){return H()(e,2,"0")}),Z=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={value:w.setSeconds(n.props.value,0)},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e,t){var n=this.props.onChange;this.setState({value:e}),n(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.min,r=t.max,o=t.onRef,i=this.state.value;return h.a.createElement("div",{className:b()("DateTimePicker",n),ref:o},h.a.createElement(Y.a,{value:i,disabledDate:function(e){return!(!a||!w.isBefore(e,a.toDateString()))||!(!r||!w.isAfter(e,r.toDateString()))},onChange:function(t){e.handleChange(G()(function(e){return w.setYear(e,t.getFullYear())},function(e){return w.setMonth(e,t.getMonth())},function(e){return w.setDate(e,t.getDate())})(i),{date:t})}}),h.a.createElement(K.b,{value:w.format(i,"HH"),onChange:function(t){return e.handleChange(w.setHours(i,t),{hours:t})}},$.map(function(e){return h.a.createElement(K.a,{key:e,value:e})})),h.a.createElement("span",{className:"DateTimePicker-label"},"时"),h.a.createElement(K.b,{value:w.format(i,"mm"),onChange:function(t){return e.handleChange(w.setMinutes(i,t),{minutes:t})}},J.map(function(e){return h.a.createElement(K.a,{key:e,value:e})})),h.a.createElement("span",{className:"DateTimePicker-label"},"分"))}}]),t}(h.a.Component),X=n(495),ee=n(181),te=(n(2098),"AnswerOrg::know"),ne=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleHide=function(){_.a.set(te,!0),n.props.onClose()},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return h.a.createElement(ee.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n},t&&h.a.createElement("div",null,h.a.createElement("ul",{className:"AnswerModal-list"},h.a.createElement("li",null,"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"),h.a.createElement("li",null,"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"),h.a.createElement("li",null,"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。")),h.a.createElement("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank"},"了解更多"),h.a.createElement(ee.a,{direction:"horizontal"},h.a.createElement(T.c,{onClick:this.handleHide},"不再显示"),h.a.createElement(T.c,{color:"blue",preset:"primary",onClick:n},"知道了"))))}}],[{key:"getKnown",value:function(){return _.a.get(te)}}]),t}(p.Component),ae=n(41),re="AnswerBrand::know",oe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleHide=function(){_.a.set(re,!0),n.props.onClose()},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return h.a.createElement(ae.b,{title:"品牌提问规则",subtitle:"这是一个「品牌提问」，请在回答前了解：",onClose:n},t&&h.a.createElement("div",null,h.a.createElement("p",null,"「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"),h.a.createElement("a",{className:"AnswerModal-moreLink",href:"/introduction/brand_question",target:"_blank"},"了解品牌提问"),h.a.createElement(ae.a,{direction:"horizontal"},h.a.createElement(T.c,{onClick:this.handleHide},"知道了，继续回答"),h.a.createElement(T.c,{color:"blue",preset:"primary",onClick:n},"取消"))))}}],[{key:"getKnown",value:function(){return _.a.get(re)}}]),t}(p.Component),ie=n(2221),se=(n(2176),"什么是创作声明？"),ce="创作声明是对其他知友的善意提醒，也是一种创作态度。知乎鼓励您使用「创作声明」功能，为回答添加阅读前的须知，使知友获得更好的阅读体验。该功能当前只针对部分问题开放。",le=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){(0,n.props.onChange)(e.target.checked),Q.default.trackEvent(null,{id:5603,action:"Click"})},n.handleHelpClick=function(){L.a.alert(ce,{title:se,text:{ok:"我知道了"}}),Q.default.trackEvent(null,{id:5604,action:"Click"})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){Q.default.trackCardShow(null,{id:5602})}},{key:"render",value:function(){var e=this.props,t=e.disclaimers,n=e.checked;return h.a.createElement("div",{className:"DisclaimerEntry"},h.a.createElement("label",{className:"DisclaimerEntry-label"},h.a.createElement("input",{className:"DisclaimerEntry-input",type:"checkbox",checked:n,onChange:this.handleChange}),h.a.createElement("span",{className:"DisclaimerEntry-type"},"创作声明：",t[0].description)),h.a.createElement("span",{className:"DisclaimerEntry-help",onClick:this.handleHelpClick},h.a.createElement(ie.a,{className:"DisclaimerEntry-helpIcon",text:!0,center:!0})))}}]),t}(h.a.Component),ue=n(103),de=(n(2177),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=n.props.handleChange,a=e.target.checked;Q.default.trackEvent(n.circle,{id:4063,action:a?"Open":"Close"}),Promise.resolve(a||Object(ue.a)("取消收录到圈内说",{content:"回答被收录到圈内说将会得到更多的曝光，确定要取消收录吗？"})).then(function(){return t(a)})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){Q.default.trackCardShow(this,{id:4062})}},{key:"render",value:function(){var e=this,t=this.props.isChecked;return h.a.createElement("label",{className:"CircleEntry-openCircleLabel",ref:function(t){e.circle=t},htmlFor:"CircleEntry-openCircleInput"},h.a.createElement("input",{type:"checkbox",id:"CircleEntry-openCircleInput",checked:t,onChange:this.handleChange}),"收录到圈内说")}}]),t}(p.Component)),me=n(540),pe=n(2063),he=n(520),fe=n(2099),ve=n(545),be=n(80),ge=n(2033),ye=n(2179),we=n.n(ye),Ee=(n(2180),{current:"当前草稿",saved:"自动保存",published:"发布过的版本"}),Ce=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).formatDate=function(e){return Object(w.format)("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"YYYY-MM-DD HH:mm")},n.handleDraftClick=function(e){e.preventDefault()},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"renderCurrentDraft",value:function(){var e=this.props,t=e.currentDraft,n=e.onRevert,a=t.isFetching,r=t.data;return h.a.createElement("div",{className:"DraftHistory-main"},a&&h.a.createElement(M.a,{className:"DraftHistory-loading"}),!a&&r&&h.a.createElement(h.a.Fragment,null,r.draft.title&&h.a.createElement("div",{className:"DraftHistory-draftTitle"},r.draft.title),h.a.createElement(ge.a,{className:"DraftHistory-draft",html:r.draft.content,onClick:this.handleDraftClick}),h.a.createElement("div",{className:"DraftHistory-actions"},h.a.createElement("div",{className:"DraftHistory-meta"},this.formatDate(r)," ",Ee[r.versionType]),h.a.createElement(T.c,{className:"DraftHistory-revert",disabled:"current"===r.versionType,onClick:function(){return n(r)}},"恢复此版本"))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,a=t.currentVersion,r=t.currentDraft,o=t.getHistory,i=t.onSelect;return n?n.isFetching&&!n.items?h.a.createElement("div",{className:"DraftHistory"},h.a.createElement(M.a,{className:"DraftHistory-loading"})):h.a.createElement("div",{className:"DraftHistory"},h.a.createElement("div",{className:"DraftHistory-side"},h.a.createElement("div",{className:"DraftHistory-title"},"历史版本"),h.a.createElement(be.b,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:o},h.a.createElement("div",null,n.items&&n.items.map(function(t,n){return h.a.createElement("a",{key:n,href:"javascript:;",className:b()("DraftHistory-version",{"DraftHistory-version--selected":a&&t.versionType===a.versionType&&t.id===a.id}),onClick:function(){return i(t)}},h.a.createElement("div",{className:"DraftHistory-versionDate"},e.formatDate(t)),h.a.createElement("div",{className:"DraftHistory-versionType"},Ee[t.versionType]))})))),n.items&&!n.items.length&&h.a.createElement("div",{className:"DraftHistory-main"},h.a.createElement("div",{className:"DraftHistory-empty"},h.a.createElement(we.a,{className:"DraftHistory-emptyIcon"}),h.a.createElement("div",{className:"DraftHistory-emptyText"},"还没有历史版本"))),r&&this.renderCurrentDraft()):null}}]),t}(h.a.Component);Ce.propTypes={history:m.a.object,currentVersion:m.a.object,currentDraft:m.a.object,onSelect:m.a.func,onRevert:m.a.func};var ke=Ce,Oe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={currentVersion:null},n.getHistory=function(){var e=n.props,t=e.type,a=e.id;(0,e.getHistory)(t,a)},n.handleSelect=function(e){n.setState({currentVersion:e})},n.handleRevert=function(e){var t=n.props,a=t.revert,r=t.onReverted;a(e.versionType,e.id).then(function(){r&&r(e)})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.drafts,r=n.getDraft,o=this.state.currentVersion,i=t.currentVersion;!o||i&&i.versionType===o.versionType&&i.id===o.id||a["".concat(o.versionType,"_").concat(o.id)]||r(o.versionType,o.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,a=this.state.currentVersion;return h.a.createElement(ke,{history:t,currentVersion:a,currentDraft:a?n["".concat(a.versionType,"_").concat(a.id)]:null,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),t}(h.a.Component);Oe.propTypes={type:m.a.string.isRequired,id:m.a.number.isRequired,onReverted:m.a.func};var je=Object(f.connect)(function(e,t){var n=t.type,a=t.id;return{history:e.draftHistory.history["".concat(n,"_").concat(a)],drafts:e.draftHistory.drafts}},{getHistory:ve.c,getDraft:ve.b,revert:ve.e,reset:ve.d})(Oe),Ne=(n(2181),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleReverted=function(e){var t=n.props,a=t.onClose,r=t.onReverted;r&&r(e),a&&a(),Q.default.trackEvent(null,{id:5016,action:"Click"})},n.handleClose=function(){var e=n.props.onClose;e&&e(),Q.default.trackEvent(null,{id:5015,action:"Click"})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.type,a=e.id;return h.a.createElement(ae.b,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose},t&&h.a.createElement(je,{type:n,id:a,onReverted:this.handleReverted}))}}]),t}(h.a.Component));Ne.propTypes={shown:m.a.bool.isRequired,onClose:m.a.func,type:m.a.string.isRequired,id:m.a.number.isRequired,onReverted:m.a.func},Ne.defaultProps={shown:!0};var Se,Ae,Te,Re=Ne,Ie=n(2073),xe=n(187),Pe=n(70),Me=n(61),Le=n(501),De=n(265),qe=n(21),_e=n(24),ze=n(524),Be=n(2095),Qe=n(2144),Ue=n.n(Qe),Fe=n(19);n(2182);function Ve(){var e=Object(a.a)(["草稿保存于",""]);return Ve=function(){return e},e}var He={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},We="匿名回答无法开启赞赏，请先取消匿名",Ge=2e3,Ke=117,Ye=function(e){return Boolean(e&&e.disclaimerInfo&&e.disclaimerInfo[0]&&"open"===e.disclaimerInfo[0].status)},$e=Object(f.connect)(function(e,t){var n=e.entities,a=n.questions,r=n.drafts,o=void 0===r?{}:r,i=n.answers,s=e.switches,c=e.question,l=Object(_e.c)(e),u=Object.values(i).filter(function(e){return e.author&&e.author.urlToken===(l&&l.urlToken)})[0]||{},d=u.rewardInfo&&u.rewardInfo.tagline;return{question:a[t.question.id]||t.question,draft:o["question_".concat(t.question.id)],switches:s,rewardTagline:d,currentUser:l,isPuQuestion:Boolean(c&&c.brand&&c.brand.isPuQuestion),disclaimers:c.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null}},{addDraft:Pe.b,updateDraft:Pe.X,deleteDraft:Pe.i,showNotification:qe.h,updateQuestionRewardinfo:De.n,fillCurrentUserIfNeeded:_e.e,loadDisclaimers:Pe.E,loadSettings:Me.v,updateSettingsDisclaimer:Me.K,loadLabel:Le.e,loadSwitches:xe.b})((Te=Ae=function(e){function t(e,n){var a;Object(o.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e,n))).onCompositionStart=function(){a.composition=!0,a.syncDraft.cancel()},a.onCompositionEnd=function(){a.composition=!1,a.prevValue&&a.syncDraft(a.prevValue),a.prevValue=null},a.onChangeContent=function(e){a.loggingDeltaTime||(a.loggingDeltaTime=!0,a.startCompositionTime=Math.floor((new Date).getTime()/1e3)),a.hasEdited=!0,a.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),a.composition?a.prevValue=e:a.syncDraft(e)},a.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var a=n.getRangeAt(0).cloneRange();a.collapse(t);var r=a.getBoundingClientRect();if(0===r.height){var o=a.commonAncestorContainer;1===o.nodeType&&(r=o.getBoundingClientRect())}if(0!==r.height){var i=r.bottom-(window.innerHeight-Ke);i>0&&window.scrollBy(0,i)}}},a.onChangeReshipmentSettings=function(e){"need_payment"!==e||a.props.currentUser.caEnabled?a.setState({reshipmentSettings:e}):window.open("/copyright/invite")},a.onChangerewardSettings=function(e){var t=e.target.checked,n=a.props,r=n.question,o=r.relationship.isAnonymous,i=r.id,s=n.showNotification,c=a.state.rewardTagline;if(!o)return!t||c?(a.setState({rewardTagline:"",checked:!1}),void a.props.updateQuestionRewardinfo(i,!1)):void a.activateReward();s(We,"red")},a.onSubmitReward=function(e){a.setState({rewardTagline:e,checked:!0});var t=a.props.question.id;Promise.resolve(a.props.updateQuestionRewardinfo(t,!0)).then(function(){return a.unactivateReward()})},a.onChangeDisclaimerSettings=function(e){a.setState({isDisclaimerChecked:e})},a.onDeleteDraftModalShow=function(){a.setState({deleteDraftModalShown:!0})},a.onDeleteDraft=function(){a.props.isReediting||(a.editable.reset(),a.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),a.deleteDraft();var e=a.props.onDeleteDraft;e&&e()},a.onDeleteDraftModalHide=function(){a.setState({deleteDraftModalShown:!1})},a.handleSubmit=a.context.authRequired(function(e){var t=a.state,n=t.reshipmentSettings,r=t.commentPermission,o=t.rewardTagline,i=t.isChecked,s=t.isDisclaimerChecked,l=t.scheduledPublishAt;if(a.editable){var u=a.editable.toHTML();if(u){var d=a.props,m=d.answer,p=d.disclaimers,f=d.settings,v=d.isReediting,b=d.onSubmit,g=d.showNotification,y=d.question,E=y.id,C=y.questionType,k=y.circleInfo,O=(k=void 0===k?{}:k).canWriteCircle,j=d.currentUser,N=d.updateSettingsDisclaimer,S=d.loadLabel;if(a.editable.hasVideo("upload"))a.handleError("video-uploading");else if(a.editable.hasImage("upload"))a.handleError("image-uploading");else{if(a.editable.hasImage("error")||a.editable.hasVideo("error")&&!a.editable.hasVideo("error-review"))return e.persist(),void L.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"});if(a.editable.hasVideo("error-review")||a.editable.hasVideo("censor"))return e.persist(),void L.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"});var A={content:u};if(v||(A.reshipmentSettings=n||"allowed",A.commentPermission=r||"all"),A.rewardSetting={canReward:Boolean(o),tagline:o},p&&p.length&&(!m||f)&&(A.disclaimerStatus=s?"open":"close",A.disclaimerType=p[0].type),O&&(A.isCircle=i),l){if(Q.default.trackEvent(Object(c.a)(a),{action:"Click",id:5733,name:"回答"}),w.isBefore(l,w.addMinutes(new Date,30)))return void L.a.alert(h.a.createElement("div",{style:{textAlign:"center"}},"只能设置 30 分钟后的定时时间"),{title:"定时发布"});A.publishAt=Math.floor(l/1e3)+0}Promise.resolve(b(A)).then(function(){m&&A.disclaimerStatus&&N(m.id,A.disclaimerStatus,A.disclaimerType),m&&S("answer",m.id),v||Q.default.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(E),author_member_hash_id:j.id}]}}],status:{result:"Success",event:{action:"Submit"}}}),"commercial"===C&&g("已发布！由品牌筛选后进入推荐区。")}).catch(function(){v||Q.default.trackEvent(Object(c.a)(a),{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})});var T=v?"Edit":"Answer";"Answer"===T&&Q.default.trackEvent(Object(c.a)(a),{id:4930}),Q.default.trackEvent(Object(c.a)(a),{action:T,is_intent:!1})}}}else a.props.onCancel()}),a.onCancel=function(){var e=a.props.onCancel;a.editable.hasVideo("upload")?a.handleError("video-uploading-draft"):a.editable.hasImage("upload")?a.handleError("image-uploading-draft"):(a.hasEdited&&a.syncDraftImmediately(),e&&e())},a.onFocus=function(){"org"===a.props.question.questionType&&a.shouldAnswerOrgQuestionModalShow&&a.handleAnswerOrgQuestionModalShow(),a.setState({focusing:!0})},a.onFocusWithAuth=function(){return a.onFocusAuthChecked?a.onFocus():(a.onFocusAuthChecked=!0,a.context.authRequired(a.onFocus)())},a.onSelectText=function(e){a.setState({selectedText:e.replace(/\s/g,"")})},a.onLoadStart=function(){a.setState({loadingShown:!0})},a.onLoadEnd=function(){a.setState({loadingShown:!1})},a.getToolbarPlugins=function(){var e=a.state,t=e.isFullscreen,n=e.isLeaveActive;return(!t||n)&&h.a.createElement(x.a,{key:"enterFullscreen",icon:h.a.createElement(E.a,{text:!0}),className:"AnswerForm-enterFullscreenButton",onClick:a.toggleFullscreen},"全屏模式")},a.getToolbarMenuPlugins=function(){var e=a.state.scheduledPublishAt;return h.a.createElement(h.a.Fragment,null,h.a.createElement(x.c,{onClick:a.showDraftHistoryModal},h.a.createElement(O,{text:!0}),"历史版本"),a.canUseScheduledPublish&&h.a.createElement(x.c,{onClick:function(){a.setUseScheduledPublish(!e),Q.default.trackEvent(Object(c.a)(a),{action:"Click",id:5730,name:"回答"})}},h.a.createElement(N,{text:!0}),e?"取消定时发布":"定时发布"))},a.toggleFullscreen=function(){var e=a.state.isFullscreen,t=function(){var e=a.scroller.querySelector(".Editable");return e?e.offsetTop:0};a.scrollTop=e?a.scroller.scrollTop-t():Math.max(-a.scroller.getBoundingClientRect().top,0),a.setState({isFullscreen:!e},function(){a.state.isFullscreen?a.scrollTop>0&&(a.scroller.scrollTop=a.scrollTop+t()):window.scrollTo(0,a.scroller.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top+a.scrollTop)})},a.exitFullscreen=function(){a.cloneEditor.resetWithValue(a.getCloneContent());a.fullscreenContent.addEventListener("animationend",function e(){a.fullscreenContent.removeEventListener("animationend",e),a.setState({isLeaveActive:!1}),a.toggleFullscreen()}),a.setState({isLeaveActive:!0})},a.handleFullscreenRef=function(e){e?B.hide():(B.show(),a.setState({isToolbarSticky:!1}))},a.handleScroll=function(){a.isHandleScrollPending||(a.isHandleScrollPending=!0,requestAnimationFrame(function(){var e=a.state,t=e.isFullscreen,n=e.isToolbarSticky,r=!1;if(t&&a.scroller){var o=a.scroller.querySelector(".Editable-toolbar");r=!!o&&a.scroller.scrollTop===o.offsetTop}r!==n&&a.setState({isToolbarSticky:r}),a.isHandleScrollPending=!1}))},a.showDraftHistoryModal=function(){a.syncDraft.flush(),a.setState({draftHistoryModalShown:!0}),Q.default.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},a.hideDraftHistoryModal=function(){a.setState({draftHistoryModalShown:!1})},a.closeRewardModal=function(){a.label.click()},a.handleUploadStart=function(){a.setState({isUploading:!0})},a.handleUploadEnd=function(){a.setState({isUploading:!1})},a.handleUploadError=function(e,t){switch(t){case"video":a.handleError("video-upload-error");break;case"image":a.handleError("image-upload-error",e)}},a.handleAnswerOrgQuestionModalShow=function(){a.setState({answerModalShown:!0}),a.shouldAnswerOrgQuestionModalShow=!1},a.handleAnswerModalHide=function(){a.setState({answerModalShown:!1})},a.syncDraftImmediately=function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state.content).toHTML(),n=a.state.lastUpdatedTime,r=Math.floor((new Date).getTime()/1e3);e=!n||a.startCompositionTime-n>180?r-a.startCompositionTime:r-n,a.setState({isTyping:!1}),t?a.updateDraft(t,e).then(function(e){e.payload&&e.payload.updatedTime&&a.setState({lastUpdatedTime:e.payload.updatedTime}),a.loggingDeltaTime=!1,delete a.startCompositionTime,Q.default.trackEvent(Object(c.a)(a),{action:"AutoSave"})}):a.deleteDraft()},a.syncDraft=Object(z.debounce)(a.syncDraftImmediately,Ge),a.updateDraft=function(e,t){var n=a.props,r=n.question.id,o=n.draft,i=n.addDraft,s=n.updateDraft;return o?s(r,e,t):i(r,e,t)},a.focus=function(){a.editable&&a.editable.focus()},a.hasVideo=function(){return!!a.editable&&a.editable.hasVideo()},a.handleChangeCommentPermission=function(e,t){var n=void 0===t?e:t;a.setState({commentPermission:n})},a.handleReshipmentSettings=function(e){"need_payment"!==e||a.props.currentUser.caEnabled||window.open("/copyright/invite"),a.setState({reshipmentSettings:e})},a.handleError=function(e,t){Object(ze.b)(e,t,a.props.showNotification)},a.handleBeforeVideoUpload=function(){var e=a.props.question;return!e.relationship||!e.relationship.isAnonymous},a.handleReverted=function(e){a.editable.resetWithValue(e.draft.content)},a.unactivateReward=function(){a.setState({rewardModalShown:!1})},a.activateReward=function(){a.setState({rewardModalShown:!0})},a.onChangecircleSettings=function(e){var t=e,n=a.context.onChangecircleSettings;a.setState({isChecked:t}),n(t)};var r=a.props,l=r.defaultValue,u=r.draft,d=r.settings,m=u?u.editableContent:l,p=u?u.updatedTime:0;return a.state={draft:m,content:{toHTML:function(){return""}},isEmpty:!m,isTyping:!1,isChecked:n.isCheckedCircle,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,checked:e.isRewardable,isFullscreen:!1,isToolbarSticky:!1,isLeaveActive:!1,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:p,rewardTagline:e.rewardTagline,draftHistoryModalShown:!1,isDisclaimerChecked:Ye(d),initialScheduledPublishAt:void 0,scheduledPublishAt:void 0},a.hasEdited=!1,a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting;return t&&t.autoSendingCreations&&!n}}]),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.shouldAnswerOrgQuestionModalShow=!ne.getKnown(),this.onFocusAuthChecked=!1;var t=this.props,n=t.fillCurrentUserIfNeeded,a=t.loadSwitches,o=n(["lastCommentPermission","caEnabled","autoSendingCreations"]);a(["isAnswerRewardable"]),Promise.resolve(o).then(function(){me.a.getActionsByNames(["a_draft_history",e.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then(function(t){var n=Object(r.a)(t,1)[0];n&&(e.setState({toolbarMenuAttention:n.description}),me.a.markAsShown(n),"auto_pub_answer"===n.guide_name&&Q.default.trackCardShow(e,{id:5738}))}),Q.default.trackCardShow(e,{id:5729,name:"回答"})}),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return e.state.isUploading||e.composition||e.syncDraft.isPending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval(function(){return e.setState({dateNow:Date.now()})},6e4);var i=this.props,s=i.question,c=i.answer,l=i.disclaimers,u=i.loadDisclaimers,d=i.settings,m=i.loadSettings;l||u(s.id),c&&!d&&m(c.id),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus.bind(this),hasVideo:this.hasVideo.bind(this)})}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.state,a=e.currentUser,r={};if(n.reshipmentSettings||void 0===a.caEnabled||(r.reshipmentSettings=a.caEnabled?"need_payment":"allowed"),t.isCheckedCircle!==n.isChecked&&this.setState({isChecked:t.isCheckedCircle}),n.commentPermission||void 0===a.lastCommentPermission||(r.commentPermission=a.lastCommentPermission),Object.keys(r).length&&this.setState(r),!this.draftLoaded){if(!this.state.draft&&!this.props.draft&&e.draft){var o=e.draft.editableContent;o&&(this.setState({draft:o,isEmpty:!o}),this.editable&&!this.editable.toHTML()&&this.editable.resetWithValue(o)),this.draftLoaded=!0}e.settings&&!this.props.settings&&this.setState({isDisclaimerChecked:Ye(e.settings)})}}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.focusing;if(this.props.tagline){var n=_.a.get("rewardNotication");t&&!n&&(this.setState({rewardNotication:!1}),_.a.set("rewardNotication",!0),this.timeout=setTimeout(function(){e.setState({rewardNotication:!0})},2e3))}}},{key:"componentWillUnmount",value:function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"setUseScheduledPublish",value:function(e,t){var n=this;if(e)if(t)this.setState({scheduledPublishAt:t});else{var a=w.addMinutes(new Date,30);this.setState({initialScheduledPublishAt:a,scheduledPublishAt:a})}else L.a.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then(function(){n.setState({scheduledPublishAt:void 0}),Q.default.trackEvent(n,{action:"Click",id:5737,name:"回答"})}).catch(function(){Q.default.trackEvent(n,{action:"Click",id:5736,name:"回答"})}),Q.default.trackCardShow(this,{id:5735,name:"回答"})}},{key:"getCloneContent",value:function(){return this.editable.state.editorState.getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,a=e.deleteDraft;n&&a(t.id)}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(He).map(function(n){var a=Object(Be.a)(n,e);return h.a.createElement(I.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(Be.b)(n,e)},a&&h.a.createElement(R.a,{className:"Button-icon",name:a}),He[n])})}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.draft,a=t.isReediting,r=t.switches,o=t.rewardTagline,i=t.question,s=i.commercial,c=i.relationship,l=(c=void 0===c?{}:c).isAnonymous,u=i.circleInfo,d=(u=void 0===u?{}:u).canWriteCircle,m=t.answer,p=t.disclaimers,f=t.settings,v=this.state,g=v.checked,w=v.commentPermission,E=v.focusing,C=v.isEmpty,k=v.isTyping,O=v.isChecked,j=v.isFullscreen,N=v.loadingShown,S=v.reshipmentSettings,A=v.rewardNotication,x=v.rewardModalShown,L=v.rewardTagline,q=v.selectedText,_=v.dateNow,z=v.isDisclaimerChecked,B=v.scheduledPublishAt,Q=null;if(N)Q=h.a.createElement(M.a,{count:3});else if(q)Q="".concat(q.length," 个字");else if(n){var U=null;U=n.updating||k?"草稿保存中…":n.updated&&_<1e3*n.updatedTime+6e4?"草稿已保存":n.updateFailed?h.a.createElement("span",{className:"AnswerForm-draftStatus--failed"},"草稿保存失败"):y()(Ve(),Object(D.toRelativeString)(n.updatedTime)),Q=h.a.createElement("div",null,h.a.createElement(T.c,{preset:"plain",className:"AnswerForm-delete","aria-label":"删除草稿","data-tooltip":"删除草稿",onClick:this.onDeleteDraftModalShow},h.a.createElement(R.a,{name:"delete"})),U)}else s&&s.tip&&s.tip.message&&(Q=s.tip.message);var F=h.a.createElement("div",{className:b()("AnswerForm-footer",{"AnswerForm-footer--hidden":!j&&!E&&C})},h.a.createElement("div",{className:"AnswerForm-footerContent AnswerForm-container"},h.a.createElement("div",{className:"AnswerForm-status"},Q),h.a.createElement("div",{className:"AnswerForm-footerRight"},a?h.a.createElement("a",{className:"AnswerForm-cancel",onClick:this.onCancel},n?"保存草稿并离开":"取消"):h.a.createElement(I.c,{toggler:h.a.createElement(T.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t}},h.a.createElement(R.a,{left:!0,name:"setting"}),"设置"),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(S),h.a.createElement(I.a,null),h.a.createElement(Ie.c,{onChange:this.handleChangeCommentPermission,current:w})),h.a.createElement(T.c,{className:"AnswerForm-submit",preset:"primary",color:"blue",onClick:this.handleSubmit},a?"提交修改":B?"定时发送":"提交回答"))),h.a.createElement("div",{className:"AnswerForm-footerContent AnswerForm-container"},p&&Boolean(p.length)&&(!m||f)&&h.a.createElement(le,{disclaimers:p,checked:z,onChange:this.onChangeDisclaimerSettings}),!l&&d&&h.a.createElement(de,{isChecked:O,handleChange:this.onChangecircleSettings}),r.isAnswerRewardable&&h.a.createElement("div",{className:"AnswerForm-openRewardButton"},h.a.createElement("label",{className:"AnswerForm-openRewardLabel",ref:function(t){e.label=t},htmlFor:"AnswerForm-openRewardInput"},h.a.createElement("input",{type:"checkbox",id:"AnswerForm-openRewardInput",checked:g,onChange:this.onChangerewardSettings}),"开启赞赏"),x&&h.a.createElement(fe.a,{submitRewardText:this.onSubmitReward,onClose:this.unactivateReward,tagline:L||o,edit:!1}),!A&&h.a.createElement("span",{className:"AnswerForm-Notication"},"你的回答可以开启赞赏了"))));return!j?h.a.createElement(P.a,{bottom:!0,container:function(){return e.form}},F):F}},{key:"render",value:function(){var e=this,t=this.props,n=t.bordered,a=t.className,r=t.defaultValue,o=t.draft,i=t.isReediting,s=t.question,c=t.currentUser,l=t.isPuQuestion,u=this.state,d=u.deleteDraftModalShown,m=u.isFullscreen,p=u.isToolbarSticky,f=u.isLeaveActive,v=u.toolbarMenuAttention,g=u.draftHistoryModalShown,y=u.initialScheduledPublishAt,E=u.scheduledPublishAt,C="".concat(i?"修改":"写","回答...");if("commercial"===s.questionType){var k=l?"大咖提问":"品牌提问";C="这是一个「".concat(k,"」，请在回答前了解：「").concat(k,"」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。")}var O=h.a.createElement(he.a,{className:b()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:p}),onRef:function(t){e.editable=t},large:!0,spread:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:!0,allowUploadDocument:!0,allowVideoTitleChange:!0,allowReference:!0,allowHeaderThree:!1,allowToolbarSticky:!m,toolbarStickyOffset:Fe.f,getToolbarPlugins:this.getToolbarPlugins,getToolbarMenuPlugins:this.getToolbarMenuPlugins,toolbarMenuAttention:v,toolbarProps:{menuCallout:E&&y&&h.a.createElement(x.b,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){e.setUseScheduledPublish(!1),Q.default.trackEvent(e,{action:"Click",id:5734,name:"回答"})}},"发布时间：",h.a.createElement(Z,{onRef:function(t){return e.dateTimePicker_=t},value:y,min:y,max:w.addDays(y,7),onChange:function(t,n){e.setUseScheduledPublish(!0,t),Q.default.setModule(e.dateTimePicker_,{module:"Unknown",module_name:n.date?"日期":n.hours?"小时":n.minutes?"分钟":void 0}),Q.default.trackEvent(e.dateTimePicker_,{action:"Click",id:5731,name:"文章"})}}),h.a.createElement("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"}},h.a.createElement(S.a,{text:!0,center:!0})," 管理待发布内容"))},minRows:3,placeholder:C,defaultValue:o?o.editableContent:r,onChange:this.onChangeContent,onAfterChange:this.onAfterChangeContent,onFocus:this.onFocusWithAuth,onSelectText:this.onSelectText,onSubmit:this.handleSubmit,onError:this.handleError,onLoadStart:this.onLoadStart,onLoadEnd:this.onLoadEnd,onUploadStart:this.handleUploadStart,onUploadEnd:this.handleUploadEnd,onUploadError:this.handleUploadError,onBeforeVideoUpload:this.handleBeforeVideoUpload,logo:Ue.a,location:s.title,editingContentType:"answer"});return h.a.createElement(X.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(s.id),author_member_hash_id:c.id}},h.a.createElement("form",{ref:function(t){e.form=t},className:b()("AnswerForm",a,{"AnswerForm--bordered":n}),onSubmit:function(e){return e.preventDefault()},noValidate:!0},m&&h.a.createElement("div",{className:b()("AnswerForm-fullscreenBackdrop",{isLeaveActive:f})}),h.a.createElement("div",{className:b()({"AnswerForm-fullscreenContent":m,isLeaveActive:f}),ref:function(t){return e.fullscreenContent=t}},h.a.createElement("div",{className:b()({"AnswerForm-fullscreenScroller":m}),ref:function(t){return e.scroller=t},onScroll:this.handleScroll},m&&h.a.createElement("div",{className:"AnswerForm-container",ref:this.handleFullscreenRef},h.a.createElement("div",{className:"AnswerForm-title"},s.title)),m&&h.a.createElement(T.c,{className:"AnswerForm-exitFullscreenButton",onClick:this.exitFullscreen,onMouseDown:function(e){return e.preventDefault()}},h.a.createElement(A.a,{text:!0,center:!0})," 退出全屏模式"),O),this.renderFooter()),m&&h.a.cloneElement(O,{readOnly:!0,className:"AnswerForm-cloneEditor",defaultValue:this.getCloneContent(),allowToolbarSticky:!1,toolbarMenuAttention:null,onRef:function(t){return e.cloneEditor=t}}),"org"===s.questionType&&h.a.createElement(ne,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),"commercial"===s.questionType&&h.a.createElement(oe,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),h.a.createElement(pe.a,{title:"清除草稿",subtitle:i?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:d,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),h.a.createElement(Re,{shown:g,onClose:this.hideDraftHistoryModal,type:"question",id:s.id,onReverted:this.handleReverted})))}}]),t}(p.Component),Ae.propTypes={question:m.a.object,bordered:m.a.bool,isReediting:m.a.bool,defaultValue:m.a.string},Ae.defaultProps={bordered:!1,isReediting:!1},Ae.contextTypes={authRequired:m.a.func,isCheckedCircle:m.a.bool,onChangecircleSettings:m.a.func},Se=Te))||Se;t.a=$e},2148:function(e,t,n){"use strict";var a,r,o,i=function(e){return e.componentList.filter(function(e){var t=e.component;return Boolean(t)}).map(function(e){return e.component})},s=n(0),c=n.n(s),l=n(3),u=n(4),d=n(7),m=n(5),p=n(6),h=n(9),f=n(1),v=n.n(f),b=n(17),g=n(44),y=n.n(g),w=n(15),E=n(1999),C=n(16),k=(n(50),n(61)),O=n(133),j=n(152),N=n(19),S={answer:v.a.object.isRequired,renderThankButtonText:v.a.func,zaInfo:v.a.number},A=[].concat(Object(h.a)(Object.keys(S)),["updateAnswerThank"]),T=Object(O.a)(null)((o=r=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).buttonRef=c.a.createRef(),n.handleUpdateThanked=n.context.authRequired(function(){var e=n.props,t=e.answer,a=t.id,r=t.relationship.isThanked,o=e.updateAnswerThank,i=e.zaInfo,s=!r;w.default.trackEvent(n.buttonRef.current,Object.assign({action:s?"Thank":"UnThank",element:"Button"},i&&{id:i})),o(a,s)},N.N.thank),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,a=t.renderThankButtonText,r=y()(this.props,A),o=a(n);return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.c,{keyMap:{THANK:"t"},handlers:{THANK:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}}),c.a.createElement(C.c,Object.assign({onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:E.a,label:o},r)))}}]),t}(c.a.Component),r.contextTypes={authRequired:v.a.func},r.propTypes=S,r.defaultProps={renderThankButtonText:function(e){var t=e.relationship;return(t=void 0===t?{}:t).isThanked?"取消感谢":"感谢"}},a=o))||a,R=Object(b.connect)(null,{updateAnswerThank:k.H})(T);n.d(t,"b",function(){return i}),n.d(t,"a",function(){return R})},2150:function(e,t,n){"use strict";var a,r=n(3),o=n(4),i=n(7),s=n(5),c=n(6),l=n(0),u=n.n(l),d=n(17),m=n(2040),p=n.n(m),h=n(872),f=n.n(h),v=n(154),b=n(542);var g=Object(d.connect)(function(e){return{ua:e.env.userAgent}},{loadBrandEntityTrackUrl:b.b})(a=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={urls:null,logged:!1},n.handleObserve=function(e){e&&n.log()},n.log=function(){n.state.logged||Promise.resolve(n.state.urls||n.load().then(function(e){return e?(e=n.normalize(e),n.setState({urls:e}),e):[]})).then(function(e){return e.forEach(function(e){return e&&Object(v.c)(e)})}).then(function(){return n.setState({logged:!0})})},n.load=function(){var e=n.props,t=e.type,a=e.id;return(0,e.loadBrandEntityTrackUrl)({type:t,id:a}).then(function(e){return e&&e.payload&&e.payload.data})},n.normalize=function(e){var t=f()(),a=n.props,r=a.ua,o=a.id,i=a.type,s=encodeURIComponent("其他");r.Android?s="android":r.iOS&&(s="ios");var c={os:s,id:o,sessionId:t,type:i};return e.map(function(e){return function(e,t){var n=t.os,a=t.id,r=t.sessionId,o=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",r).replace("__SESSIONID__",r).replace("__ATOKEN__",a).replace("__AID__",a).replace("__PAGETYPE__",o)}(e,c)})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return!this.state.logged&&u.a.createElement(p.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),t}(l.Component))||a;n.d(t,"a",function(){return g})},2151:function(e,t,n){},2152:function(e,t,n){},2153:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M18.453 7.992l-1.833-1.65.964-.978a1.223 1.223 0 0 1 1.73-.012l.005.006a1.24 1.24 0 0 1 .007 1.748l-.873.886zm-1.178 1.194l-5.578 5.66-1.935.697a.393.393 0 0 1-.504-.504l.697-1.935 5.488-5.567 1.832 1.65zM7.58 5.848l5.654.006-1.539 1.991-3.666.012A1.02 1.02 0 0 0 7 8.868v7.993c0 .558.46 1.01 1.029 1.01l7.941-.01c.568 0 1.03-.453 1.03-1.012v-4.061l2-1.442v6.002c0 1.397-1.2 2.501-2.62 2.501H7.574C6.153 19.85 5 18.717 5 17.32V8.35c0-1.397 1.16-2.502 2.58-2.502z"}))};i.defaultProps={name:"EditSurround"},t.a=i},2154:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M6 3.956v16.088C6 21.124 6.517 22 7.9 22c.326 0 .533-.087.896-.236L22 13.784c.571-.355 1.143-.87 1.143-1.784S22.57 10.571 22 10.216L8.796 2.236C8.433 2.087 8.226 2 7.9 2 6.514 2 6 2.876 6 3.956z"}))};i.defaultProps={name:"Play"},t.a=i},2156:function(e,t,n){},2157:function(e,t,n){},2158:function(e,t,n){},2159:function(e,t,n){e.exports=n.p+"assets/liukanshan_loudspeaker.292ada3b.svg"},2160:function(e,t,n){},2161:function(e,t,n){},2162:function(e,t,n){},2163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2164);t.debounce=a.debounce},2164:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(153));t.debounce=function(e,t,n){var a=!1,o=r.default(function(){a=!1,e.apply(void 0,arguments)},t,n);return Object.assign(function(){a=!0,o.apply(void 0,arguments)},{cancel:o.cancel,flush:o.flush,isPending:function(){return a}})}},2165:function(e,t,n){var a=n(2166),r=n(2097),o=n(527),i=n(535);e.exports=function(e,t,n){e=i(e);var s=(t=o(t))?r(e):0;return t&&s<t?a(t-s,n)+e:e}},2166:function(e,t,n){var a=n(2167),r=n(879),o=n(2168),i=n(2062),s=n(2097),c=n(2171),l=Math.ceil;e.exports=function(e,t){var n=(t=void 0===t?" ":r(t)).length;if(n<2)return n?a(t,e):t;var u=a(t,l(e/s(t)));return i(t)?o(c(u),0,e).join(""):u.slice(0,e)}},2167:function(e,t){var n=9007199254740991,a=Math.floor;e.exports=function(e,t){var r="";if(!e||t<1||t>n)return r;do{t%2&&(r+=e),(t=a(t/2))&&(e+=e)}while(t);return r}},2168:function(e,t,n){var a=n(536);e.exports=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:a(e,t,n)}},2169:function(e,t,n){var a=n(880)("length");e.exports=a},2170:function(e,t){var n="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+a+"|"+r+")"+"?",l="[\\ufe0e\\ufe0f]?"+c+("(?:\\u200d(?:"+[o,i,s].join("|")+")[\\ufe0e\\ufe0f]?"+c+")*"),u="(?:"+[o+a+"?",a,i,s,n].join("|")+")",d=RegExp(r+"(?="+r+")|"+u+l,"g");e.exports=function(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}},2171:function(e,t,n){var a=n(2172),r=n(2062),o=n(2173);e.exports=function(e){return r(e)?o(e):a(e)}},2172:function(e,t){e.exports=function(e){return e.split("")}},2173:function(e,t){var n="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+a+"|"+r+")"+"?",l="[\\ufe0e\\ufe0f]?"+c+("(?:\\u200d(?:"+[o,i,s].join("|")+")[\\ufe0e\\ufe0f]?"+c+")*"),u="(?:"+[o+a+"?",a,i,s,n].join("|")+")",d=RegExp(r+"(?="+r+")|"+u+l,"g");e.exports=function(e){return e.match(d)||[]}},2174:function(e,t,n){var a=n(2041)();e.exports=a},2175:function(e,t,n){},2176:function(e,t,n){},2177:function(e,t,n){},2178:function(e,t,n){},2179:function(e,t,n){"use strict";var a=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=a(n(71)),i=function(e){return r.default.createElement(o.default,Object.assign({width:"150",height:"120",viewBox:"0 0 150 120"},e),r.default.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0 0 98.998 28H50.002A2.996 2.996 0 0 0 47 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0 1 44 93V30.997A5.996 5.996 0 0 1 50.002 25h48.996A5.996 5.996 0 0 1 105 30.998V93a2 2 0 0 1-.396 1.2l-4.112-2.66z"}),r.default.createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 0 1-.999.999H56a.993.993 0 0 1-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 1 1 0 3h-35.99A1.499 1.499 0 0 1 55 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 1 1 0 3h-24.99A1.499 1.499 0 0 1 55 75.5z"}))};t.default=i},2180:function(e,t,n){},2181:function(e,t,n){},2182:function(e,t,n){},2183:function(e,t,n){},2184:function(e,t,n){},2185:function(e,t,n){},2186:function(e,t,n){},2187:function(e,t,n){},2188:function(e,t,n){},2189:function(e,t,n){},2190:function(e,t,n){},2191:function(e,t,n){},2192:function(e,t,n){var a=n(2193);e.exports=function(e){return a(2,e)}},2193:function(e,t,n){var a=n(2194),r="Expected a function";e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError(r);return e=a(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},2194:function(e,t,n){var a=n(2195);e.exports=function(e){var t=a(e),n=t%1;return t==t?n?t-n:t:0}},2195:function(e,t,n){var a=n(2196),r=1/0,o=1.7976931348623157e308;e.exports=function(e){return e?(e=a(e))===r||e===-r?(e<0?-1:1)*o:e==e?e:0:0===e?e:0}},2196:function(e,t,n){var a=n(230),r=n(386),o=NaN,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return o;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=c.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):s.test(e)?o:+e}},2197:function(e,t,n){},2198:function(e,t,n){},2199:function(e,t,n){},2200:function(e,t,n){},2201:function(e,t,n){},2202:function(e,t,n){},2203:function(e,t,n){},2204:function(e,t,n){},2205:function(e,t,n){},2206:function(e,t,n){},2207:function(e,t,n){},2208:function(e,t,n){"use strict";var a=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=a(n(71)),i=function(e){return r.default.createElement(o.default,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18"},e),r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("path",{fill:"#C2A469",d:"M12.17 2.18l2.077.372c.613.11 1.092.588 1.201 1.2l.372 2.079c.038.211.12.412.243.588L17.27 8.15c.356.51.356 1.188 0 1.698l-1.207 1.732a1.485 1.485 0 0 0-.243.588l-.372 2.078a1.485 1.485 0 0 1-1.2 1.201l-2.079.372c-.211.038-.412.12-.588.243L9.85 17.27a1.485 1.485 0 0 1-1.698 0l-1.732-1.207a1.485 1.485 0 0 0-.588-.243l-2.078-.372a1.485 1.485 0 0 1-1.201-1.2l-.372-2.079a1.485 1.485 0 0 0-.243-.588L.73 9.85a1.485 1.485 0 0 1 0-1.698l1.207-1.732c.122-.176.205-.377.243-.588l.372-2.078a1.485 1.485 0 0 1 1.2-1.201l2.079-.372c.211-.038.412-.12.588-.243L8.15.73a1.485 1.485 0 0 1 1.698 0l1.732 1.207.588.243z"}),r.default.createElement("path",{fill:"#FFF",d:"M9 11c-.481 0-.893-.19-1.236-.571a1.982 1.982 0 0 1-.514-1.373V5.945c0-.535.171-.993.514-1.374C8.107 4.191 8.52 4 9 4s.893.19 1.236.571c.343.381.514.839.514 1.374v3.11c0 .535-.171.993-.514 1.374-.343.38-.755.571-1.236.571zm3.143-2.889a.367.367 0 0 1 .107.264v.75c0 .863-.278 1.614-.832 2.253-.555.639-1.24 1.005-2.057 1.098v1.774c.002.2-.119.301-.361.301s-.363-.1-.361-.301v-1.774c-.816-.093-1.502-.46-2.057-1.098a3.326 3.326 0 0 1-.832-2.253v-.75c0-.102.036-.19.107-.264A.34.34 0 0 1 6.111 8a.34.34 0 0 1 .254.111.367.367 0 0 1 .107.264v.75c0 .723.248 1.341.742 1.854.495.514 1.09.771 1.786.771s1.291-.257 1.786-.77a2.578 2.578 0 0 0 .742-1.855v-.75c0-.102.035-.19.107-.264A.341.341 0 0 1 11.889 8c.098 0 .182.037.254.111z"})))};t.default=i},2210:function(e,t,n){"use strict";var a,r,o,i=n(3),s=n(4),c=n(7),l=n(5),u=n(6),d=n(1),m=n.n(d),p=n(0),h=n.n(p),f=n(134),v=n(60),b=n(38),g=n(262),y=n(2028),w=n(2029),E=n(118),C=n(2021),k=n(91),O=n(180),j=(n(2257),Object(O.a)(function(e){var t=e.favlist,n=e.trackCardShow,a=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:a}})((o=r=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},n.handleCommentsShown=function(e,t){n.setState(t)},n.handleCommentsHide=function(){n.setState({commentsShown:!1})},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.favlist,r=t.favlist,o=r.id,i=r.type,s=r.title,c=r.updatedTime,l=r.answerCount,u=r.followerCount,d=r.isFollowing,m=r.isPublic,p=r.creator,O=void 0===p?{}:p,j=r.commentCount,N=t.status,S=t.action,A=t.lastreadTouchable,T=t.zaInfos,R=T.follow,I=T.options,x=t.renderOptions,P=this.state,M=P.commentsShown,L=P.commentsAutoFocus,D=P.commentPattern,q="/collection/".concat(o),_=h.a.createElement("a",{href:q,target:"_blank"},s);if(n===g.c.plain)return h.a.createElement(g.e,{data:a,link:q,title:_});var z={id:o,type:i};return n===g.c.default?h.a.createElement(g.e,{data:a,link:q,title:h.a.createElement("div",{className:"FavlistItem-title"},_,!m&&h.a.createElement(b.a,{grey:!0,className:"FavlistItem-lockIcon",name:"lock"})),meta:N||h.a.createElement(g.d,null,"".concat(Object(f.toDateString)(c)," 更新"),"".concat(Object(v.formatNumber)(l)," 条内容"),"".concat(Object(v.formatNumber)(u)," 人关注")),extra:S}):h.a.createElement(g.e,{data:a,link:q,onRef:function(t){e.contentItem=t},title:_,lastreadTouchable:A},h.a.createElement(g.b,{key:"favlist-item-cells"},h.a.createElement("div",null,h.a.createElement("span",null,"关注数："),Object(v.formatNumber)(u)),h.a.createElement("div",null,h.a.createElement("span",null,"最后更新于："),Object(f.toDateString)(c)),h.a.createElement("div",null,h.a.createElement("span",null,"作者："),h.a.createElement(k.a,{user:O}))),h.a.createElement(g.a,{key:"favlist-item-actions"},h.a.createElement(E.a,Object.assign({},z,{isFollowing:d,zaId:R})),h.a.createElement(y.a,{onClick:this.handleCommentsShown,commentsShown:M,count:j}),h.a.createElement(C.a,Object.assign({},z,{title:s,authorName:O&&O.name})),x&&x(function(){return e.contentItem},I)),h.a.createElement(w.a,{parent:a,commentPattern:D,shown:M,autoFocus:L,onClose:this.handleCommentsHide}))}}]),t}(p.Component),r.propTypes={preset:m.a.oneOf(Object.values(g.c)),zaInfos:m.a.shape({follow:m.a.number,options:m.a.number}),renderOptions:m.a.func},r.defaultProps={preset:g.c.default,zaInfos:{}},a=o))||a);t.a=j},2219:function(e,t,n){"use strict";var a=o(n(2234)),r=o(n(2142));function o(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:r.default,CSSTransitionGroup:a.default}},2221:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-3.681a1.17 1.17 0 0 1-.846-.344 1.143 1.143 0 0 1-.354-.856c0-.328.118-.61.354-.847.236-.235.518-.353.846-.353.328 0 .61.115.846.344.236.23.354.515.354.856 0 .342-.118.626-.354.856-.236.229-.518.344-.846.344zm2.761-7.398c-.228.232-.637.621-1.227 1.17-.163.154-.295.29-.393.407a1.643 1.643 0 0 0-.22.32 1.614 1.614 0 0 0-.111.293c-.026.097-.066.267-.119.512-.09.518-.377.777-.857.777a.86.86 0 0 1-.63-.254c-.17-.17-.255-.421-.255-.755 0-.419.062-.78.187-1.087.125-.307.29-.576.497-.808.206-.231.485-.506.835-.825.307-.28.53-.49.666-.632.137-.142.252-.3.346-.474.093-.175.14-.364.14-.568 0-.399-.143-.735-.428-1.01-.286-.273-.655-.41-1.106-.41-.528 0-.917.138-1.166.414-.25.277-.46.684-.634 1.222-.163.563-.472.845-.928.845a.896.896 0 0 1-.68-.295c-.185-.197-.278-.41-.278-.64 0-.473.147-.952.44-1.438.292-.486.72-.888 1.28-1.207C10.683 6.16 11.339 6 12.087 6c.696 0 1.31.133 1.844.4a3.02 3.02 0 0 1 1.234 1.087c.291.459.436.957.436 1.495 0 .423-.083.794-.248 1.113a3.413 3.413 0 0 1-.59.826z",fillRule:"evenodd"}))};i.defaultProps={name:"Help"},t.a=i},2226:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(8),p=n.n(m),h=n(1994),f=n(1993),v=n(1995),b=n(516),g=(n(543),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t,n=this.props,a=n.isOrg,r=n.badge,o=n.noLink,i=n.className,s=n.iconClassName,c=Object(b.a)(r)||{},l=c.identityInfo,u=c.bestAnswererInfo,m="https://www.zhihu.com/question/48509984";if(l?(e=h.a,t=void 0===a?"已认证的帐号":a?"已认证的官方帐号":"已认证的个人",u?(e=f.a,t="".concat(u," · ").concat(t)):m="https://www.zhihu.com/question/48510028"):u&&(e=v.a,t=u),!e)return null;var g={className:p()("UserLink-badge",i),"data-tooltip":t,children:d.a.createElement(e,{center:!0,size:18,className:s})};return o?d.a.createElement("span",g):d.a.createElement("a",Object.assign({},g,{href:m,target:"_blank"}))}}]),t}(u.Component));g.propTypes={badge:l.a.array,isOrg:l.a.bool,noLink:l.a.bool,className:l.a.string,iconClassName:l.a.string}},2231:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(9),l=n(0),u=n.n(l),d=n(8),m=n.n(d),p=n(16),h=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).handleClick=function(){var e=n.props;(0,e.onSelect)(e.page)},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isCurrent,a=e.className;return u.a.createElement(p.c,{preset:p.b.Plain,className:m()("PaginationButton",{"PaginationButton--current":n},a),onClick:this.handleClick,disabled:n},t)}}]),t}(l.Component),f=(n(2262),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from({length:t},function(t,n){return n+e})}),v=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.onSelect,a=t.className,r=t.clickCallback,o=this.props.current,i=this.props.total,s=r&&(e=r,function(){e.apply(void 0,arguments)})||n,l=function(e,t){var n="...";return t<=5?f(1,t):e>t-3?[1,n].concat(Object(c.a)(f(t-3,3)),[t]):e<=3?[1].concat(Object(c.a)(f(2,3)),[n,t]):[1,n].concat(Object(c.a)(f(e-Math.floor(1.5),3)),[n,t])}(o,i);return u.a.createElement("div",{className:m()("Pagination",a)},o>1&&o<=i&&u.a.createElement(h,{className:"PaginationButton-prev",onSelect:s,text:"上一页",page:o-1}),l.map(function(e,t){return"number"==typeof e?u.a.createElement(h,{onSelect:s,text:e,page:e,key:t,isCurrent:o===e}):u.a.createElement("button",{disabled:!0,key:t,className:"PaginationButton PaginationButton--ellipsis"},e)}),o>0&&o<i&&u.a.createElement(h,{className:"PaginationButton-next",onSelect:s,text:"下一页",page:o+1}))}}]),t}(l.Component);v.defaultProps={current:1,total:1,onSelect:function(){}},n.d(t,"a",function(){return v})},2233:function(e,t,n){"use strict";var a=n(22),r=n(3),o=n(4),i=n(7),s=n(5),c=n(6),l=n(0),u=n.n(l),d=n(8),m=n.n(d),p=(n(2400),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.alt,r=Object(a.a)(e,["className","alt"]);return u.a.createElement("img",Object.assign({className:m()("ImageAlias",t),alt:n},r))}}]),t}(l.Component));t.a=p},2234:function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=l(n(0)),o=l(n(2068)),i=l(n(2142)),s=l(n(2240)),c=n(2143);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}c.nameShape.isRequired,o.default.bool,o.default.bool,o.default.bool,(0,c.transitionTimeout)("Appear"),(0,c.transitionTimeout)("Enter"),(0,c.transitionTimeout)("Leave");var d=function(e){function t(){var n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),c=0;c<o;c++)i[c]=arguments[c];return n=a=u(this,e.call.apply(e,[this].concat(i))),a._wrapChild=function(e){return r.default.createElement(s.default,{name:a.props.transitionName,appear:a.props.transitionAppear,enter:a.props.transitionEnter,leave:a.props.transitionLeave,appearTimeout:a.props.transitionAppearTimeout,enterTimeout:a.props.transitionEnterTimeout,leaveTimeout:a.props.transitionLeaveTimeout},e)},u(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return r.default.createElement(i.default,a({},this.props,{childFactory:this._wrapChild}))},t}(r.default.Component);d.displayName="CSSTransitionGroup",d.propTypes={},d.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=d,e.exports=t.default},2235:function(e,t,n){"use strict";var a=n(381),r=n(376),o=n(2236);e.exports=function(){function e(e,t,n,a,i,s){s!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n,n}},2236:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2237:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter(function(e){return null!=e})).length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},2238:function(e,t,n){e.exports=n(46)(21)},2239:function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return a.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var a={},r=[];for(var o in e)t.hasOwnProperty(o)?r.length&&(a[o]=r,r=[]):r.push(o);var i=void 0,s={};for(var c in t){if(a.hasOwnProperty(c))for(i=0;i<a[c].length;i++){var l=a[c][i];s[a[c][i]]=n(l)}s[c]=n(c)}for(i=0;i<r.length;i++)s[r[i]]=n(r[i]);return s};var a=n(0)},2240:function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=m(n(2241)),o=m(n(2243)),i=m(n(882)),s=n(2244),c=m(n(0)),l=m(n(2068)),u=n(28),d=n(2143);function m(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=[];s.transitionEnd&&h.push(s.transitionEnd),s.animationEnd&&h.push(s.animationEnd);l.default.node,d.nameShape.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.number,l.default.number;var f=function(e){function t(){var n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=p(this,e.call.apply(e,[this].concat(o))),a.componentWillAppear=function(e){a.props.appear?a.transition("appear",e,a.props.appearTimeout):e()},a.componentWillEnter=function(e){a.props.enter?a.transition("enter",e,a.props.enterTimeout):e()},a.componentWillLeave=function(e){a.props.leave?a.transition("leave",e,a.props.leaveTimeout):e()},p(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var a=(0,u.findDOMNode)(this);if(a){var i=this.props.name[e]||this.props.name+"-"+e,c=this.props.name[e+"Active"]||i+"-active",l=null,d=void 0;(0,r.default)(a,i),this.queueClassAndNode(c,a);var m=function(e){e&&e.target!==a||(clearTimeout(l),d&&d(),(0,o.default)(a,i),(0,o.default)(a,c),d&&d(),t&&t())};n?(l=setTimeout(m,n),this.transitionTimeouts.push(l)):s.transitionEnd&&(d=function(e,t){return h.length?h.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){h.length&&h.forEach(function(n){return e.removeEventListener(n,t,!1)})}}(a,m))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,i.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,r.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=a({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,c.default.cloneElement(c.default.Children.only(this.props.children),e)},t}(c.default.Component);f.displayName="CSSTransitionGroupChild",f.propTypes={},t.default=f,e.exports=t.default},2241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var a,r=n(2242),o=(a=r)&&a.__esModule?a:{default:a};e.exports=t.default},2242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},2243:function(e,t,n){"use strict";function a(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=a(e.className,t):e.setAttribute("class",a(e.className&&e.className.baseVal||"",t))}},2244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var a,r=n(390);var o="transform",i=void 0,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0,m=void 0,p=void 0,h=void 0,f=void 0,v=void 0;if(((a=r)&&a.__esModule?a:{default:a}).default){var b=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),a=void 0,r=void 0,o="",i=0;i<n.length;i++){var s=n[i];if(s+"TransitionProperty"in e){o="-"+s.toLowerCase(),a=t[s]("TransitionEnd"),r=t[s]("AnimationEnd");break}}!a&&"transitionProperty"in e&&(a="transitionend");!r&&"animationName"in e&&(r="animationend");return e=null,{animationEnd:r,transitionEnd:a,prefix:o}}();i=b.prefix,t.transitionEnd=s=b.transitionEnd,t.animationEnd=c=b.animationEnd,t.transform=o=i+"-"+o,t.transitionProperty=l=i+"-transition-property",t.transitionDuration=u=i+"-transition-duration",t.transitionDelay=m=i+"-transition-delay",t.transitionTiming=d=i+"-transition-timing-function",t.animationName=p=i+"-animation-name",t.animationDuration=h=i+"-animation-duration",t.animationTiming=f=i+"-animation-delay",t.animationDelay=v=i+"-animation-timing-function"}t.transform=o,t.transitionProperty=l,t.transitionTiming=d,t.transitionDelay=m,t.transitionDuration=u,t.transitionEnd=s,t.animationName=p,t.animationDuration=h,t.animationTiming=f,t.animationDelay=v,t.animationEnd=c,t.default={transform:o,end:s,property:l,timing:d,delay:m,duration:u}},2248:function(e,t,n){"use strict";function a(e){return/^[a-z0-9]{32}$/.test(e)}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var r=/#comment-(\d+)/;function o(e){var t=e.match(r);return t&&t[1]}},2249:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{fill:"#FB6622",d:"M15.518 3.06c8.834-.854 7.395 7.732 7.394 7.731-.625 1.439-1.673.309-1.673.309.596-7.519-5.692-6.329-5.692-6.329-.898-1.067-.029-1.711-.029-1.711zm4.131 6.985c-.661 1.01-1.377.126-1.376.126.205-3.179-2.396-2.598-2.396-2.598-.719-.765-.091-1.346-.091-1.346 4.882-.551 3.863 3.818 3.863 3.818zM5.317 7.519s4.615-3.86 6.443-1.328c0 0 .662 1.08-.111 2.797.003-.003 3.723-1.96 5.408.159 0 0 .848 1.095-.191 2.649 0 0 2.918-.099 2.918 2.715 0 2.811-4.104 6.44-9.315 6.44-5.214 0-8.026-2.092-8.596-3.102 0 0-3.475-4.495 3.444-10.33zm10.448 7.792s.232-4.411-5.71-4.207c-6.652.231-6.579 4.654-6.579 4.654.021.39.097 3.713 5.842 3.713 5.98 0 6.447-4.16 6.447-4.16zm-9.882.86s-.059-3.632 3.804-3.561c3.412.06 3.206 3.165 3.206 3.165s-.026 2.979-3.684 2.979c-3.288 0-3.326-2.583-3.326-2.583zm2.528 1.037c.672 0 1.212-.447 1.212-.998 0-.551-.543-.998-1.212-.998-.672 0-1.215.447-1.215.998 0 .551.546.998 1.215.998z",fillRule:"evenodd"}))};i.defaultProps={name:"Weibo"},t.a=i},2250:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M2.224 21.667s4.24-1.825 4.788-2.056C15.029 23.141 22 17.714 22 11.898 22 6.984 17.523 3 12 3S2 6.984 2 11.898c0 1.86.64 3.585 1.737 5.013-.274.833-1.513 4.756-1.513 4.756zm5.943-9.707c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272zm7.583 0c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272z",fillRule:"evenodd"}))};i.defaultProps={name:"WeChat"},t.a=i},2251:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M10.229 17.516c-.318.327-.75.484-1.199.484-.453 0-.884-.16-1.202-.488l-4.335-4.47a1.77 1.77 0 0 1 .007-2.459 1.663 1.663 0 0 1 2.397.01l3.137 3.246 9.072-9.329a1.662 1.662 0 0 1 2.397 0c.663.681.663 1.786 0 2.466L10.23 17.516z",fillRule:"evenodd"}))};i.defaultProps={name:"Check"},t.a=i},2252:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z",fillRule:"evenodd"}))};i.defaultProps={name:"TriangleUp"},t.a=i},2253:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z",fillRule:"evenodd"}))};i.defaultProps={name:"TriangleDown"},t.a=i},2256:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(38),i=function(e,t){return t>=e+1?"rating":t>=e+.5?"ratingHalf":"ratingNone"};t.a=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return r.a.createElement("div",{className:"Rating"},Array.from({length:5}).map(function(e,t){return r.a.createElement(o.a,{style:{marginLeft:0},key:t,width:15,height:15,name:i(t,n)})}))}},2257:function(e,t,n){},2262:function(e,t,n){},2278:function(e,t,n){},2281:function(e,t,n){},2294:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var a=n(2069),r=n(60),o=function(e){return{name:"description",property:"og:description",content:e}},i=function(e,t){if(e&&e.detail){var n=Object(a.b)(e.detail,100);if(n)return[o(n)]}else if(t&&t.content)return s(t);return[]},s=function(e){if(e&&e.content){var t=Object(a.b)(e.content,100);if(t)return[o(t)]}return[]},c=function(e){if(e){var t=e.headline,n=void 0===t?"":t,a=e.answerCount,i=void 0===a?0:a,s=e.voteupCount,c=void 0===s?0:s,l="".concat(n," 回答数 ").concat(Object(r.formatNumber)(i),"，获得 ").concat(Object(r.formatNumber)(c)," 次赞同");return[o(l)]}return[]}},2295:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z",fillRule:"evenodd"}))};i.defaultProps={name:"Comment"},t.a=i},2296:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M17.782 16.78a.737.737 0 0 1-1.052 0l-4.512-4.249a.758.758 0 0 1 0-1.063L16.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L14 12l3.782 3.716c.29.294.29.77 0 1.063zm-5 0a.737.737 0 0 1-1.052 0L7.218 12.53a.758.758 0 0 1 0-1.063L11.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L9 12l3.782 3.716c.29.294.29.77 0 1.063z",fillRule:"evenodd"}))};i.defaultProps={name:"DoubleArrowLeft"},t.a=i},2297:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M13.8 4.903h-3.6v.943c0 .314-.082.609-.228.864H13.8V4.903zm3.6 0h2.85c.414 0 .75.333.75.735v.337a.742.742 0 0 1-.75.735H17.4V4.903zm-10.8 0H3.75a.742.742 0 0 0-.75.735v.337c0 .404.336.735.75.735h3.082a1.721 1.721 0 0 1-.232-.864v-.943zM3 9.252c0-.407.335-.735.75-.735h16.5c.414 0 .75.33.75.737v10.274a.742.742 0 0 1-.75.736H3.75A.74.74 0 0 1 3 19.53V9.252zm4.5 1.975v1.807h1.8v-1.807H7.5zm0 4.516v1.807h1.8v-1.807H7.5zm3.6 0v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zm-3.6-4.516v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zM7.5 4.893c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893zm7.2 0c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893z"}))};i.defaultProps={name:"Calendar"},t.a=i},2298:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M20.227 3a.777.777 0 0 1 .773.773V8.67c-.062.432-.404.774-.801.772-.453-.003-.799-.347-.801-.772V5.758a2194.05 2194.05 0 0 0-4.584 4.583c-.975.983-2.136-.177-1.158-1.155 0 0 3.148-3.166 4.582-4.584h-2.93c-.496 0-.77-.413-.773-.801-.003-.462.339-.804.774-.801h4.918zM9.187 13.659c.974-.983 2.135.177 1.155 1.155 0 0-3.147 3.166-4.581 4.584h2.93c.494 0 .77.413.772.801.004.462-.338.804-.773.801H3.772A.776.776 0 0 1 3 20.229v-4.9c.062-.432.404-.774.801-.772.453.003.799.347.801.772v2.913c1.14-1.134 3.794-3.789 4.584-4.583z",fillRule:"evenodd"}))};i.defaultProps={name:"FullscreenEnter"},t.a=i},2299:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M19.472 3.373c.975-.982 2.136.177 1.158 1.157 0 0-3.148 3.165-4.581 4.584h2.928c.495 0 .77.412.773.8.004.462-.338.804-.773.802H14.06a.778.778 0 0 1-.773-.773v-4.9c.062-.432.404-.774.801-.771.453.002.798.347.801.771v2.913c1.14-1.134 3.793-3.789 4.583-4.583zm-9.53 9.913c.424.002.77.347.771.771v4.9c-.062.432-.404.774-.801.771-.453-.002-.798-.347-.801-.771v-2.913c-1.14 1.134-3.793 3.788-4.583 4.583-.975.982-2.136-.177-1.158-1.156 0 0 3.148-3.165 4.581-4.583H5.023c-.497 0-.772-.413-.774-.801-.003-.462.339-.804.774-.801h4.919z",fillRule:"evenodd"}))};i.defaultProps={name:"FullscreenExit"},t.a=i},2300:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-1.25a8.75 8.75 0 1 0 0-17.5 8.75 8.75 0 0 0 0 17.5zm0-2.431a1.17 1.17 0 0 1-.846-.344 1.143 1.143 0 0 1-.354-.856c0-.328.118-.61.354-.847.236-.235.518-.353.846-.353.328 0 .61.115.846.344.236.23.354.515.354.856 0 .342-.118.626-.354.856-.236.229-.518.344-.846.344zm1.534-6.228c-.163.154-.755.587-.843 1.532-.09.518-.377.777-.857.777a.86.86 0 0 1-.63-.254c-.17-.17-.255-.421-.255-.755 0-.419 0-1.055.684-1.895.206-.231.485-.506.835-.825.307-.28 1.158-.941 1.152-1.674a1.357 1.357 0 0 0-.428-1.01c-.286-.273-.655-.41-1.106-.41-.528 0-.917.138-1.166.414-.25.277-.46.684-.634 1.222-.163.563-.472.845-.928.845a.896.896 0 0 1-.68-.295c-.185-.197-.278-.41-.278-.64 0-.473.147-.952.44-1.438.292-.486.72-.888 1.28-1.207C10.683 6.16 11.339 6 12.087 6c.696 0 2.318.166 3.078 1.487.291.459.436.957.436 1.495 0 .423-.134 1.218-.839 1.94-.228.23-.637.62-1.227 1.169z",fillRule:"evenodd"}))};i.defaultProps={name:"HelpOutline"},t.a=i},2301:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(1),l=n.n(c),u=n(0),d=n.n(u),m=n(2231),p=n(14),h=n(11),f=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.page,a=e.prePage,r=e.onLoad,o=e.isNextLoaded;t||r(Object(h.c)(n),a),o||r(Object(h.c)(n+1),a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.isFetching,n=e.isDrained,a=e.isNextLoaded,r=e.page,o=e.prePage,i=e.onLoad,s=e.total;n||t||i(Object(h.c)(r),o),!a&&r<s&&r!==this.props.page&&i(Object(h.c)(r+1),o)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.total,a=e.page,r=e.onPaginationClick,o=e.isFetching,i=e.placeholder;return d.a.createElement("div",null,t,o&&i,n>1&&d.a.createElement(m.a,{current:a,total:n,clickCallback:r}))}}]),t}(u.Component);f.propTypes={isFetching:l.a.bool.isRequired,isDrained:l.a.bool.isRequired,onLoad:l.a.func.isRequired,total:l.a.number,page:l.a.number,prePage:l.a.number,placeholder:l.a.node,onPaginationClick:l.a.func.isRequired,isNextLoaded:l.a.bool},f.defaultProps={prePage:p.b,page:1}},2318:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(0),l=n.n(c),u=n(8),d=n.n(u),m=n(38),p=n(16),h=n(506),f=n(514),v=n(37),b=n(2071),g=n(1),y=n.n(g),w=(n(2386),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.tips;return l.a.createElement("div",{className:"QuestionReviewInfo"},l.a.createElement("p",null,e))}}]),t}(c.PureComponent));w.propsTypes={tips:y.a.string};var E=n(2033),C=n(2069),k=(n(2387),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={previewImage:null,truncated:null},n.handleClick=function(e){var t=n.props,a=t.collapsed,r=t.onExpand;n.state.truncated.isTruncated&&a&&"function"==typeof r&&r(e),n.handlePreviewImage(e)},n.handlePreviewImage=function(e){var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&n.setState({previewImage:t})},n.handlePreviewImageClose=function(){n.setState({previewImage:null})},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){if(Object(v.isBrowser)()){var e=this.truncateHTML(this.props);this.setState({truncated:e,hasVideo:e&&e.thumbnailInfo.id&&"video"===e.thumbnailInfo.type,thumbnail:e&&e.thumbnailInfo.url})}}},{key:"componentWillReceiveProps",value:function(e){var t=e.html;this.props.html!==t&&this.setState({truncated:this.truncateHTML(e)})}},{key:"truncateHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return Object(f.truncateHTML)(Object(b.a)(e.html),75,{placeholders:{img:" [图片] "}})}},{key:"render",value:function(){var e=this.props,t=e.html,n=e.collapsed,a=e.editable,r=e.onEdit,o=e.excerpt,i=e.reviewInfo,s=this.state,c=s.previewImage,u=s.truncated,f=s.hasVideo,v=s.thumbnail,b=u||{isTruncated:o.length<=t.length,content:o},g=b.isTruncated,y=b.content,k=i.tips,O=g&&n;return l.a.createElement("div",null,k&&f&&l.a.createElement(w,{tips:k}),l.a.createElement("div",{className:"QuestionHeader-detail"},l.a.createElement("div",{className:d()("QuestionRichText",{"QuestionRichText--expandable":g,"QuestionRichText--collapsed":n,"QuestionRichText--video":f&&n}),onClick:this.handleClick},f&&n&&l.a.createElement("div",{className:"QuestionRichText--wrapImgae"},l.a.createElement("img",{src:v,alt:"video",className:"QuestionRichText--image"})),l.a.createElement("div",null,n&&!y?l.a.createElement("span",null,Object(C.a)(o,75)):l.a.createElement(E.a,{itemProp:"text",tag:"span",html:O?y:t}),O&&l.a.createElement(p.c,{preset:"plain",className:"QuestionRichText-more"},"显示全部",l.a.createElement(m.a,{name:"arrow",className:"QuestionRichText-more-icon"}))),a&&!O&&l.a.createElement(p.c,{preset:"plain",className:"QuestionHeader-edit",onClick:r},l.a.createElement(m.a,{name:"modify",left:!0}),"修改"),c&&l.a.createElement(h.a,{img:c,onClose:this.handlePreviewImageClose}))))}}]),t}(c.Component));t.a=k},2326:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285zM7.874 14.585l-.551 1.838a.204.204 0 0 0 .255.254l1.836-.55c.347-.105.662-.293.918-.548l4.46-4.462a.273.273 0 0 0 0-.385l-1.524-1.524a.273.273 0 0 0-.386 0l-4.46 4.461c-.256.256-.444.57-.548.916zm8.581-6.317l-.723-.723a.786.786 0 0 0-1.111 0l-.882.88a.262.262 0 0 0 0 .371l1.465 1.465a.262.262 0 0 0 .37 0l.881-.881a.786.786 0 0 0 0-1.112z",fillRule:"evenodd"}))};i.defaultProps={name:"BadgeWrite"},t.a=i},2327:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M11.674 20.55a9.334 9.334 0 1 1 9.66-9.286c-.02 5.939-4.29 10.752-9.89 11.98-.837.185-1.808-.075-1.148-.84.502-.583.963-1.202 1.378-1.854zM12 17.444A6.222 6.222 0 1 0 12 5a6.222 6.222 0 0 0 0 12.444zm0-3.11a3.111 3.111 0 1 1 0-6.223 3.111 3.111 0 0 1 0 6.222z"}))};i.defaultProps={name:"Realm"},t.a=i},2328:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("g",{fillRule:"evenodd"},r.a.createElement("path",{d:"M4.125 21h15.75c.621 0 1.125-.593 1.125-1.324 0-.73-.504-1.323-1.125-1.323H4.125c-.621 0-1.125.593-1.125 1.323C3 20.407 3.504 21 4.125 21z"}),r.a.createElement("path",{d:"M15.69 3.826c0-.457-.418-.826-.92-.826H9.23c-.508 0-.92.37-.92.827V9.64H5.538c-1.015 0-1.255.526-.533 1.175l6.344 5.709a1 1 0 0 0 1.302 0l6.344-5.71c.722-.648.483-1.175-.535-1.175h-2.77V3.826z",fillRule:"nonzero"})))};i.defaultProps={name:"StickyUnset"},t.a=i},2329:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("g",{fillRule:"evenodd"},r.a.createElement("path",{d:"M4.125 3h15.75C20.496 3 21 3.593 21 4.324c0 .73-.504 1.323-1.125 1.323H4.125C3.504 5.647 3 5.054 3 4.324 3 3.593 3.504 3 4.125 3z"}),r.a.createElement("path",{d:"M15.69 20.174c0 .457-.418.826-.92.826H9.23c-.508 0-.92-.37-.92-.827V14.36H5.538c-1.015 0-1.255-.526-.533-1.175l6.344-5.709a1 1 0 0 1 1.302 0l6.344 5.71c.722.648.483 1.175-.535 1.175h-2.77v5.813z",fillRule:"nonzero"})))};i.defaultProps={name:"StickySet"},t.a=i},2386:function(e,t,n){},2387:function(e,t,n){},2388:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M12 11l-3.716 3.782a.758.758 0 0 1-1.064 0 .738.738 0 0 1 0-1.052l4.249-4.512a.758.758 0 0 1 1.064 0l4.246 4.512a.738.738 0 0 1 0 1.052.757.757 0 0 1-1.063 0L12.002 11z",fillRule:"evenodd"}))};i.defaultProps={name:"ArrowUp"},t.a=i},2400:function(e,t,n){},2401:function(e,t,n){},2402:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z",fillRule:"evenodd"}))};i.defaultProps={name:"Like"},t.a=i},2403:function(e,t,n){},2404:function(e,t,n){},2405:function(e,t,n){},2406:function(e,t,n){"use strict";var a=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormatedAdItem=p,t.getNormalizedInfo=h,t.default=void 0;var r=a(n(194)),o=a(n(383)),i=n(12),s=n(231),c=n(885),l=n(2407);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach(function(t){(0,r.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m={PROMOTE_ARTICLE:"发表了一篇文章",PROMOTE_QUESTION:"提了一个问题"};function p(e){var t=e.ad,n=(t.partyId,t.creatives),a=t.downloadSilent,r=void 0!==a&&a,i=t.isNewWebview,c=void 0!==i&&i,l=t.isSpeeding,u=t.cdnMap,p=t.displayAdvertisingTag,h=t.adVerb,f=t.loadTracks,v=t.closeTrack,b=(0,o.default)(t,["partyId","creatives","downloadSilent","isNewWebview","isSpeeding","cdnMap","displayAdvertisingTag","adVerb","loadTracks","closeTrack"]),g=(0,s.get)(t,"creatives[0].impressionTracks",[]),y=(0,s.get)(t,"creatives[0].clickTracks",[]),w={displayAdvertisingTag:p,downloadSilent:r,isNewWebview:c,isCdnSpeeding:l,cdnMap:u},E=m[h],C=n.map(function(e){return function(e,t){var n=(0,s.get)(e,"target",{}),a=n.voteupCount,r=n.commentCount,i=n.followerCount,c=n.answerCount,l=(0,o.default)(n,["voteupCount","commentCount","followerCount","answerCount"]),u=e.landingUrl,m=e.appPromotionUrl,p=e.deepUrl,h=e.packageName,f=e.title,v=e.nativeUrl,b=void 0===v?"":v,g=e.window,y=e.imageRatioExtra,w=e.brand,E=void 0===w?{}:w,C=e.thumbnailExtraInfo,k=e.cta,O=(k=void 0===k?{}:k).value,j=void 0===O?"":O,N=e.button,S=e.description,A=(e.protoInfo,e.image),T=e.gallery,R=void 0===T?[]:T,I=e.thirdSdkInfo,x=(e.showNum,e.recommend),P=e.contentType,M=(0,o.default)(e,["landingUrl","appPromotionUrl","deepUrl","packageName","title","nativeUrl","window","imageRatioExtra","brand","thumbnailExtraInfo","cta","button","description","protoInfo","image","gallery","thirdSdkInfo","showNum","recommend","contentType"]),L=E.name,D=E.logo,q=(0,s.get)(R,"length")>=2?R.map(function(e){return e.url}):[A],_=R&&R.map(function(e){return{image:e.url,desc:e.description}});return{asset:d({landingUrl:u,appPromotionUrl:m,deepUrl:p,packageName:h,title:f,nativeUrl:b,window:g,imageRatioExtra:y,desc:S,cta:N||j,imgs:q,brandName:L,brandLogo:D,recommend:x,gallery:R,galleries:_,icon:t},M),protoInfo:d({voteupNum:a,commentNum:r,contentType:P,answerNum:c,followNum:i,target:JSON.stringify(n)},l),videoInfo:C,thirdSdkInfo:I}}(e,E)});return d({viewTracks:g,impressionTracks:f,closeTracks:[v],clickTracks:y,creatives:C,expand:w},b)}function h(e){if(!e||!e.ad&&!e.adjson)return null;var t=(0,i.camelizeKeys)(e),n=(0,s.get)(e,"adjson"),a=(0,i.camelizeKeys)((0,s.str2Json)(n)),r=(0,c.getExperimentInfo)({oldData:t,adjson:a});return{data:t,adjson:Boolean(n)?function(e,t){if(!e.ads)return null;var n=e.ads;return{ads:(void 0===n?[]:n).map(function(e){return d({adjsonStr:t},(0,l.standardizeAdjson)(e))})}}(a,n):function(e,t){return{ads:[{ad:e.ad}].map(function(e){var n=e.ad;return d({adjsonStr:t},p({ad:n}))})}}(t,n),experimentInfo:r}}var f={getNormalizedInfo:h,getFormatedAdItem:p};t.default=f},2407:function(e,t,n){"use strict";function a(e){var t=e.id,n=e.adZoneId,a=e.template,r=void 0===a?"":a,o=e.style,i=void 0===o?"":o,s=e.impressionTracks,c=e.viewTracks,l=e.clickTracks,u=e.closeTracks,d=e.effectTracks,m=void 0===d?[]:d,p=e.debugTracks,h=void 0===p?[]:p,f=e.conversionTracks,v=e.videoTracks,b=void 0===v?[]:v,g=e.extraConversionTracks,y=void 0===g?[]:g,w=e.conversionTrackJs,E=void 0===w?[]:w,C=e.zaAdInfo,k=e.zaAdInfoJson,O=void 0===k?"":k,j=e.creatives,N=e.prefetch,S=void 0===N?{}:N,A=e.expand,T=void 0===A?{}:A,R=e.canvas,I=void 0===R?{}:R,x=e.experimentInfo,P=void 0===x?"":x;return{id:t,adZoneId:n,template:r,style:i,impressionTracks:s,viewTracks:c,clickTracks:l,closeTracks:u,effectTracks:m,debugTracks:h,conversionTracks:f,videoTracks:b,extraConversionTracks:y,conversionTrackJs:E,zaAdInfo:C,zaAdInfoJson:O,creatives:function(e){return e.map(function(e){return function(e){var t=e.id,n=void 0===t?"":t,a=e.asset,r=e.videoInfo,o=void 0===r?{playlis:{hd:{},ld:{},sd:{}}}:r,i=e.protoInfo,s=void 0===i?{}:i,c=e.thirdSdkInfo,l=void 0===c?"":c,u=e.videoWatchNum,d=void 0===u?"":u;return{id:n,asset:function(e){var t=e.brandName,n=e.brandLogo,a=e.title,r=e.desc,o=void 0===r?"":r,i=e.imgs,s=void 0===i?[]:i,c=e.gif,l=void 0===c?"":c,u=e.landingUrl,d=e.nativeUrl,m=void 0===d?"":d,p=e.appPromotionUrl,h=void 0===p?"":p,f=e.deepUrl,v=void 0===f?"":f,b=e.imgSize,g=e.recommends,y=void 0===g?[{}]:g,w=e.footer,E=e.cta,C=e.resource,k=void 0===C?{}:C,O=e.activity,j=void 0===O?{}:O,N=e.sponsor,S=void 0===N?{}:N,A=e.window,T=void 0===A?{}:A,R=e.appInfo,I=void 0===R?{}:R,x=e.recommend,P=void 0===x?{}:x,M=e.videoSpec,L=void 0===M?{}:M,D=e.imageRatioExtra,q=void 0===D?{}:D,_=e.packageName,z=e.icon,B=e.galleries;return{brandName:t,brandLogo:n,title:a,desc:o,imgs:s,gif:l,landingUrl:u,nativeUrl:m,appPromotionUrl:h,deepUrl:v,imgSize:b,recommends:y,footer:w,cta:E,resource:k,activity:j,sponsor:S,window:T,appInfo:I,recommend:P,videoSpec:L,imageRatioExtra:q,packageName:_,icon:z,galleries:void 0===B?[{}]:B}}(a),videoInfo:o,protoInfo:s,thirdSdkInfo:l,videoWatchNum:d}}(e)})}(j),prefetch:S,expand:T,canvas:I,experimentInfo:P}}Object.defineProperty(t,"__esModule",{value:!0}),t.standardizeAdjson=a,t.default=void 0;var r={standardizeAdjson:a};t.default=r},2421:function(e,t,n){"use strict";var a=n(3),r=n(4),o=n(7),i=n(5),s=n(6),c=n(0),l=n.n(c),u=n(1),d=n.n(u),m=n(8),p=n.n(m),h=n(2402),f="TopicVoteCheckbox",v=(n(2401),[0,1,2,3,4,5,6,7].map(function(e){return l.a.createElement("div",{className:"".concat(f,"-Sparkle"),key:e})})),b=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,a=e.checked,r=e.onClick,o=e.tooltipPosition;return l.a.createElement("div",Object.assign({className:p()(f,"".concat(f,"--recommend"),t),"data-tooltip":"推荐"},o&&{"data-tooltip-position":o}),l.a.createElement("input",{id:"topic-recommend",type:"checkbox",checked:a,onChange:n,onClick:r}),l.a.createElement("label",{htmlFor:"topic-recommend"},l.a.createElement(h.a,{size:19}),v))}}]),t}(c.Component),g=(n(2403),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,a=e.checked,r=e.onClick,o=e.tooltipPosition;return l.a.createElement("div",Object.assign({className:p()(f,"".concat(f,"--against"),t),"data-tooltip":"不推荐"},o&&{"data-tooltip-position":o}),l.a.createElement("input",{id:"topic-against",type:"checkbox",checked:a,onChange:n,onClick:r}),l.a.createElement("label",{htmlFor:"topic-against"},l.a.createElement(h.a,{size:19})))}}]),t}(c.Component)),y=(n(2404),{Recommend:b,Against:g}),w=(n(2405),function(e){return e.stopPropagation()}),E=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.noAnimation,n=e.status,a=e.onVoteChange,r=e.tooltipPosition;return l.a.createElement("span",{className:"VotableTopicCard",onClick:w},l.a.createElement("span",{className:p()("VotableTopicCard-RecommendStatus",{"VotableTopicCard-VoteActions--noAnimation":t})},l.a.createElement(y.Recommend,{className:"".concat("VotableTopicCard","-VoteCheckbox"),checked:"like"===n,onChange:function(e){a(e,"recommend")},tooltipPosition:r}),l.a.createElement(y.Against,{className:"".concat("VotableTopicCard","-VoteCheckbox"),checked:"dislike"===n,onChange:function(e){a(e,"unrecommend")},tooltipPosition:r})))}}]),t}(c.Component);E.propTypes={noAnimation:d.a.bool.isRequired,status:d.a.oneOf(["like","dislike","none"]).isRequired,noBorder:d.a.bool.isRequired,onVoteChange:d.a.func.isRequired,tooltipPosition:d.a.string};var C=E,k=n(15),O=n(60),j=n(19),N={Upvote:"Upvote",UnUpvote:"UnUpvote",Downvote:"Downvote",UnDownvote:"UnDownvote"},S=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={noAnimation:!!n.props.metaInfo.vote&&"none"!==n.props.metaInfo.vote.status},n.handleVoteChange=n.context.authRequired(function(e,t){var a=n.props,r=a.metaInfo.vote.status,o=a.onUpdateVoteTopic;n.state.noAnimation&&n.setState({noAnimation:!1});var i={actionType:"",voteFor:"",method:""};"recommend"===t?"like"===r?(i.actionType=N.UnUpvote,i.voteFor="like",i.method="DELETE"):(i.actionType=N.Upvote,i.voteFor="like",i.method="POST"):"dislike"===r?(i.actionType=N.UnDownvote,i.voteFor="dislike",i.method="DELETE"):(i.actionType=N.Downvote,i.voteFor="dislike",i.method="POST"),i.actionType&&(k.default.trackEvent(e.target,{action:i.actionType,id:4176}),o(i))},j.N.vote),n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"renderVotableTopicCard",value:function(){var e=this.state.noAnimation,t=this.props,n=t.tooltipPosition,a=t.metaInfo,r=(a=void 0===a?{}:a).vote,o=(r=void 0===r?{}:r).status;return l.a.createElement(C,{noBorder:!0,status:o,noAnimation:e,onVoteChange:this.handleVoteChange,tooltipPosition:n})}},{key:"renderReviewCardExtraInfo",value:function(){var e=this.props,t=e.metaInfo,n=t.vote,a=t.meta.title,r=e.ReviewCardExtraInfoComponent,o=e.reviewerCountFormatter;if(!r)return null;var i,s=n.totalVotes,c=n.ratio,u=n.ratioStatus,d=n.status,m=(100*c).toFixed(0),p=o(s);return i="none"===d?"你推荐么？":"like"===d?"已推荐":"不推荐",l.a.createElement(r,{reviewerCount:p,insufficientText:i,percent:m,ratioStatus:u,title:a})}},{key:"render",value:function(){return l.a.createElement(c.Fragment,null,this.renderReviewCardExtraInfo(),this.props.children,this.renderVotableTopicCard())}}]),t}(c.Component);S.propTypes={onUpdateVoteTopic:d.a.func.isRequired,metaInfo:d.a.shape({meta:d.a.object.isRequired,vote:d.a.shape({status:d.a.oneOf(["none","dislike","like"]).isRequired})}),ReviewCardExtraInfoComponent:d.a.oneOfType([d.a.func,d.a.string,d.a.object]).isRequired,reviewerCountFormatter:d.a.func.isRequired,tooltipPosition:d.a.string},S.defaultProps={reviewerCountFormatter:function(e){return e>1e4?Object(O.niceNumber)(e):Object(O.formatNumber)(e)}},S.contextTypes={authRequired:d.a.func},n.d(t,"a",function(){return S})},2430:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M17.007 11.504c0 .65-.13 1.26-.36 1.83l3 3.073S23 14.136 23 11.504C23 8.008 17.255 4 11.995 4c-1.4 0-2.741.25-3.982.701l2.161 2.16c.57-.23 1.18-.36 1.831-.36a5.004 5.004 0 0 1 5.002 5.003zM2.57 4.342l2.067 2.075C3.499 7.258 1 9.119 1 11.504c0 3.336 5.79 7.503 11.005 7.503 1.55 0 3.031-.3 4.382-.84l.42.42 2.125 2.118s.782.571 1.314 0-.074-1.305-.074-1.305L3.955 3.183s-.76-.742-1.385-.19c-.626.554 0 1.35 0 1.35zm4.963 4.96l1.55 1.552c-.05.21-.08.43-.08.65 0 1.66 1.341 3.001 3.002 3.001.22 0 .44-.03.65-.08l1.551 1.551c-.67.33-1.41.53-2.2.53a5.004 5.004 0 0 1-5.003-5.002c0-.79.2-1.53.53-2.201zm4.312-.78l3.151 3.152.02-.16c0-1.66-1.34-3.001-3.001-3.001l-.17.01z",opacity:".9",fillRule:"evenodd"}))};i.defaultProps={name:"EyeSlash"},t.a=i},2443:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-2.762-5.37c.243.246.452.37.78.37.33 0 .576-.203.827-.443.25-.24 7.052-7.054 7.052-7.054a.988.988 0 0 0-.311-1.354.973.973 0 0 0-1.345.315l-6.222 6.077-2.31-2.418a.971.971 0 0 0-1.368-.19.988.988 0 0 0-.188 1.377s2.841 3.074 3.085 3.32z",fillRule:"evenodd"}))};i.defaultProps={name:"CheckCircle"},t.a=i},2445:function(e,t,n){},2446:function(e,t,n){},2447:function(e,t,n){},2448:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var a,r=n(3),o=n(4),i=n(7),s=n(5),c=n(6),l=n(0),u=n.n(l),d=n(17),m=n(2792),p=n(70),h=n(154);var f=Object(d.connect)(function(e){var t=e.question;return{brand:t.brand,advancedStyle:t.advancedStyle}},{loadBrandQuestionAdvancedStyle:p.y})(a=function(t){function n(){var t,a;Object(r.a)(this,n);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(t=Object(s.a)(n)).call.apply(t,[this].concat(c)))).getTrackUrls=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.props,o=r.pageType,i=r.advancedStyle,s=i.viewTracks,c=i.clickTracks,l="view"===t?s:c,u=Object.assign({},{eru:encodeURIComponent(e.location.href),ct:1,pt:"question"===o?1:2,rt:1},n),d=Object.keys(u).map(function(e){return"&".concat(e,"=").concat(u[e])}).join("");return l.map(function(e){return"".concat(e).concat(d)})},a.handleViewTrack=function(e){a.getTrackUrls("view",e).forEach(h.c)},a.handleClickTrack=function(e){a.getTrackUrls("click",e).forEach(h.c)},a}return Object(c.a)(n,t),Object(o.a)(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.questionId;(0,e.loadBrandQuestionAdvancedStyle)(t)}},{key:"componentDidUpdate",value:function(e){var t=e.advancedStyle,n=(t=void 0===t?{}:t).cardType,a=this.props,r=a.advancedStyle,o=(r=void 0===r?{}:r).cardType,i=a.onLoad;!n&&o&&"function"==typeof i&&i()}},{key:"render",value:function(){var e=this.props,t=e.brand,n=e.advancedStyle;return n&&n.id?u.a.createElement(m.a,{brand:t,advancedStyle:n,handleViewTrack:this.handleViewTrack,handleClickTrack:this.handleClickTrack,isMobileView:!1}):null}}]),n}(l.Component))||a}).call(this,n(42))},2449:function(e,t,n){},2748:function(e,t,n){},2749:function(e,t,n){e.exports=n.p+"assets/liukanshan_desert.547bd049.svg"},2750:function(e,t,n){},2751:function(e,t,n){},2752:function(e,t,n){},2753:function(e,t,n){},2754:function(e,t,n){},2755:function(e,t,n){},2756:function(e,t,n){},2757:function(e,t,n){},2758:function(e,t,n){},2759:function(e,t,n){},2760:function(e,t,n){},2761:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(10),i=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z",fillRule:"evenodd"}))};i.defaultProps={name:"Report"},t.a=i},2762:function(e,t,n){},2763:function(e,t,n){},2764:function(e,t,n){"use strict";var a=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=a(n(71)),i=function(e){return r.default.createElement(o.default,Object.assign({viewBox:"0 0 72 18"},e),r.default.createElement("g",{fillRule:"evenodd"},r.default.createElement("rect",{width:"72",height:"18",rx:"2"}),r.default.createElement("text",{fill:"#FFF",fontSize:"12",fontWeight:"500"},r.default.createElement("tspan",{x:"19",y:"13"},"有奖问答")),r.default.createElement("path",{fill:"#FFF",d:"M13.4 5.8H11a.4.4 0 0 1-.4-.3l.1-.4 1.6-1.7c.4-.4 1-.5 1.6-.2.5.3.8 1 .7 1.5-.2.6-.7 1-1.3 1zm0-1.9L13 4l-.7.8h1c.3 0 .5-.2.5-.4 0-.3-.2-.5-.5-.5zM10 6.4v1.5H5.8a.8.8 0 1 1 0-1.5H10zm.8 0h4.3a.8.8 0 0 1 0 1.5H11V6.4zM10 8.7v6H8.4c-.8 0-1.1-.2-1.5-.4-.3-.1-.5-.4-.7-.7-.2-.3-.3-.7-.3-1.5v-.9c0-.8.1-1.1.3-1.5l.7-.7c.4-.2.7-.3 1.5-.3h1.7zm.8 0h1.7c.8 0 1.1.1 1.5.3l.7.7c.2.4.3.7.3 1.5v1c0 .7-.1 1-.3 1.4-.2.3-.4.6-.7.7-.4.2-.7.3-1.5.3h-1.7V8.7zm-3.3-3c-.6 0-1.1-.4-1.3-1-.1-.5.2-1.2.7-1.5.5-.3 1.2-.2 1.6.2l1.6 1.7s.1.3 0 .4c0 .2-.2.2-.3.3H7.6zM8 4a.4.4 0 0 0-.5 0c-.2 0-.4.3-.3.5 0 .2.2.3.4.3h1L8 4z",fillRule:"nonzero"})))};t.default=i},2765:function(e,t,n){},2766:function(e,t,n){},2767:function(e,t,n){},2768:function(e,t,n){},2769:function(e,t,n){},2770:function(e,t,n){"use strict";var a=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),o=a(n(71)),i=function(e){return r.default.createElement(o.default,Object.assign({viewBox:"0 0 24 24"},e),r.default.createElement("path",{d:"M17.248 6.5H13.11a.71.71 0 0 1-.657-.446.731.731 0 0 1 .154-.787l2.812-3.045a2.395 2.395 0 0 1 2.926-.392c.95.558 1.527 1.767 1.243 2.844A2.431 2.431 0 0 1 17.248 6.5zm-.114-3.357a.798.798 0 0 0-.572.24l-1.265 1.474h1.95c.447 0 .695-.44.695-.893a.815.815 0 0 0-.808-.821zM11.286 7.61v2.857H3.429a1.429 1.429 0 0 1 0-2.857h7.857zm1.428 0h7.857a1.429 1.429 0 0 1 0 2.857h-7.857V7.611zm-1.428 4.286V22.61H6.23c-.892 0-1.215-.093-1.541-.267a1.817 1.817 0 0 1-.756-.756c-.175-.326-.267-.65-.267-1.54V14.46c0-.892.092-1.215.267-1.541.174-.326.43-.582.756-.756.326-.174.649-.267 1.54-.267h5.056zm1.428 0h5.055c.892 0 1.215.093 1.541.267.326.174.582.43.756.756.175.326.267.65.267 1.54v5.587c0 .892-.092 1.215-.267 1.541-.174.326-.43.582-.756.756-.326.174-.649.267-1.54.267h-5.056V11.897zM6.752 6.5a2.431 2.431 0 0 1-2.341-1.826c-.284-1.077.293-2.286 1.243-2.844a2.395 2.395 0 0 1 2.926.392l2.812 3.045a.731.731 0 0 1 .153.787.711.711 0 0 1-.656.446H6.752zm.686-3.117a.798.798 0 0 0-.976-.13c-.317.185-.585.637-.49.996a.81.81 0 0 0 .78.608h1.951L7.438 3.383z"}))};t.default=i},2771:function(e,t,n){},2772:function(e,t,n){},2773:function(e,t,n){},2774:function(e,t,n){},2775:function(e,t,n){},2776:function(e,t,n){},2777:function(e,t,n){},2778:function(e,t,n){e.exports=n.p+"assets/empty.2df52de0.png"},2779:function(e,t,n){},2780:function(e,t,n){},2781:function(e,t,n){},2782:function(e,t,n){"use strict";var a=n(532),r=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,v.getNormalizedInfo)(e.data);if(!t||!t.adjson)return null;return m.default.createElement(h.default,null,m.default.createElement(y,(0,o.default)({},e,t)))};var o=r(n(195)),i=r(n(383)),s=r(n(227)),c=r(n(267)),l=r(n(228)),u=r(n(191)),d=r(n(229)),m=a(n(0)),p=r(n(1)),h=r(n(886)),f=n(884),v=n(2406),b=n(553),g=r(n(2783));n(2447);var y=function(e){function t(){var e,n;(0,s.default)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=(0,l.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(r)))).state={display:!0},n.handleClick=function(e){e.stopPropagation();var t=(0,f.getNormalizedAd)(n.props).ad.clickTracks,a=e.target.closest("a");(0,b.clickTrack)(t).finally(function(){var e=a.href;window.open(e)})},n.handleClose=function(){var e=(0,f.getNormalizedAd)(n.props).ad.closeTracks;(0,b.closeTrack)(e).then(function(){n.setState(function(e){return{display:!e.display}}),n.props.onClose&&n.props.onClose()})},n.handleRef=function(e){n.root=e},n}return(0,d.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){if(this.root&&!this.props.preview){var e=(0,f.getNormalizedAd)(this.props).ad,t=e.impressionTracks,n=e.debugTracks,a={impressionTracks:t,viewTracks:e.viewTracks,debugTracks:n};(0,b.initCmTrack)(this.root,a),(0,b.dataOriginTrack)(n,!!this.props.data.adjson)}}},{key:"render",value:function(){if(!this.state.display)return null;var e=(0,f.getNormalizedAd)(this.props),t=e.ad,n=e.creative,a=t.expand.displayAdvertisingTag,r=n.asset,o=r.title,i=r.desc,s=r.cta,c=r.landingUrl,l=r.brandName,u=r.brandLogo;return m.default.createElement("div",{className:"Pc-word",ref:this.handleRef},m.default.createElement("div",{className:"Pc-word-card"},m.default.createElement(w,{href:c,onClick:this.handleClick},m.default.createElement(E,{data:{name:l,logo:u}})),a&&m.default.createElement(g.default,{onClose:this.handleClose}),m.default.createElement(w,{href:c,onClick:this.handleClick},m.default.createElement("h2",{className:"Pc-word-card-title"},o),m.default.createElement("div",{className:"Pc-word-card-content  "},i&&m.default.createElement(m.default.Fragment,null,m.default.createElement("span",null,i),m.default.createElement("span",{className:"Pc-word-card-content-cta  "},s))))))}}]),t}(m.Component);function w(e){var t=e.children,n=(0,i.default)(e,["children"]);return m.default.createElement("a",(0,o.default)({target:"_blank"},n),t)}function E(e){var t=e.data,n=t.name,a=t.logo;return m.default.createElement("div",{className:"Pc-word-card-brand"},m.default.createElement("div",{className:"Pc-word-card-brand-wrapper"},m.default.createElement("img",{width:"20",height:"20",src:a,alt:"logo"}),m.default.createElement("span",null,n)))}y.propTypes={data:p.default.object.isRequired,onClose:p.default.func}},2783:function(e,t,n){"use strict";var a=n(532),r=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(227)),i=r(n(267)),s=r(n(228)),c=r(n(191)),l=r(n(229)),u=a(n(0)),d=r(n(1)),m=r(n(876));n(2447);var p=function(e){function t(){var e,n;(0,o.default)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=(0,s.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(r)))).state={display:!1},n.handleCloseByDocument=function(e){"Pc-word-card-sign-label"!==e.target.closest("div").className&&n.setState({display:!1})},n.handleClick=function(){n.setState(function(e){return{display:!e.display}});var e=n.sign.querySelector(".Pc-word-card-sign-label").getBoundingClientRect(),t=e.left,a=e.top,r=e.width,o=e.height+15,i=Math.floor(r/2);n.sign.querySelector(".Pc-word-card-sign-popup").style.top="".concat(a+o,"px"),n.sign.querySelector(".Pc-word-card-sign-popup").style.left="".concat(t-i,"px")},n.handleClose=function(){n.props.onClose&&n.props.onClose()},n.handleRef=function(e){n.sign=e},n}return(0,l.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleCloseByDocument)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleCloseByDocument)}},{key:"render",value:function(){return u.default.createElement("div",{className:"Pc-word-card-sign",ref:this.handleRef},u.default.createElement("div",{className:"Pc-word-card-sign-label",onClick:this.handleClick},"广告​",u.default.createElement(m.default,{name:"triangle",className:"Pc-word-card-sign-svg"})),u.default.createElement("div",{className:"Pc-word-card-sign-popup ".concat(this.state.display?"Pc-word-card-sign-popup--isShowed":"Pc-word-card-sign-popup--isHidden")},u.default.createElement("span",{className:"Pc-word-card-sign-popup-arrow"}),u.default.createElement("div",{className:"Pc-word-card-sign-popup-menu"},u.default.createElement("button",{type:"button",onClick:this.handleClose},"不感兴趣"),u.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/promotion-intro"},"知乎广告介绍"))))}}]),t}(u.Component);t.default=p,p.propTypes={onClose:d.default.func}},2784:function(e,t,n){},2785:function(e,t,n){},2786:function(e,t,n){},2787:function(e,t,n){},2788:function(e,t,n){},2789:function(e,t,n){},2790:function(e,t,n){},2791:function(e,t,n){},2792:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n(0),r=n.n(a),o=n(8),i=n.n(o),s=n(531),c=n(65),l=n(48),u=n(2793),d=(n(2795),"https://pic1.zhimg.com/da8e974dc.jpg"),m={question:"提问",answer:"回答",post:"文章",live:"Live",ebook:"电子书"},p=function(e){var t=e.src,n=e.style;return r.a.createElement("div",{className:"AdvancedViewer-imgField",style:Object.assign({},n,{},t?{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"center"}:{})})};function h(e){var t=e.isMobileView,n=e.advancedStyle,a=(n=void 0===n?{}:n).cardType,o=n.url,i=n.material,c=void 0===i?[]:i,l=e.handleViewTrack,h=e.handleClickTrack;if(!c)return null;var f=function(e){return"function"==typeof h?{onClick:function(){h(e)}}:{}},v=function(e,t){return r.a.createElement("a",Object.assign({key:"AdvancedViewer-commodity-".concat(t),className:"AdvancedViewer-commodityItem",target:"_blank",href:o},f({etu:o,pi:t+1})),r.a.createElement("img",{src:e.image,role:"presentation"}),e.mainTitle&&r.a.createElement("div",{className:"AdvancedViewer-commodityIntro"},r.a.createElement("span",{className:"AdvancedViewer-mainTitle"},e.mainTitle),r.a.createElement("span",{className:"AdvancedViewer-subTitle"},e.subTitle)))};if("image"===a)return r.a.createElement("a",Object.assign({className:"AdvancedViewer-material AdvancedViewer-image",target:"_blank",href:o},f({etu:o})),r.a.createElement(p,{src:c[0].image,style:t?{width:375,height:156.25}:{}}));if("image_text"===a)return r.a.createElement("a",Object.assign({className:"AdvancedViewer-material AdvancedViewer-imageText",target:"_blank",href:o},f({etu:o})),t&&r.a.createElement("div",{className:"AdvancedViewer-intro"},c[0].intro),r.a.createElement(p,{src:c[0].image}),!t&&r.a.createElement("div",{className:"AdvancedViewer-intro"},c[0].intro));if("commodity"===a)return c.length&&r.a.createElement("div",{className:"AdvancedViewer-material AdvancedViewer-commodity"},t?c.map(v):r.a.createElement(u.a,{items:c,renderItem:v}));if("recommended"===a){var b=function(e,t){return r.a.createElement("a",Object.assign({className:"AdvancedViewer-recommendedItem",href:e.url,target:"_blank"},f({etu:e.url,pi:t+1})),r.a.createElement("div",{className:"AdvancedViewer-summary"},r.a.createElement("div",{className:"AdvancedViewer-wrap"},r.a.createElement("div",{className:"AdvancedViewer-title"},e.title),e.intro&&r.a.createElement("div",{className:"AdvancedViewer-desc"},e.intro.replace(/<[\s\S]*?>/g,""))),r.a.createElement("span",{className:"AdvancedViewer-data"},m[e.type]," · ",e.statisticText)),r.a.createElement(p,{src:e.image||d}))};return r.a.createElement("div",{className:"AdvancedViewer-material AdvancedViewer-recommended"},c.map(function(e,t){return l?r.a.createElement(s.a,Object.assign({key:"AdvancedViewer-recommendedItem-".concat(t)},(n={pi:t+1},"function"==typeof l?{onViewed:function(){l(n)}}:{})),b(e,t)):b(e,t);var n}))}return null}function f(e){var t,n=e.isMobileView,a=e.brand,o=a.name,u=a.logo,d=e.advancedStyle,m=(d=void 0===d?{}:d).brandRecommendText,p=d.buttonText,f=d.url,v=d.cardType,b=e.handleViewTrack,g=e.handleClickTrack,y=function(e){return"function"==typeof g?{onClick:function(){g(e)}}:{}},w=o&&o.charCodeAt(o.length-1),E=w>=0&&w<=128?"".concat(o," "):o,C=n&&"recommended"!==v,k=m||"".concat(E,"的品牌推荐"),O=r.a.createElement(c.d,{className:i()("AdvancedViewer",{"is-mobile":n})},!C&&r.a.createElement(c.b,{className:"AdvancedViewer-header"},r.a.createElement("span",{className:"AdvancedViewer-headerText"},k)),r.a.createElement("div",{className:"AdvancedViewer-content"},r.a.createElement(h,e)),!n&&v&&"recommended"!==v&&r.a.createElement("div",{className:"AdvancedViewer-footer"},r.a.createElement(l.a,Object.assign({className:"AdvancedViewer-button",target:"_blank",to:f},y({etu:f})),p||"了解更多")),C&&r.a.createElement("div",{className:"AdvancedViewer-footer"},r.a.createElement("div",{className:"AdvancedViewer-brand"},r.a.createElement("img",{className:"AdvancedViewer-logo",src:u,role:"presentation"}),r.a.createElement("span",{className:"AdvancedViewer-brandName"},k)),r.a.createElement(l.a,Object.assign({className:"AdvancedViewer-button",target:"_blank",to:f},y({etu:f})),p||"查看详情")));return b?r.a.createElement(s.a,"function"==typeof b?{onViewed:function(){b(t)}}:{},O):O}},2793:function(e,t,n){"use strict";(function(e){var a=n(9),r=n(3),o=n(4),i=n(7),s=n(5),c=n(6),l=n(22),u=n(0),d=n.n(u),m=n(256),p=n(8),h=n.n(p),f=n(38),v=n(93),b=(n(2794),30),g="ontouchstart"in e,y=function(e){var t=e.changedTouches[0];return{x:t.pageX,y:t.pageY}},w=function(e,t,n){return Math.min(Math.max(e,t),n)},E=function(e,t){return{transform:"translate3d(".concat(e,", ").concat(t,", 0)"),WebkitTransform:"translate3d(".concat(e,", ").concat(t,", 0)")}},C=function(e){return function(t){t.stopPropagation(),e()}},k=function(e){var t=e.from,n=e.to,a=Object(l.a)(e,["from","to"]),r=Object(m.b)({from:t,to:n});return d.a.createElement(m.a.div,Object.assign({style:r},a))},O=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={offset:n.props.defaultIndex-(n.props.loop?n.props.visibles:0),touchMoveOffset:0,showLeftArrow:!1,showRightArrow:!1},n.handleHotkeys=function(e){var t=n.isVertical?38===e.keyCode:37===e.keyCode,a=n.isVertical?40===e.keyCode:39===e.keyCode;t?n.prev():a&&n.next()},n.play=function(){n.timer_=setTimeout(function(){n.next(n.play)},n.props.interval)},n.pause=function(){n.isPlaying_&&(n.isPaused_=!0,n.stop())},n.resume=function(){n.isPaused_&&n.start()},n.prev=function(e){var t=n.state.offset;return t-=1,n.setOffset(t,e)},n.next=function(e){var t=n.state.offset;return t+=1,n.setOffset(t,e)},n.handleTouchStart=function(e){n.pause(),n.touchStartPosition_=y(e)},n.handleTouchMove=function(e){e.preventDefault();var t=y(e);if(n.isVertical){var a=t.y-n.touchStartPosition_.y;n.setState({touchMoveOffset:w(a/n.el.offsetHeight,-1,1)})}else{var r=t.x-n.touchStartPosition_.x;n.setState({touchMoveOffset:w(r/n.el.offsetWidth,-1,1)})}},n.handleTouchEnd=function(e){var t=y(e),a=t.x-n.touchStartPosition_.x,r=t.y-n.touchStartPosition_.y,o=n.isVertical?r>b:a>b,i=n.isVertical?r<-b:a<-b,s=!1;o?s=n.prev(n.resume):i&&(s=n.next(n.resume)),s||n.setState({touchMoveOffset:0})},n.handleTouchCancel=function(){n.resume()},n.handleMouseEnter=function(){n.pause()},n.handleMouseMove=function(){n.props.enableArrows&&n.setState({showLeftArrow:!0,showRightArrow:!0})},n.handleMouseLeave=function(){n.resume(),n.setState({showLeftArrow:!1,showRightArrow:!1})},n.timer_=null,n.isPlaying_=!1,n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoplay,n=e.enableHotkeys;t&&this.canPlay&&this.start(),n&&window.addEventListener("keydown",this.handleHotkeys)}},{key:"componentWillReceiveProps",value:function(e){var t=e.items,n=this.props.items;t.length!==n.length&&t.length>1&&this.start()}},{key:"componentWillUnmount",value:function(){this.stop(),window.removeEventListener("keydown",this.handleHotkeys)}},{key:"start",value:function(){this.isPlaying_||(this.isPlaying_=!0,this.play())}},{key:"stop",value:function(){this.isPlaying_=!1,clearTimeout(this.timer_)}},{key:"calcIndex",value:function(e){var t=this.props,n=t.loop,a=t.items;return n?function(e,t){var n=(t+1)%e;return n<0?n+e:n}(a.length,e):e}},{key:"isValidIndex",value:function(e){var t=this.props.items;return e>=0&&e<=t.length-1}},{key:"setOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.calcIndex(e);return!!this.isValidIndex(n)&&(this.props.onSlide({index:n}),this.setState({offset:e,touchMoveOffset:0},t),!0)}},{key:"slideTo",value:function(e,t){var n=this.props.items,a=this.state.offset,r=n.length,o=this.currentIndex;e!==o&&(a+=o<e?e-o:r+e-o,this.setOffset(a,t))}},{key:"getTranslateStyle",value:function(e){return this.isVertical?E(0,"".concat(100*e,"%")):E("".concat(100*e,"%"),0)}},{key:"renderArrows",value:function(){var e=this.props.enableArrows,t=this.state,n=t.showLeftArrow,a=t.showRightArrow;return!e||this.isVertical?null:d.a.createElement("span",null,n&&d.a.createElement("button",{className:"Carousel-leftArrow","aria-label":"上一个",onClick:C(this.prev)},d.a.createElement(f.a,{name:"arrow"})),a&&d.a.createElement("button",{className:"Carousel-rightArrow","aria-label":"下一个",onClick:C(this.next)},d.a.createElement(f.a,{name:"arrow"})))}},{key:"renderBullets",value:function(){var e=this,t=this.props,n=t.items;return t.enableBullets?d.a.createElement("div",{className:"Carousel-bullets"},n.map(function(t,n){return d.a.createElement("span",{key:n,className:h()("Carousel-bullet",{"is-active":e.currentIndex===n}),onClick:function(){return e.slideTo(n)}})})):null}},{key:"renderItems",value:function(){var e=this.props,t=e.loop,n=e.items,r=e.renderItem,o=e.visibles;if(!t)return n.map(function(e,t){return Object(u.cloneElement)(r(e,t),{key:t})});var i=this.currentIndex,s=i+3*o;return[n[n.length-1]].concat(Object(a.a)(n),[n[0]]).map(function(e,t){var n=t>=i&&t<s;return Object(u.cloneElement)(r(e,t),{key:t,hidden:!n})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.loop,a=t.visibles,r=t.items,o=t.className,i=t.defaultIndex,s=this.state,c=s.offset,l=s.touchMoveOffset;if(!r.length)return null;var u=this.canPlay?{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onTouchCancel:this.handleTouchCancel,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave}:null,m=n?a:0;return d.a.createElement("div",Object.assign({ref:function(t){return e.el=t},className:h()("Carousel",o,{"is-vertical":this.isVertical})},u),d.a.createElement(k,{className:"Carousel-scroller",from:this.getTranslateStyle(-i),to:this.getTranslateStyle(-(c+m-l))},d.a.createElement("div",{className:"Carousel-window",style:n?this.getTranslateStyle(c):null},this.renderItems())),this.canPlay&&this.renderArrows(),this.canPlay&&this.renderBullets())}},{key:"canPlay",get:function(){return this.props.items.length>1}},{key:"isVertical",get:function(){return"vertical"===this.props.direction}},{key:"currentIndex",get:function(){return this.calcIndex(this.state.offset)}}]),t}(u.Component);O.defaultProps={id:"",items:[],defaultIndex:0,visibles:1,interval:3e3,loop:!0,enableArrows:!g,enableBullets:!0,enableHotkeys:!1,autoplay:!0,direction:"horizontal",onSlide:function(){}},t.a=function(e){return d.a.createElement(v.a,null,d.a.createElement(O,e))}}).call(this,n(42))},2794:function(e,t,n){},2795:function(e,t,n){},2796:function(e,t,n){},2797:function(e,t,n){},2798:function(e,t,n){},2799:function(e,t,n){},2800:function(e,t,n){},2801:function(e,t,n){},2802:function(e,t,n){},2803:function(e,t,n){},3202:function(e,t,n){"use strict";n.r(t);var a,r,o,i=n(0),s=n.n(i),c=n(23),l=n(29),u=n(3),d=n(4),m=n(7),p=n(5),h=n(6),f=n(1),v=n.n(f),b=n(17),g=n(84),y=n.n(g),w=n(234),E=n.n(w),C=n(134),k=n(16),O=n(181),j=n(70),N=(n(2748),Object(b.connect)(null,{updateQuestionAnonymous:j.bb})((o=r=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleToggleAnonymousConfirm=function(){var e=n.props,t=e.question.id,a=e.updateQuestionAnonymous;(0,e.onClose)(),a(t).then(function(){var e=n.props,t=e.isCheckedCircle,a=e.onChangecircleSettings;t&&a(!1)})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,a=e.shown,r=e.showCircle,o=n.relationship.isAnonymous;return s.a.createElement(O.b,{title:o?"确认取消匿名身份？":"确认使用匿名身份？",onClose:t,size:"default"},a&&s.a.createElement("div",null,o?s.a.createElement("div",{className:"Anonymous-confirm"},s.a.createElement("p",null,"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。")):s.a.createElement("div",{className:"Anonymous-confirm"},s.a.createElement("p",null,"使用匿名身份后"),s.a.createElement("ul",null,s.a.createElement("li",null,"提问、回答、赞同、关注会显示为匿名"),s.a.createElement("li",null,"除提问者本人，不能匿名编辑问题"),s.a.createElement("li",null,"不能邀请别人回答问题"),s.a.createElement("li",null,"不能使用视频功能"),r&&s.a.createElement("li",null,"回答无法被圈内说收录"))),s.a.createElement(O.a,{direction:"horizontal"},s.a.createElement(k.c,{onClick:t,color:"grey"},"取消"),s.a.createElement(k.c,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm},"确认"))))}}]),t}(i.Component),r.propTypes={question:v.a.object.isRequired},a=o))||a),S=n(216),A=n(2749),T=n.n(A),R=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={time:n.props.seconds},n.handleClearInterval=function(){n.interval&&clearInterval(n.interval)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){e.setState({time:e.state.time-1},function(){if(0===e.state.time){e.handleClearInterval();var t=e.props.id;location.href="/question/".concat(t)}})},1e3)}},{key:"componentWillUnmount",value:function(){this.handleClearInterval()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.destination,a=this.state.time;return s.a.createElement(S.b,{title:t,subtitle:"".concat(a," 秒后自动跳转至").concat(n),errorImage:T.a})}}]),t}(i.Component);R.defaultProps={seconds:5,destination:"回答所在的问题页",title:"该回答已被删除"};var I=n(498),x=n(9),P=n(871),M=n.n(P),L=n(38),D=n(184),q=n(2070),_=n(280),z=n(495),B=n(21),Q=n(385),U=n(2104),F=n(93),V=n(2150),H=n(2),W=n(8),G=n.n(W),K=n(85),Y=n(516),$=n(1993),J=n(1995),Z=n(1994),X=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.badgeClassName,n=e.size,a=e.center,r=e.badge,o=Object(Y.a)(r)||{},i=o.identityInfo,c=o.bestAnswererInfo;return c&&i?s.a.createElement($.a,{className:t,size:n,center:a}):c?s.a.createElement(J.a,{className:t,size:n,center:a}):i?s.a.createElement(Z.a,{className:t,size:n,center:a}):null}}]),t}(s.a.Component);X.propTypes={badge:v.a.array,size:v.a.number,center:v.a.bool,badgeClassName:v.a.string},X.defaultProps={size:16,center:!0,badgeClassName:""};n(2750);var ee="SpecialQuestionAuthor",te=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.author,n=e.className,a=e.isMobile,r=t.avatarUrl,o=t.name,i=t.badge;return s.a.createElement("div",{className:G()("".concat(ee,"-Wrapper"),n)},s.a.createElement(c.Link,{className:G()("".concat(ee),Object(H.a)({},"ROOT_CLASS--mobile",a)),to:"/".concat(t.isOrg?"org":"people","/").concat(t.urlToken||t.id)},s.a.createElement(K.a,{size:a?22:28,url:r,alt:o,round:!0}),s.a.createElement("span",{className:"".concat(ee,"-Author")},t.name),s.a.createElement(X,{badge:i,size:a?16:18,center:!0,badgeClassName:"".concat(ee,"-Badge")}),s.a.createElement("span",{className:"".concat(ee,"-Suffix")},"的提问")))}}]),t}(i.Component);te.propTypes={author:v.a.object.isRequired,isMobile:v.a.bool};var ne,ae,re,oe,ie=n(546),se=n(180),ce=n(2047),le=Object(se.a)(function(e){return{module:"TopicItem",content:{type:"Topic",token:e.item.id},trackCardShow:!0}})(ne=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.item;return s.a.createElement(ie.a,{className:"QuestionTopic"},s.a.createElement(ce.a,{noHoverCard:!1,topic:e}))}}]),t}(i.Component))||ne,ue=n(26),de=n(2010),me=n(2009),pe=n(2006),he=n(2007),fe=n(100),ve=n(41),be=n(119),ge=n(270),ye=n(520),we=n(524),Ee=(n(2445),[{value:"标点或格式错误",text:"标点或格式错误"},{value:"不构成提问",text:"不构成提问"},{value:"包含主观判断",text:"包含主观判断"},{value:"缺乏可信来源",text:"缺乏可信来源"},{value:"other",text:"其他"}]),Ce=[{title:"为什么修改问题？",subtitle:"请选择修改理由"},{title:"修改问题",subtitle:"描述精确的问题更易得到解答"},{title:"其他",subtitle:"请对你的举报补充说明"}],ke={title:"",step:0,isEditingTitle:!0,detail:{toHTML:function(){return""}},showToolbar:!1,reason:null,otherReason:"",videoQuestionConfirmShown:!1,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"",videoQuestionConfirmText:"",uploadModalShown:!1,errors:{title:null,detail:null,reason:null}},Oe=Object(b.connect)(function(e){return{notification:e.notification[B.c]||e.notification.updateQuestion}},{showNotification:B.h,updateQuestion:j.ab})((oe=re=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).handleModalClose=function(){e.editable&&e.editable.hasVideo("upload")?e.setState({uploadModalShown:!0}):(e.setState({step:0}),e.props.onClose())},e.handleVideoQuestionModalHide=function(){e.setState({videoQuestionConfirmShown:!1})},e.handleUploadModalHide=function(){e.setState({uploadModalShown:!1})},e.handleUploadModalConfirm=function(){e.setState({uploadModalShown:!1}),e.props.onClose()},e.handleSubmit=function(){e.setState({errors:e.validate()},function(){for(var t=e.state.errors,n=0,a=["title","reason"];n<a.length;n++){var r=a[n],o=t[r];if(o&&"error"===o.level){var i=e["".concat(r,"Input")];return void(i&&i.focus())}}e.editable.hasVideo("upload")?e.props.showNotification("请等待视频上传完成后发布","red",B.c):e.editable.hasImage("upload")?e.props.showNotification("请等待图片上传完成后发布","red",B.c):!e.editable.hasVideo()||e.context.currentUser.isOrg?e.editable.hasImage("error")||e.editable.hasVideo("error")&&!e.editable.hasVideo("error-review")?e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"上传失败",videoQuestionConfirmText:"草稿中含有上传失败的内容，请更改后重新提交"}):e.editable.hasVideo("error-review")||e.editable.hasVideo("censor")?e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"视频未通过审核",videoQuestionConfirmText:"视频中包含未通过审核的信息，请更改后重新提交"}):e.handleSubmitEditQuestion():e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!0,videoQuestionConfirmText:"包含视频的编辑将在审核完成后生效，是否继续？"})})},e.handleSubmitEditQuestion=function(){var t=e.props.detail,n=e.state,a=n.title,r=n.detail,o=n.reason,i=n.otherReason,s={question:{title:a},meta:{reason:"other"===o?i:o}},c=r.toHTML();c!==t&&(s.question.detail=c),Object.keys(s.question).length>0&&e.props.updateQuestion(e.props.id,s)},e.triggerImageUpload=function(){e.editable.handleKeyCommand("insert-image")},e.triggerVideoUpload=function(){e.editable.handleKeyCommand("insert-video")},e.handleError=function(t,n){Object(we.b)(t,n,e.props.showNotification,B.c)},e.handleBeforeVideoUpload=function(){return!e.props.isAnonymous},e.handleUploadError=function(t,n){switch(n){case"video":e.handleError("video-upload-error");break;case"image":e.handleError("image-upload-error",t)}},e.state=ke,e.onChangeTitle=e.handleChangeTitle.bind(Object(ue.a)(e)),e.onBlurTitle=e.handleBlurTitle.bind(Object(ue.a)(e)),e.onChangeDetail=e.handleChangeDetail.bind(Object(ue.a)(e)),e.onChangeReason=e.handleChangeReason.bind(Object(ue.a)(e)),e.onChangeOtherReason=e.handleChangeOtherReason.bind(Object(ue.a)(e)),e.toggleToolbar=e.toggleToolbar.bind(Object(ue.a)(e)),e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,a=n.notification,r=n.show,o=n.onClose,i=e.notification,s=e.show,c=e.title,l=e.detail;if(!r&&s&&this.setState({title:c,detail:{toHTML:function(){return l}}}),a!==i){var u=i.code,d=i.text;if(i.id)this.setState(ke),o();else switch(u){case 103003:this.setState(function(e){var t=e.errors;return{errors:Object.assign({},t,{title:{level:"error",text:"已经存在的问题"}})}},function(){return t.titleInput.focus()});break;case 103001:this.setState(function(e){var t=e.errors;return{errors:Object.assign({},t,{detail:{level:"error",text:"过长的补充说明"}})}},function(){return t.editable.focus()});break;default:this.setState(function(e){var t=e.errors;return{errors:Object.assign({},t,{overall:d})}})}}}},{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value,isEditingTitle:!0})}},{key:"handleBlurTitle",value:function(){this.setState({errors:this.validate("title",!0),isEditingTitle:!1})}},{key:"handleChangeDetail",value:function(e){this.setState({detail:e})}},{key:"handleChangeReason",value:function(e){var t=this,n=this.state.step;this.setState({reason:e,step:1},function(){0!==n?"other"===e&&t.reasonInput.focus():setTimeout(function(){return t.titleInput.focus()})})}},{key:"handleChangeOtherReason",value:function(e){this.setState({otherReason:e.target.value})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.errors;if(!e||"title"===e){var a=this.state.title,r=null;0!==a.length||t?a.length>51?r={level:"error",text:"问题标题超出 ".concat(a.length-51," 个字")}:a.length>0&&a.length<3?r={level:"error",text:"问题字数太少了吧"}:a.length>0&&-1===a.indexOf("?")&&-1===a.indexOf("？")?r={level:"error",text:"你还没有给问题添加问号"}:(a.match(/(\?|？)/g)||[]).length>1&&(r={level:"warning",text:"多个问题建议拆分"}):r={level:"error",text:"问题标题不能为空"},n=Object.assign({},n,{title:r})}if(!e||"reason"===e){var o=null,i=this.state,s=i.reason,c=i.otherReason;s&&("other"!==s||c)||(o={level:"error",text:"必选"}),n=Object.assign({},n,{reason:o})}return n}},{key:"toggleToolbar",value:function(){this.setState(function(e){return{showToolbar:!e.showToolbar}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,a=t.detail,r=t.questionType,o=this.state,i=o.title,l=o.step,u=o.isEditingTitle,d=o.showToolbar,m=o.reason,p=o.otherReason,h=o.uploadModalShown,f=o.videoQuestionConfirmShown,v=o.videoQuestionConfirmAllowContinue,b=o.videoQuestionConfirmTitle,g=o.videoQuestionConfirmText,y=o.errors,w=y.title,E=y.detail,C=y.reason,O=y.overall,j=null;if(u){var N=51-i.length;N>=0?N<10&&(j="还可以输入 ".concat(N," 个字")):j=s.a.createElement("span",{className:"QuestionAsk-error"},"问题标题超出 ",-N," 个字")}else w&&(j=s.a.createElement("span",{className:"QuestionAsk-".concat(w.level)},w.text));var S=null;return 0===l?S=s.a.createElement("div",null,Ee.map(function(t){return s.a.createElement("div",{className:"QuestionEdit-reason",key:t.value,onClick:function(){e.onChangeReason(t.value)}},t.text,s.a.createElement(de.a,null))})):1===l&&(S=s.a.createElement("div",{className:"QuestionAsk"},s.a.createElement(ve.b,{title:b,onClose:this.handleVideoQuestionModalHide},f&&s.a.createElement("div",{className:"QuestionAsk-videoAlert"},g,s.a.createElement(ve.a,null,v&&s.a.createElement(k.c,{preset:"primary",color:"blue",onClick:this.handleSubmitEditQuestion},"发布"),s.a.createElement(k.c,{onClick:this.handleVideoQuestionModalHide},"继续编辑")))),s.a.createElement(ve.b,{onClose:this.handleUploadModalHide},h&&s.a.createElement("div",{className:"QuestionAsk-onUploadModal"},"关闭弹窗将丢失上传中的视频内容",s.a.createElement(ve.a,null,s.a.createElement(k.c,{preset:"primary",color:"blue",onClick:this.handleUploadModalConfirm},"确认"),s.a.createElement(k.c,{onClick:this.handleUploadModalHide},"取消")))),s.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0},s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement(fe.a,{className:"QuestionAsk-title",onRef:function(t){e.titleInput=t},required:!0,multiline:!0,spread:!0,large:!0,rows:2,placeholder:"问题标题",value:i,onChange:this.onChangeTitle,onBlur:this.onBlurTitle})),j&&s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement("div",{className:"QuestionAsk-sectionHeader"},s.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},j))),s.a.createElement("div",{className:"QuestionAsk-section QuestionAsk-DetailSection"},s.a.createElement("div",{className:"QuestionAsk-sectionHeader"},s.a.createElement("span",{className:"QuestionAsk-label"},"问题描述（可选）："),s.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},s.a.createElement(ge.a,{label:"".concat(d?"收起":"展开","工具栏"),isActive:d,icon:me.a,onClick:this.toggleToolbar}),s.a.createElement(ge.a,{label:"插入图片",icon:pe.a,onClick:this.triggerImageUpload}),s.a.createElement(ge.a,{label:"上传视频",icon:he.a,onClick:this.triggerVideoUpload}))),s.a.createElement(ye.a,{onRef:function(t){e.editable=t},spread:!0,large:!0,allowDragAndDrop:!0,allowLinkCard:!0,minRows:2,allowToolbar:d,allowVideoTitleChange:!0,allowHeaderThree:!1,placeholder:"问题背景、条件等详细信息",defaultValue:a,onError:this.handleError,onUploadError:this.handleUploadError,onChange:this.onChangeDetail,onBeforeVideoUpload:this.handleBeforeVideoUpload})),E&&s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement("div",{className:"QuestionAsk-sectionHeader"},s.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},s.a.createElement("span",{className:"QuestionAsk-".concat(E.level)},E.text)))),s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement("div",{className:"QuestionAsk-sectionHeader"},s.a.createElement(be.b,{className:"QuestionEdit-reasonSelect",needsReposition:!0,plain:!0,text:m?null:"请选择一个修改理由",value:m,onChange:this.onChangeReason},Ee.map(function(e){return s.a.createElement(be.a,{key:e.value,value:e.value,text:e.text})})),(!m||"other"===m&&!p)&&(C?s.a.createElement("span",{className:"QuestionAsk-".concat(C.level)},C.text):"必选"),"org"===r||"commercial"===r||s.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},s.a.createElement(c.Link,{className:"QuestionEdit-why",target:"blank",to:"/question/19550238/answer/95068125"},"为什么问题可以被公共编辑？"))),"other"===m&&s.a.createElement(fe.a,{onRef:function(t){e.reasonInput=t},spread:!0,large:!0,value:p,placeholder:"请输入修改理由",onChange:this.onChangeOtherReason})),s.a.createElement(ve.a,null,s.a.createElement(k.c,{preset:"primary",color:"blue",onClick:this.handleSubmit},"提交修改"))))),s.a.createElement(ve.b,{className:1===l&&"QuestionAsk-Modal",title:Ce[l].title,subtitle:Ce[l].subtitle,footer:O,onClose:this.handleModalClose,hotKeyClosable:!1,maskClosable:!1},n&&S)}}]),t}(i.Component),re.propTypes={id:v.a.number,title:v.a.string,detail:v.a.string,show:v.a.bool.isRequired,onClose:v.a.func.isRequired,isAnonymous:v.a.bool},re.contextTypes={currentUser:v.a.object},ae=oe))||ae,je=n(22),Ne=n(44),Se=n.n(Ne),Ae=n(269),Te=n(30),Re=n.n(Te),Ie=n(2004),xe=n(190),Pe=(n(2751),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state={items:[],value:""},e.position=e.position.bind(Object(ue.a)(e)),e.handleRemove=e.handleRemove.bind(Object(ue.a)(e)),e.handleKeyDown=e.handleKeyDown.bind(Object(ue.a)(e)),e.handleChange=e.handleChange.bind(Object(ue.a)(e)),e.handleSelect=e.handleSelect.bind(Object(ue.a)(e)),e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleRemove",value:function(e){var t=this.props,n=t.value,a=t.onChange,r=t.onRemove;if(r&&r(e),a){var o=n.slice(0);o.splice(e,1),a(o)}}},{key:"handleKeyDown",value:function(e){var t=this.props.value;8===e.keyCode&&!this.state.value&&t.length&&this.handleRemove(t.length-1)}},{key:"handleChange",value:function(e){var t=this;this.setState({value:e}),e?this.props.fetchFn(e).then(function(e){t.setState({items:e.filter(function(e){return!t.props.value.find(function(t){return t.urlToken===e.urlToken})})})}):this.setState({items:[]})}},{key:"handleSelect",value:function(e,t){var n=this.props,a=n.value,r=n.onChange,o=n.onAdd;o&&o(t,this.state.value),r&&r([].concat(Object(x.a)(a),[t])),this.setState({value:"",items:[]})}},{key:"clearInput",value:function(){this.setState({value:"",items:[]})}},{key:"position",value:function(){var e=this.input.getBoundingClientRect(),t=e.left;return{targetContainerStyle:{top:e.bottom+13,left:t-13}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.inputProps,r=t.value,o=t.renderTagInner,i=t.alignWithInput,c=t.menuProps,l=t.onRef,u=t.after,d=Re()(t,["className","inputProps","value","renderTagInner","alignWithInput","menuProps","onRef","after"]),m=this.state,p=m.value,h=m.items;return s.a.createElement(xe.b,Object.assign({},d,{className:G()("TagInput",{"TagInput--empty":0===r.length},n),value:p,ref:function(t){e.autoComplete=t},onRef:function(t){l&&l(t),e.input=t},items:h,inputProps:Object.assign({},a,{onKeyDown:this.handleKeyDown,before:r.map(function(t,n){return s.a.createElement(ie.a,{key:n,removable:!0,onRemove:function(){return e.handleRemove(n)}},o(t))}),after:u}),menuProps:Object.assign({position:i?this.position:null,style:{maxHeight:256,overflow:"scroll"}},c),onChange:this.handleChange,onSelect:this.handleSelect}))}}]),t}(i.Component));Pe.propTypes={fetchFn:v.a.func.isRequired,renderTagInner:v.a.func.isRequired,value:v.a.array.isRequired,after:v.a.node,alignWithInput:v.a.bool,onChange:v.a.func,onAdd:v.a.func,onRemove:v.a.func},Pe.defaultProps={alignWithInput:!1,after:s.a.createElement(Ie.a,{fill:"#afbdcf",size:18})};var Me,Le=Pe,De=n(117),qe=n(24);function _e(e){return e.name.startsWith("创建 ")&&e.name.endsWith(" 话题")}var ze=Object(b.connect)(function(e){return{currentUser:Object(qe.c)(e)}},{createTopic:De.d,fillCurrentUserIfNeeded:qe.e})(Me=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).fetchTopic=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Ae.c.apply(void 0,t.concat([[],{topic_filter:1}])).then(function(e){e=e.filter(function(e){return!_e(e)});var a=n.props.currentUser,r=t[0];return a&&a.canEditTopic&&!e.find(function(e){return e.name===r})?[].concat(Object(x.a)(e),[{urlToken:"topic",name:"创建 ".concat(r," 话题"),token:r}]):e})},n.createTopic=function(e){(0,n.props.createTopic)(e).then(function(t){var a=t.payload,r=a.id,o=a.avatarUrl,i=n.props,s=i.value,c=i.onChange;c&&c(s.map(function(t){return t.name===e?{urlToken:r,name:e,avatarUrl:o}:t}))}).catch(function(){var t=n.props,a=t.value,r=t.onChange;r&&r(a.filter(function(t){return t.name!==e}))})},n.handleAdd=function(e,t){var a=n.props,r=a.value,o=a.onChange;if(_e(e))return n.createTopic(t),void(o&&o([].concat(Object(x.a)(r),[{name:t}])));o&&o([].concat(Object(x.a)(r),[e]))},n.handleRemove=function(e){var t=n.props,a=t.value,r=t.onChange,o=a.slice(0);o.splice(e,1),r&&r(o)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fillCurrentUserIfNeeded)(["canEditTopic"])}},{key:"render",value:function(){var e=Se()(this.props,["onChange"]),t=e.value,n=Object(je.a)(e,["value"]);return s.a.createElement(Le,Object.assign({inputProps:{large:!0,spread:!0,placeholder:"添加话题".concat(t.length>0?"（".concat(t.length,"/").concat(5,"）"):""),disabled:t.length>=5},fetchFn:this.fetchTopic,renderTagInner:function(e){return s.a.createElement("a",{target:"_blank",href:"//www.zhihu.com/topic/".concat(e.id||e.urlToken)},e.name)},value:t,alignWithInput:!0,onAdd:this.handleAdd,onRemove:this.handleRemove},n))}}]),t}(i.Component))||Me,Be={topics:[],errors:{topics:null,overall:null}},Qe=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state=Be,e.onChangeTopics=e.handleChangeTopics.bind(Object(ue.a)(e)),e.onBlurTopics=e.handleBlurTopics.bind(Object(ue.a)(e)),e.onSubmit=e.handleSubmit.bind(Object(ue.a)(e)),e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,a=n.notification,r=n.show,o=n.onClose,i=e.notification,s=e.show,c=e.topics;if(!r&&s&&(setTimeout(function(){return t.topicsInput.focus()}),this.setState({topics:c})),a!==i){var l=i.text;i.id?(this.setState(Be),o()):this.setState(function(e){var t=e.errors;return{errors:Object.assign({},t,{overall:l})}})}}},{key:"handleChangeTopics",value:function(e){this.setState({topics:e})}},{key:"handleBlurTopics",value:function(){this.setState({errors:this.validate("topics",!0)})}},{key:"handleSubmit",value:function(){var e=this;this.setState({errors:this.validate()},function(){for(var t=e.props.topics,n=e.state,a=n.topics,r=n.errors,o=0,i=["topics"];o<i.length;o++){var s=i[o],c=r[s];if(c&&"error"===c.level)return void e["".concat(s,"Input")].focus()}if(a!==t){var l={topicUrlTokens:a.map(function(e){return e.urlToken||e.id})};e.props.dispatch(Object(j.fb)(e.props.id,l))}})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.errors;if(!e||"topics"===e){var a=null;0!==this.state.topics.length||t||(a={level:"error",text:"至少添加一个话题"}),n=Object.assign({},n,{topics:a})}return n}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,a=t.onClose,r=this.state,o=r.topics,i=r.errors,c=i.topics,l=i.overall;return s.a.createElement(ve.b,{className:"QuestionAsk-Modal",size:"large",title:"修改话题",subtitle:"最多只能为一个问题绑定 5 个话题",footer:l,onClose:a},n&&s.a.createElement("div",{className:"QuestionAsk"},s.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0},s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement(ze,{onRef:function(t){e.topicsInput=t},value:o,onChange:this.onChangeTopics,onBlur:this.onBlurTopics})),c&&s.a.createElement("div",{className:"QuestionAsk-section"},s.a.createElement("div",{className:"QuestionAsk-sectionHeader"},s.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},s.a.createElement("span",{className:"QuestionAsk-".concat(c.level)},c.text)))),s.a.createElement(ve.a,null,s.a.createElement(k.c,{preset:"primary",color:"blue",onClick:this.onSubmit},"提交修改")))))}}]),t}(i.Component);Qe.propTypes={show:v.a.bool.isRequired,onClose:v.a.func.isRequired};var Ue=Object(b.connect)(function(e){return{notification:e.notification.updateQuestionTopics}})(Qe),Fe=n(2318),Ve=n(102),He=n(92),We=n(10),Ge=function(e){return s.a.createElement(We.a,e,s.a.createElement("path",{d:"M12 9h.009c4.65-.014 8.642 5.096 8.705 9.629 0 .36-.303.461-.592 0-1.474-2.544-3.878-3.862-7.03-3.862h-1.084L12 17.583a.7.7 0 0 1-1.125.556l-7.16-5.478a.7.7 0 0 1-.009-1.105l7.16-5.66a.7.7 0 0 1 1.134.55V9z"}))};Ge.defaultProps={name:"Undo"};var Ke=Ge,Ye=function(e){return s.a.createElement(We.a,e,s.a.createElement("path",{d:"M19.49 14.362l-2.03-1.83 1.116-1.137a1.352 1.352 0 0 1 1.921-.009c.535.535.54 1.4.01 1.94l-1.016 1.036zm-4.883 4.935a2.3 2.3 0 0 1-1.12.63l-1.136.264c-.29.058-.668-.105-.56-.56l.27-1.158a2.3 2.3 0 0 1 .599-1.09l3.809-3.84 2.03 1.829-3.892 3.925zM4.06 5H19.94C20.526 5 21 5.448 21 6s-.474 1-1.059 1H4.06C3.474 7 3 6.552 3 6s.474-1 1.059-1zM4 11h9a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h4a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z",fillRule:"evenodd"}))};Ye.defaultProps={name:"Preview"};var $e,Je,Ze,Xe,et,tt,nt=Ye,at=n(15),rt=n(790),ot=n(48),it=n(61),st=(n(2752),300),ct=($e=Object(b.connect)(function(e,t){return{draft:Object(j.m)(e,{id:t.params.id}),question:Object(j.S)(e,{id:t.params.id})}},{restoreAnswer:it.y,cancelScheduledPublish:it.d,showNotification:B.h}),Object(c.withRouter)(Je=$e((Xe=Ze=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).getRenderProps=function(){var e=n.props,t=e.draft,a=e.question,r=a.id,o=a.relationship,i=(o=void 0===o?{}:o).myAnswer;return i?i.isDeleted?{icon:s.a.createElement(Ke,{size:17,className:"QuestionButton-icon"}),text:"撤销删除",props:{onClick:n.handleRestoreAnswer}}:{icon:s.a.createElement(nt,{size:17,className:"QuestionButton-icon"}),text:"查看回答",props:{to:"/question/".concat(r,"/answer/").concat(i.answerId),onClick:n.handleFocusAnswer},Wrapper:ot.a}:{icon:s.a.createElement(L.a,{className:"QuestionButton-icon Button-icon",name:"modify"}),text:t?"编辑回答":"写回答",props:{onClick:n.handleAddAnswer}}},n.handleFocusAnswer=function(){var e=document.querySelector(".AnswerCard");e&&(e.classList.add("is-focus"),n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(function(){return e.classList.remove("is-focus")},st))},n.handleRestoreAnswer=function(){var e=n.props,t=e.question,a=t.relationship.myAnswer,r=t.id,o=e.restoreAnswer,i=e.showNotification;a.isDeleted&&o(r,a.answerId).then(function(){return i("已撤销删除回答")})},n.handleAddAnswer=n.context.authRequired(function(e){var t=n.props,a=t.draft,r=t.question.reviewInfo,o=(r=void 0===r?{}:r).tips,i=t.zaId,s=t.cancelScheduledPublish,c=e.currentTarget,l=function(){o?n.props.showNotification(o,"red"):(i&&at.default.trackEvent(null,{id:i}),at.default.trackEvent(Object(ue.a)(n),{action:a&&a.editableContent?"Edit":"Answer",is_intent:!0,name:c.textContent}),n.context.startAddAnswer())};a&&a.schedule?He.a.confirm("如果继续编辑该回答，原定时发送设置将会失效，需重新设置定时发送时间，是否继续编辑？",{title:"编辑回答",text:{ok:"继续编辑",cancel:"我再想想"}}).then(function(){s(n.props.question.id).then(l)},function(){}):l()}),n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){Object(rt.b)()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.size,r=e.preset,o=e.color,i=void 0===o?"blue":o,c=e.onClick,l=this.getRenderProps(),u=l.icon,d=l.text,m=l.props,p=l.Wrapper,h=void 0===p?k.c:p,f=s.a.createElement(s.a.Fragment,null,u,d);return s.a.createElement(h,Object.assign({},m,c&&{onClick:c},{color:i,size:a,preset:r,className:n}),t||f)}}]),t}(i.Component),Ze.contextTypes={authRequired:v.a.func,startAddAnswer:v.a.func},Je=Xe))||Je)||Je),lt=n(118),ut=n(507),dt=n(55),mt=(n(2753),et=Object(b.connect)(function(e){return{shouldOia:Object(dt.f)(e)}}),Object(c.withRouter)(tt=et(tt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).createOpenInAppHandler=function(e){var t=n.props.question.id;return function(){return Object(Ve.b)(Object(ut.a)({type:"question",id:t},{utm_content:e}))}},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,a=n.relationship,r=n.relationship.isAuthor,o=n.isNormal,i=n.status,c=(i=void 0===i?{}:i).isLocked,l=n.questionType,u=n.isMuted,d=n.id,m=e.shouldOia,p=e.inTopBar,h="commercial"===l&&u;return s.a.createElement("div",{className:"QuestionButtonGroup"},r&&h?s.a.createElement(ot.a,{preset:"primary",a:!0,to:"https://e.zhihu.com",color:"green"},"推广问题"):s.a.createElement(lt.a,Object.assign({id:d,zaId:p?3408:3309,type:"question",preset:"primary",isFollowing:(a&&{}.hasOwnProperty.call(a,"isFollowing")?a:t).isFollowing,disabled:h},m&&{onClick:this.createOpenInAppHandler("follow_question")})),o&&!c&&s.a.createElement(ct,Object.assign({color:"blue",zaId:p?3409:3311},m&&{onClick:this.createOpenInAppHandler("write_answer")})))}}]),t}(i.Component))||tt)||tt),pt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={count:Math.round(n.props.count)},n.next=function(){var e=n.props.onEnd,t=n.state.count-1;n.setState({count:t}),0===t&&(clearInterval(n.handle),e&&e())},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.state.count<=0||(this.handle=setInterval(this.next,this.props.interval))}},{key:"componentWillUnmount",value:function(){clearInterval(this.handle)}},{key:"render",value:function(){var e=this.state.count;return s.a.createElement("span",null,e)}}]),t}(i.Component);pt.propTypes={count:v.a.number.isRequired,interval:v.a.number,onEnd:v.a.func},pt.defaultProps={interval:1e3};var ht,ft,vt,bt,gt,yt,wt,Et=pt,Ct=n(247),kt=n(37),Ot=n(182),jt=n(91),Nt=n(153),St=n.n(Nt),At=n(65),Tt=n(496),Rt=n(101),It=n(120),xt=n(268),Pt=(n(2754),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.className,a=e.children,r=Object(je.a)(e,["to","className","children"]),o=G()("QuestionMainAction",n);return t?s.a.createElement(c.Link,Object.assign({to:t,className:o},r),a):s.a.createElement(k.c,Object.assign({className:o},r),a)}}]),t}(i.Component)),Mt=n(60),Lt=n(502),Dt=function(e,t){return e&&e.replace(new RegExp(t,"g"),function(e){return"<em>".concat(e,"</em>")})},qt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={mounted:!1},n.handleInvite=function(){var e=n.props,t=e.user.urlToken,a=e.onInvite;at.default.trackEvent(Object(ue.a)(n),{id:3314}),a(t)},n.getContainer=function(){return document.querySelector(".Modal-content .QuestionInvitation-content")},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.contributionsCount,a=e.topic,r=e.isInvited,o=e.keyword,i=e.reason,l=t.name,u=Object.assign({},t,{name:s.a.createElement(Ot.a,{inline:!0,html:Dt(l,o)})}),d=s.a.createElement(Lt.a,{user:u,status:i||(n?s.a.createElement("div",null,"在话题 ",s.a.createElement(ce.a,{topic:a})," 下有 ",s.a.createElement(c.Link,{to:"/people/".concat(t.urlToken,"/answers/topic/").concat(a.id)},Object(Mt.formatNumber)(n)," 个回答")):s.a.createElement(Ot.a,{html:t.headline})),action:s.a.createElement(k.c,{color:r?void 0:"blue",disabled:r,onClick:this.handleInvite},r?"已邀请":"邀请回答"),meta:null}),m={module:"UserItem",index:this.props.index,content:{member_hash_id:t.id},view:{id:o?4436:4437},extra:{search:{raw_query:o||""}},trackCardShow:!0};return this.state.mounted?s.a.createElement(z.a,Object.assign({getContainer:this.getContainer},m),d):d}}]),t}(i.Component),_t=n(262),zt=n(27),Bt=(n(2755),Object(b.connect)(null,{openAutoInvite:zt.M,closeAutoInvite:zt.d})((vt=ft=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){var e=n.props,t=e.questionId,a=e.closeAutoInvite,r=e.openAutoInvite;return"close"===e.item.status?(at.default.trackEvent(null,{id:3313}),r(t)):a(t)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.item,t=void 0===e?{}:e,n=t.avatar,a=t.description,r=t.status,o=t.title,i="close"===r;return s.a.createElement(_t.e,{data:t,image:s.a.createElement(K.a,{size:38,url:n}),title:o,meta:s.a.createElement(_t.d,null,a),className:"AutoInviteItem-wrapper--desktop",extra:s.a.createElement(k.c,{preset:"link",className:i?"AutoInviteItem-button--closed":"AutoInviteItem-button--open",onClick:this.handleClick},i?"开启邀请":"已开启")})}}]),t}(i.Component),ft.propTypes={questionId:v.a.number.isRequired,item:v.a.object},ht=vt))||ht),Qt=n(525),Ut=(n(2756),300),Ft=function(e){var t=e.user;return s.a.createElement("div",{className:"InviteeItem"},s.a.createElement("div",{className:"InviteeItem-content"},s.a.createElement(K.a,{url:t.avatarUrl,size:32,className:"InviteeItem-image"}),s.a.createElement("h4",{className:"InviteeItem-title"},t.name)))},Vt=Object(se.a)({module:"InvitationFrame"})((yt=gt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:!1,keyword:null},n.onChange=St()(function(e){n.props.onChange(e)},Ut),n.handleChange=function(e){var t=e.target.value;n.setState({keyword:t}),t&&n.onChange(t)},n.handleExpand=function(){(0,n.props.trackEvent)(Object(ue.a)(n),{action:"LoadMore",element:"Button"}),n.setState({expanded:!0})},n.handleInvite=function(e){var t=n.state.keyword;return(0,n.props.onInvite)(e,t)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"renderHeader",value:function(){var e=this.props,t=e.invitees,n=(e.expandCount,s.a.createElement(fe.a,{className:"QuestionInvitation-input",placeholder:"搜索你想邀请的人",onChange:this.handleChange,after:s.a.createElement(L.a,{grey:!0,name:"search"}),"data-tooltip":"也可以搜索职业、公司等资料","data-tooltip-position":"bottom"})),a=[t.length?s.a.createElement("span",null,"你已邀请 ",s.a.createElement(Rt.a,{toggler:s.a.createElement(k.c,{className:"Invitees-toggler",preset:"plain"},s.a.createElement("span",{className:"Invitees-togglerUsers"},t.slice(0,2).map(function(e,t){return s.a.createElement("span",{key:t},0===t?"":"、",s.a.createElement("span",null,e.name))})),t.length>2&&" 等 ".concat(t.length," 人")),toggleEvent:"hover",targetClassName:"Invitees-popover",arrowed:!0},s.a.createElement("div",{className:"Invitees"},t.map(function(e){return s.a.createElement(Ft,{key:e.urlToken,user:e})})))):s.a.createElement("h2",{className:"QuestionInvitation-title"},"你可以邀请下面用户，快速获得回答"),n],r=Object(l.a)(a,2),o=r[0],i=r[1];return s.a.createElement(Qt.a,{header:o,options:i})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,a=t.isDrained,r=t.items,o=t.searchItems,i=t.expandCount,c=t.autoInvitationItem,l=t.question,u=(l=void 0===l?{}:l).id,d=this.state,m=d.expanded,p=d.keyword,h=p?o:r,f=Boolean((void 0===i||i>0)&&!p&&h.length&&c&&c.status),v=f?i-1:i,b=!v||m,g=i?At.d:"div";return s.a.createElement(g,{className:"QuestionInvitation"},this.renderHeader(),n?s.a.createElement("div",{className:G()("QuestionInvitation-content","QuestionInvitation-content--centered")},s.a.createElement(It.a,null)):s.a.createElement("div",{className:G()("QuestionInvitation-content",{"QuestionInvitation-content--centered":!h.length})},h.length?s.a.createElement(z.a,{module:"UserList"},s.a.createElement(Tt.b,null,f&&s.a.createElement(Bt,{questionId:u,item:c}),(b?h:h.slice(0,v)).map(function(t){return s.a.createElement(Tt.a,{className:G()({"List-item--mobile":!1}),key:t.user.urlToken},s.a.createElement(qt,Object.assign({},t,{keyword:p,onInvite:e.handleInvite})))}))):s.a.createElement(xt.a,{entityType:"users",placeholder:a?"没有可以邀请的人":"没有找到你想邀请的人"}),h.length>v&&!b&&s.a.createElement(Pt,{onClick:this.handleExpand},"更多推荐结果")))}}]),t}(i.Component),gt.propTypes={expandCount:v.a.number,items:v.a.array,searchItems:v.a.array,onInvite:v.a.func.isRequired},bt=yt))||bt;var Ht,Wt,Gt,Kt,Yt,$t=Object(b.connect)(function(e,t){var n=t.question.id,a=e.entities,r=a.users,o=a.topics,i=e.question,s=i.invitationCandidates,c=i.invitees,l=i.autoInvitation,u=function(e){var t=e.member,n=e.isInvited,a=e.topicContributions,i=e.reason,s=a&&a.sort(function(e,t){return t.contributionsCount-e.contributionsCount})[0]||{},c=s.topic,l=s.contributionsCount;return{user:r[t],topic:o[c],isInvited:n,contributionsCount:l,reason:i}},d=s[n]||{isFetching:!1,isDrained:!1,items:[],searchItems:[]},m=d.isFetching,p=d.isDrained,h=d.items,f=d.searchItems,v=(c[n]||{items:[]}).items;return{isFetching:m,isDrained:p,items:h.map(u),searchItems:f.map(u),invitees:v.map(function(e){return r[e]}),autoInvitationItem:l[n]}},{loadItems:j.G,updateInvitation:j.Y,loadAutoInvitation:j.v})(wt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=n.props,a=t.question.id;(0,t.loadItems)(a,"invitationCandidates",{keyword:e})},n.handleInvite=function(e,t){n.props.updateInvitation(n.props.question.id,e,t?"search":"normal")},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,a=t.status,r=(a=void 0===a?{}:a).isLocked,o=a.isClose,i=a.isEvaluate,s=a.isSuggest,c=e.loadItems,l=e.loadAutoInvitation;e.isDrained||r||o||i||s||(c(n,"invitationCandidates"),c(n,"invitees"),l(n))}},{key:"render",value:function(){var e=this.props.question.status,t=e.isLocked,n=e.isClose,a=e.isEvaluate,r=e.isSuggest;return t||n||a||r?null:s.a.createElement(Vt,Object.assign({onChange:this.handleChange,onInvite:this.handleInvite},this.props))}}]),t}(i.Component))||wt,Jt=n(133);n(2757);var Zt,Xt=(Ht=Object(Jt.a)({replacement:null}),Wt=Object(b.connect)(function(e,t){var n=e.entities.questions,a=e.question.inviters,r=t.location.query,o=t.question.id,i={isMuteSpecial:Object(j.u)(t.question),inviters:a[o]};if(r.rf&&/^\d+$/.test(r.rf)){var s=n[Number(r.rf)];s&&(i.fromQuestion=s)}return i},{loadItems:j.G,loadQuestion:j.I,revokeQuestionRedirection:j.U,deleteInviters:j.j}),Ht(Gt=Object(c.withRouter)(Gt=Wt((Yt=Kt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1,invitationModalShown:!1},n.redirect=function(){var e=n.props,t=e.router,a=e.location.query,r=e.question,o=r.id,i=r.redirection;i&&i.to&&i.to.id&&"1"!==a.nr&&t.push("/question/".concat(i.to.id,"?rf=").concat(o))},n.handleRedirectionClose=function(){n.setState({redirectionHidden:!0,invitersHidden:!0}),n.timeout=setTimeout(function(){n.setState({invitersHidden:!1})},1e3)},n.handleCloseInviters=function(){n.setState({invitersHidden:!0})},n.handleDeleteInviters=function(e){var t=n.props,a=t.question.id;(0,t.deleteInviters)(a),n.handleCloseInviters(),at.default.trackEvent(e.target,{action:"Ignore"})},n.handleCancelAnonymous=function(){(0,n.props.onInvitationTipClose)(),n.context.toggleAnonymous(!1)},n.handleInvite=function(e){n.setState({invitersHidden:!0,invitationModalShown:!0}),at.default.trackEvent(e.target,{action:"Invite",is_intent:!0})},n.handleInvitationModalHide=function(){n.setState({invitationModalShown:!1})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){Object(kt.isBrowser)()&&this.nextQuestion(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.nextQuestion(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"nextQuestion",value:function(e){var t=this,n=this.context.currentUser,a=e.location.query,r=e.question.id,o=e.fromQuestion,i=e.loadItems,s=e.loadQuestion;clearTimeout(this.timeout),this.setState({redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1}),n&&"guest"!==n.userType&&i(r,"inviters"),a.rf&&/^\d+$/.test(a.rf)&&!o&&(this.setState({redirectionLoading:!0}),s(Number(a.rf)).catch(function(){}).then(function(){t.setState({redirectionLoading:!1})}))}},{key:"revokeRedirection",value:function(e){var t=this.props,n=t.router,a=t.question.id;(0,t.revokeQuestionRedirection)(e).then(function(){n[e===a?"replace":"push"]("/question/".concat(e))}),this.handleRedirectionClose()}},{key:"renderCommercialMuteStatus",value:function(){var e=this.props.question,t=e.questionType,n=e.isMuted;return e.relationship.isAuthor&&"commercial"===t&&n?s.a.createElement("div",{className:"QuestionStatus-bar"},s.a.createElement("div",{className:"QuestionStatus-bar-inner"},s.a.createElement("div",{className:"QuestionStatus-bar-commercialMuted"},"该品牌提问尚未激活，无法在社区内流通。请"," ",s.a.createElement("a",{href:"https://e.zhihu.com",target:"_blank",rel:"noopener noreferrer"},"前往广告平台")," ","进行设置。"),s.a.createElement("p",null,"未激活的品牌提问页可以添加回答，但相关动态不在社区内流通，包括不会出现在知乎首页、用户主页，也不会被搜索到。当与该品牌提问关联的广告开始投放时，提问被激活，并开始流通。"))):null}},{key:"renderMute",value:function(){if(this.props.isMuteSpecial)return s.a.createElement("div",{className:"QuestionStatus-bar"},s.a.createElement("div",{className:"QuestionStatus-bar-inner"},s.a.createElement("strong",null,"问题已解散。"),s.a.createElement("p",null,"当前问题下的回答暂时无法查看。")))}},{key:"renderBar",value:function(){var e=this.props.question.status.unnormalDetails;return e&&s.a.createElement("div",{className:"QuestionStatus-bar"},s.a.createElement("div",{className:"QuestionStatus-bar-inner"},s.a.createElement("strong",null,e.description,"。"),s.a.createElement("em",null,"原因：",e.reason,"。"),1033!==e.reasonId&&s.a.createElement(Ot.a,{html:e.note})))}},{key:"renderNotification",value:function(){var e=this,t=this.props,n=t.location.query,a=t.question,r=a.id,o=a.redirection,i=a.relationship,c=(i=void 0===i?{}:i).myAnswer,l=t.inviters,u=t.fromQuestion,d=t.isAnswerPage,m=this.state,p=m.redirectionLoading,h=m.redirectionHidden,f=m.invitersHidden,v=null,b=null;if(!p)if(o&&o.to&&o.to.id&&!h){var g=o.to,y=g.id,w=g.title,E="1"!==n.nr&&!d;v=E?"redirect-countdown":"redirect",b=s.a.createElement("div",{className:"QuestionStatus-notification-inner"},s.a.createElement("div",{className:"QuestionStatus-notification-content"},E?s.a.createElement("span",null,"此问题将在 ",s.a.createElement(Et,{count:5,onEnd:this.redirect})," ","秒后跳转至"):s.a.createElement("span",null,"此问题已重定向至")," ",s.a.createElement(ot.a,{preset:"plain",to:"/question/".concat(y,"?rf=").concat(r)},w)),s.a.createElement("div",{className:"QuestionStatus-notification-actions"},s.a.createElement(k.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(r)}},"撤销重定向"),s.a.createElement("div",{className:"QuestionStatus-notification-divider"}),s.a.createElement(k.c,{preset:"plain",onClick:this.handleRedirectionClose},"关闭")))}else if(u&&u.redirection&&u.redirection.to&&u.redirection.to.id&&u.redirection.to.id===r&&!h){var C=u.id,O=u.title;v="redirect-from",b=s.a.createElement("div",{className:"QuestionStatus-notification-inner"},s.a.createElement("div",{className:"QuestionStatus-notification-content"},"从问题"," ",s.a.createElement(ot.a,{preset:"plain",to:"/question/".concat(C,"?nr=1")},O)," ","跳转而来"),s.a.createElement("div",{className:"QuestionStatus-notification-actions"},s.a.createElement(k.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(C)}},"撤销重定向"),s.a.createElement("div",{className:"QuestionStatus-notification-divider"}),s.a.createElement(k.c,{preset:"plain",onClick:this.handleRedirectionClose},"关闭")))}else l&&l.length&&!f&&!c&&(b=s.a.createElement(z.a,{module:"InvitationCard",trackCardShow:!0},s.a.createElement("div",{className:"QuestionStatus-notification-inner"},s.a.createElement("div",{className:"QuestionStatus-notification-content"},l.map(function(e,t){return s.a.createElement("span",{key:e.urlToken},0!==t&&"、",s.a.createElement(jt.a,{user:e,noBadge:!0,noHoverCard:!0,"data-za-detail-view-element_name":"User"}))})," ","邀请你回答此问题"),s.a.createElement("div",{className:"QuestionStatus-notification-actions"},s.a.createElement(k.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleInvite},"邀请别人"),s.a.createElement("div",{className:"QuestionStatus-notification-divider"}),s.a.createElement(k.c,{preset:"plain",onClick:this.handleDeleteInviters},"忽略邀请")),s.a.createElement("div",null,s.a.createElement(k.c,{className:"QuestionStatus-notification-closeButton",preset:"plain",onClick:this.handleCloseInviters},s.a.createElement(L.a,{name:"remove",width:11,height:11}))))));return s.a.createElement(Ct.a,{className:"QuestionStatus-notification",notification:b?{key:v,text:b}:null})}},{key:"renderInvitationTip",value:function(){var e=this.props,t=e.invitationTipShown,n=e.onInvitationTipClose;return s.a.createElement(Ct.a,{className:"QuestionStatus-notification",notification:t?{text:s.a.createElement("div",{className:"QuestionStatus-notification-inner"},s.a.createElement("div",{className:"QuestionStatus-notification-content"},"在匿名状态下无法邀请他人回答"),s.a.createElement("div",{className:"QuestionStatus-notification-actions"},s.a.createElement(k.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleCancelAnonymous},"取消匿名"),s.a.createElement("div",{className:"QuestionStatus-notification-divider"}),s.a.createElement(k.c,{preset:"plain",onClick:n},"关闭")))}:null})}},{key:"render",value:function(){var e=this.props.question,t=this.state.invitationModalShown;return s.a.createElement("div",{className:"QuestionStatus"},this.renderCommercialMuteStatus(),this.renderMute(),this.renderBar(),this.renderNotification(),this.renderInvitationTip(),s.a.createElement(O.b,{size:"fullPage",onClose:this.handleInvitationModalHide},t&&s.a.createElement($t,{question:e})))}}]),t}(i.Component),Kt.contextTypes={currentUser:v.a.object,toggleAnonymous:v.a.func},Gt=Yt))||Gt)||Gt)||Gt),en=n(121),tn=n(2086);var nn,an,rn,on=Object(b.connect)(function(e,t){var n=t.parent.id,a=e.entities.users,r=e.question,o=r.followers,i=r.concernedFollowers,s=o[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},c=s.isFetching,l=s.isDrained,u=s.order,d=s.ids,m=(i[n]||{ids:[]}).ids;return{isFetching:c,isDrained:l,order:u,items:[].concat(Object(x.a)(m),Object(x.a)(d.filter(function(e){return!m.includes(e)}))).map(function(e){return a[e]}),currentUser:Object(qe.c)(e)}},{loadQuestionFollowers:j.L})(Zt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).load=function(){var e=n.props,t=e.parent.id;(0,e.loadQuestionFollowers)(t)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.parent.followerCount,n=e.isFetching,a=e.isDrained,r=e.items,o=e.currentUser;return s.a.createElement(tn.a,{currentUser:o,isFetching:n,isDrained:a,items:r,voteupCount:t,onLoad:this.load,text:"关注了"})}}]),t}(i.Component))||Zt,sn=n(284);n(2758);function cn(){var e=Object(I.a)(["","也关注了该问题"]);return cn=function(){return e},e}var ln=(nn=Object(b.connect)(function(e,t){var n=t.params;return{currentUser:Object(qe.c)(e),concernedFollowers:Object(j.e)(e,{id:n.id})}},{loadQuestionConcernedFollowers:j.K}),an=Object(sn.a)({shouldLoad:function(e){return e.currentUser&&!e.concernedFollowers},load:function(e){return e.loadQuestionConcernedFollowers(e.params.id)}}),Object(c.withRouter)(rn=nn(rn=an(rn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={followersShown:!1},n.showFollowers=function(){n.setState({followersShown:!0})},n.closeFollowers=function(){n.setState({followersShown:!1})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.currentUser,a=e.concernedFollowers,r=t.followerCount,o=t.visitCount,i=this.state.followersShown;return s.a.createElement("div",{className:"QuestionFollowStatus"},s.a.createElement(en.a,{divider:!0,className:"QuestionFollowStatus-counts"},n?s.a.createElement(en.a.Item,{tag:k.c,preset:"plain",onClick:this.showFollowers,name:"关注者",value:r}):s.a.createElement(en.a.Item,{name:"关注者",value:r}),s.a.createElement(en.a.Item,{name:"被浏览",value:o})),Boolean(a&&a.length)&&s.a.createElement(k.c,{preset:"plain",className:"QuestionFollowStatus-people",onClick:this.showFollowers},s.a.createElement("span",{className:"QuestionFollowStatus-people-tip"},M()(cn(),1===a.length?a[0].name:"他们")),a.map(function(e){return s.a.createElement(jt.a,{user:e,avatar:!0,avatarProps:{size:26,round:!0},noLink:!0,noBadge:!0,noHoverCard:!0,key:e.id})})),s.a.createElement(ve.b,{size:"fullPage",onClose:this.closeFollowers},i&&s.a.createElement(on,{parent:t})))}}]),t}(i.Component))||rn)||rn)||rn),un=n(2251),dn=n(2761),mn=n(2015),pn=n(1988),hn=n(50),fn=n(19),vn=n(2063),bn=n(2021),gn=n(185);function yn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}n(2759);var wn,En,Cn,kn,On,jn,Nn,Sn,An,Tn=Object(b.connect)()(wn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={value:"",items:[]},n.handleChange=function(e){var t=n.props.dispatch;n.setState({value:e});var a=e.match(/^https:\/\/www.zhihu.com\/question\/(\d+)/);a?t(Object(j.N)(a[1])).then(function(e){var t=e.payload;n.setState({items:[{name:t.title,urlToken:t.id}]})}):Object(Ae.b)(e).then(function(e){n.setState({items:e})})},n.handleSelect=function(e,t){var a=n.props,r=a.dispatch,o=a.question.id,i=a.onSubmitted,s=t.urlToken,c=r(Object(j.f)(o,s));i&&i({id:s},c)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.items;return s.a.createElement("div",{className:"QuestionRedirectionCreator"},s.a.createElement("div",{className:"QuestionRedirectionCreator-content"},s.a.createElement(xe.b,{value:t,items:n,inputProps:{spread:!0,large:!0,after:s.a.createElement(L.a,{grey:!0,name:"search"})},menuProps:{targetClassName:"QuestionRedirectionCreator-menu"},onChange:this.handleChange,onSelect:this.handleSelect})))}}]),t}(i.Component))||wn,Rn=n(34),In=n.n(Rn),xn=n(2295),Pn=n(274),Mn=n(2248),Ln=(En=Object(b.connect)(function(e,t){return{isMuteSpecial:Object(j.u)(t.question)}}),Object(c.withRouter)(Cn=En((On=kn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={commentsShown:!1},n.handleCommentsShow=function(){var e=n.props,t=e.question.reviewInfo.tips,a=e.handleReviewingNotification;t?a():(at.default.trackEvent(Object(ue.a)(n),{action:"Comment",element:"Button",is_intent:!0}),n.setState({commentsShown:!0}))},n.handleCommentsClose=function(){n.setState({commentsShown:!1})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,n=e.router.location,a=n.pathname,r=n.search,o=Boolean(/^\/question\/(\d*)$/.test(a)),i=Object(Rn.parse)(location.search.slice(1)).answer_deleted_redirect;if(o&&"true"!==i){var s=Object(Mn.a)(location.hash);this.setState({byComment:s}),s&&(t.replace("".concat(a).concat(r)),this.handleCommentsShow())}}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState({commentsShown:!1})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.textStyle,a=e.isMuteSpecial,r=t.commentCount,o=t.adminClosedComment,i=this.state.commentsShown,c="",l=r&&!o;return c="textNumber"===n?l?"评论 ".concat(Object(Mt.formatNumber)(r)):"":l?"".concat(Object(Mt.formatNumber)(r)," 条评论"):"添加评论",s.a.createElement("div",{className:"QuestionHeader-Comment"},s.a.createElement(k.c,{preset:"plain",onClick:this.handleCommentsShow,icon:xn.a,label:c,disabled:a}),s.a.createElement(O.b,{size:"fullPage",onClose:this.handleCommentsClose},i&&s.a.createElement(Pn.a,{type:"question",parent:t,byComment:this.state.byComment,commentNeedsReview:"censor"===t.commentPermission})))}}]),t}(i.Component),kn.propTypes={question:v.a.object.isRequired,handleReviewingNotification:v.a.func.isRequired},Cn=On))||Cn)||Cn),Dn=(n(2760),{invitationShown:!1,reportShown:!1,lockTipsShown:!1,deleteShown:!1,redirectionCreatorShown:!1}),qn=[{key:"all",name:"开放评论"},{key:"censor",name:"预审评论"},{key:"nobody",name:"关闭评论"}],_n=[{key:"open",name:"开放回答"},{key:"censor",name:"预审回答"}],zn=(jn=Object(b.connect)(function(e,t){return{shouldOia:Object(dt.f)(e),isMuteSpecial:Object(j.u)(t.question),publicEditPermission:e.publicEditPermission,currentUserUrlToken:e.currentUser,permission:Object(j.Q)(e),allowCommercialAnonymousAnswer:"show"===Object(dt.a)(e,"gue_anonymous")}},{deleteQuestion:j.k,deleteBrandQuestion:j.h,updateQuestionLocked:j.db,showNotification:B.h,updateQuestionPermission:j.eb,updateBrandQuestionOpenStatus:j.W}),Object(c.withRouter)(Nn=jn((An=Sn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state=Dn,n.handleReviewingNotification=function(){var e=n.props.question.reviewInfo.tips;n.props.showNotification(e,"red")},n.handleInvite=n.context.authRequired(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).eventId,t=void 0===e?3312:e;at.default.trackEvent(null,{id:t});var a,r=n.props,o=r.question,i=o.relationship.isAnonymous,s=o.status,c=(s=void 0===s?{}:s).isLocked,l=s.isClose,u=s.isEvaluate,d=s.isSuggest,m=o.reviewInfo,p=(m=void 0===m?{}:m).tips,h=r.onInvitationTipShow;p?n.handleReviewingNotification():i?h():(c?a="锁定":l?a="关闭":(u||d)&&(a="建议修改"),a?n.props.showNotification("该问题已被".concat(a,"，不能邀请人回答此问题"),"red"):n.handleInvitationShow())},fn.N.invite),n.handleInvitationShow=function(){return n.setState({invitationShown:!0})},n.handleInvitationHide=function(){return n.setState({invitationShown:!1})},n.handleReport=function(){n.setState({reportShown:!n.state.reportShown})},n.handleLockClick=function(){return n.props.question.status.isLocked?n.handleUpdateQuestionLocked():n.handleLockTipsShow()},n.handleOpenStatusChange=function(e){var t=n.props;(0,t.updateBrandQuestionOpenStatus)(t.question.id,e)},n.handleUpdateQuestionLocked=function(){var e=n.props,t=e.question.id;(0,e.updateQuestionLocked)(t)},n.handleLockTipsShow=function(){return n.setState({lockTipsShown:!0})},n.handleLockTipsHide=function(){return n.setState({lockTipsShown:!1})},n.handleDelete=function(){return n.setState({deleteShown:!0})},n.handleDeleteModalClose=function(){return n.setState({deleteShown:!1})},n.handleConfirmDelete=function(){n.handleDeleteModalClose();var e=n.props,t=e.question,a=t.id,r=t.questionType,o=e.deleteQuestion,i=e.deleteBrandQuestion;return("commercial"===r?i:o)(a).then(function(){location.href="/"})},n.handleRedirectionCreatorShow=function(){n.props.question.reviewInfo.tips?n.handleReviewingNotification():n.setState({redirectionCreatorShown:!0})},n.handleRedirectionCreatorClose=function(){n.setState({redirectionCreatorShown:!1})},n.handleRedirectionCreated=function(e,t){var a=n.props,r=a.router,o=a.question.id,i=e.id;n.handleRedirectionCreatorClose(),t.then(function(){r.push("/question/".concat(i,"?rf=").concat(o))})},n.handleCommentPermissionChange=function(e){var t=n.props;(0,t.updateQuestionPermission)(t.question.id,e)},n.handleShareMenuTogglerClick=function(){var e=n.props.question.reviewInfo;return!(e=void 0===e?{}:e).tips||(n.handleReviewingNotification(),!1)},n.toggleAnonymous=function(){var e=n.props.question.reviewInfo,t=e.tips,a=e.editTips;t?n.handleReviewingNotification():a?n.props.showNotification(a,"red"):n.context.toggleAnonymous()},n.getQuestionStatus=function(){var e=n.props.question.status,t=(e=void 0===e?{}:e).isClose,a=e.isEvaluate,r=e.isLocked,o=e.isSuggest;return t?"closed":o?"suggested":a?"evaluated":r?"locked":""},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.getHandleInvite;e&&e(this.handleInvite)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState(Dn)}},{key:"renderCommercialMenuItems",value:function(e){var t=this,n=this.props,a=n.permission.canBrandAdminEdit,r=n.question,o=r.status,c=(o=void 0===o?{}:o).isLocked,l=r.commentPermission,u=r.brandOpenStatus;if(!a)return null;var d=qn,m=_n;return s.a.createElement(i.Fragment,null,d.map(function(n){var a=n.key,r=n.name,o=!l&&"all"===a||l===a;return s.a.createElement(hn.b,{key:a,className:e,onClick:function(){return t.handleCommentPermissionChange(a)}},o&&s.a.createElement(un.a,{className:"MenuItem-icon",text:!0,center:!0})," ",r)}),s.a.createElement("li",{className:"Menu-divider"}),!c&&m.map(function(n){var a=n.key,r=n.name,o=u===a;return s.a.createElement(hn.b,{key:a,className:e,onClick:function(){return!o&&t.handleOpenStatusChange(a)}},o&&s.a.createElement(un.a,{className:"MenuItem-icon",text:!0,center:!0})," ",r)}),s.a.createElement(hn.b,{className:e,onClick:this.handleLockClick},c?"开放回答":"关闭回答"),s.a.createElement("li",{className:"Menu-divider"}))}},{key:"renderMobileMenuItems",value:function(e){var t=this.props,n=t.question.id,a=t.shouldOia;return e.map(function(e){var t=e.text,r=e.handler;return s.a.createElement(hn.b,{key:t,onClick:a?function(){return Object(Ve.b)(Object(ut.a)({type:"question",id:n},{utm_content:"invite"}))}:r},t)})}},{key:"renderLogMenuItem",value:function(){var e=this.props,t=e.question.id;return e.shouldOia?s.a.createElement(hn.b,{onClick:function(){return Object(Ve.b)(Object(ut.a)({type:"question",id:t}))}},"查看问题日志"):s.a.createElement(hn.b,{tag:ot.a,a:!0,to:"/question/".concat(t,"/log")},"查看问题日志")}},{key:"render",value:function(){var e=this.state,t=e.invitationShown,n=e.reportShown,a=e.lockTipsShown,r=e.deleteShown,o=e.redirectionCreatorShown,i=this.props,c=i.question,l=i.question,u=l.id,d=l.title,m=l.answerCount,p=l.collapsedAnswerCount,h=l.relationship,f=h.isAuthor,v=h.isAnonymous,b=l.questionType,g=l.isEditable,y=l.author.urlToken,w=i.isMuteSpecial,E=i.publicEditPermission,C=(E=void 0===E?{}:E).isQuestionRedirectEditable,j=i.currentUserUrlToken,N=i.permission.canBrandAdminEdit,S=this.context.currentUser,A="commercial"===b,T=S&&!f,R=A?N:Boolean(f&&0===m&&0===p),I=[T&&{text:"举报",icon:dn.a,handler:this.handleReport}].filter(Boolean),x=yn(g,y===j,C),P=this.shouldShowAnonymousMenuItem,M=P||this.shouldShowMenu,L=G()("QuestionHeader-menu-item",{"QuestionHeader-menu-item--com":A});return s.a.createElement("div",{className:"QuestionHeaderActions"},s.a.createElement(k.c,{color:"grey",style:{marginRight:16},onClick:this.handleInvite,label:"邀请回答",icon:mn.a,disabled:w}),s.a.createElement(Ln,{question:c,handleReviewingNotification:this.handleReviewingNotification}),s.a.createElement(bn.a,{id:u,title:d,href:"/question/".concat(u),onTogglerClick:this.handleShareMenuTogglerClick,type:"question",disabled:w}),I.map(function(e){var t=e.text,n=e.icon,a=e.handler,r=e.disabled;return s.a.createElement(k.c,{key:t,preset:"plain",onClick:a,label:t,icon:n,disabled:r})}),M&&s.a.createElement(hn.c,{toggler:s.a.createElement(k.c,{preset:"plain","aria-label":"更多",icon:pn.a}),menuClassName:"QuestionHeader-menu",itemClassName:L},!1,P&&s.a.createElement(hn.b,{onClick:this.toggleAnonymous},v?"取消匿名身份":"使用匿名身份"),A&&this.renderCommercialMenuItems(L),R&&s.a.createElement(hn.b,{onClick:this.handleDelete},"删除问题"),x&&!S.isOrg&&"normal"===b&&s.a.createElement(hn.b,{onClick:this.handleRedirectionCreatorShow},"问题重定向"),!A&&this.renderLogMenuItem()),s.a.createElement(gn.a,{type:"question",urlToken:u,shown:n,status:this.getQuestionStatus(),onClose:this.handleReport,zaEnabled:!0}),s.a.createElement(O.b,{size:"fullPage",onClose:this.handleInvitationHide},t&&s.a.createElement($t,{question:c})),s.a.createElement(vn.a,{title:A?"关闭回答":"锁定问题",subtitle:"".concat(A?"关闭":"锁定","后该问题将无法添加新回答，你确定要").concat(A?"关闭":"锁定","吗？"),shown:a,onCancel:this.handleLockTipsHide,onSubmit:this.handleUpdateQuestionLocked}),s.a.createElement(O.b,{size:"large",title:"问题重定向",onClose:this.handleRedirectionCreatorClose},o&&s.a.createElement(Tn,{question:c,onSubmitted:this.handleRedirectionCreated})),s.a.createElement(vn.a,{title:"删除问题",subtitle:"你确定要删除这个问题吗？相关的评论也将被删除。",onCancel:this.handleDeleteModalClose,onSubmit:this.handleConfirmDelete,shown:r}))}},{key:"shouldShowAnonymousMenuItem",get:function(){var e=this.context.currentUser;if(e&&!e.isOrg){var t=this.props,n=t.question,a=n.questionType,r=n.relationship.isAnonymous,o=t.allowCommercialAnonymousAnswer;if(r)return!0;if("normal"===a)return!0;if("commercial"===a&&o)return!0}return!1}},{key:"shouldShowMenu",get:function(){var e=this.props,t=e.question.questionType,n=e.permission.canBrandAdminEdit,a="commercial"===t;return!a||!(!a||!n)}}]),t}(i.PureComponent),Sn.contextTypes={currentUser:v.a.object,authRequired:v.a.func,toggleAnonymous:v.a.func},Nn=An))||Nn)||Nn),Bn=n(2327),Qn=(n(2762),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleTrackClick=function(e){at.default.trackEvent(e.target,{id:4026,action:"Click"})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){at.default.trackCardShow(this,{id:4025})}},{key:"render",value:function(){if(this.props.tips){var e=this.props.tips,t=e.text,n=e.link;return s.a.createElement("a",{className:"CircleDiscussion",href:n,onClick:this.handleTrackClick,target:"_blank"},s.a.createElement(Bn.a,{className:"CircleDiscussion-icon",size:16}),s.a.createElement("span",{className:"CircleDiscussion-text"},s.a.createElement("span",null,t),s.a.createElement("span",null,"了解更多")))}}}]),t}(i.Component)),Un=n(2226),Fn=(n(2763),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.brand,t=e.name,n=e.logo,a=e.target,r=e.description,o=e.typeDescription,i=a?"a":"div";return s.a.createElement("div",{className:G()("BrandQuestionSymbol",{"is-mobile":!1})},s.a.createElement(i,Object.assign({className:"BrandQuestionSymbol-brandLink"},a&&{href:this.memberProfileUrl}),s.a.createElement("img",{role:"presentation",src:n,className:"BrandQuestionSymbol-logo"}),s.a.createElement("span",{className:"BrandQuestionSymbol-name"},t),a&&s.a.createElement(Un.a,{badge:a.badge,isOrg:a.isOrg,noLink:!0})),s.a.createElement("span",null,r),Boolean(o)&&s.a.createElement("span",{className:"BrandQuestionSymbol-typeDesc"},o),!this.props.noDivider&&s.a.createElement("div",{className:"BrandQuestionSymbol-divider"}))}},{key:"memberProfileUrl",get:function(){var e=this.props.brand.target;return"/".concat("organization"===e.userType?"org":"people","/").concat(e.urlToken)}}]),t}(i.Component)),Vn=n(870),Hn=n.n(Vn),Wn=864e5;function Gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(t),a=e-Math.floor(n.getTime()/1e3);if(a<0)return null;var r,o,i,s,c,l,u=0;if(a>86400){var d=new Date(1e3*e);o=d,i=new Date(n),s=new Date(o),c=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate()),l=Date.UTC(s.getFullYear(),s.getMonth(),s.getDate()),u=Math.floor((l-c)/Wn),r="天"}else a>3600?(u=Math.floor(a/3600),r="小时"):a>60?(u=Math.floor(a/60),r="分钟"):(u=a,r="秒");return{quantity:u,unit:r}}var Kn=n(2764),Yn=n.n(Kn);n(2765);function $n(e){var t=["一","二","三"],n=function(){var t=e.question,n=t.id,a=t.prize,r=a.endTime,o=a.rule,i=a.status;return s.a.createElement("div",{className:"BrandQuestionPrizes-tips"},s.a.createElement("div",{className:"BrandQuestionPrizes-tip"},s.a.createElement("span",{className:"BrandQuestionPrizes-tipTitle"},"活动时间","："),Hn()(new Date(1e3*r),"YYYY-MM-DD HH:mm")," 截止"),s.a.createElement("div",{className:"BrandQuestionPrizes-tip"},s.a.createElement("span",{className:"BrandQuestionPrizes-tipTitle"},"活动规则","："),o),s.a.createElement("div",{className:"BrandQuestionPrizes-tip"},s.a.createElement("span",{className:"BrandQuestionPrizes-tipTitle"},"获奖公示","："),"ongoing"===i&&"获奖名单将在活动结束后公布","finished"===i&&"品牌开奖中，即将公布获奖名单","awarded"===i&&s.a.createElement(c.Link,{target:"_blank",to:"/organization/question/".concat(n,"/winners")},"查看获奖名单"),!1),s.a.createElement("div",{className:"BrandQuestionPrizes-rule"},"品牌方为本问题设置了有奖问答，添加回答即视为参与活动，并同意遵守",s.a.createElement("a",{className:"BrandQuestionPrizes-ruleLink",href:"https://www.zhihu.com/organization/ophelp/norm/53",target:"_blank",rel:"noopener noreferrer"},"《有奖问答活动管理办法》")))},a=e.handleToggle,r=e.expanded,o=e.question,i=o.id,l=o.prize,u=o.relationship,d=(u=void 0===u?{}:u).isAuthor,m=o.permission,p=(m=void 0===m?{}:m).isSuperUser;if(!l||!l.status)return null;var h=l.endTime,f=l.prizes,v=l.status,b=Gn(h);return s.a.createElement("div",{className:G()("BrandQuestionPrizes",{"is-mobile":!1})},s.a.createElement("div",{className:"BrandQuestionPrizes-info"},s.a.createElement("div",{className:"BrandQuestionPrizes-bar",onClick:a},s.a.createElement("div",{className:"BrandQuestionPrizes-desc"},s.a.createElement("div",{className:"BrandQuestionPrizes-symbol"},s.a.createElement(Yn.a,{alt:"logo",width:72,height:18,fill:"ongoing"===v?"#ff9607":"#999999"}),"ongoing"===v&&s.a.createElement("span",null,"距离结束还有",s.a.createElement("em",null,b.quantity),b.unit),"finished"===v&&"待开奖","awarded"===v&&"已开奖"),s.a.createElement("div",{className:"BrandQuestionPrizes-name"},"奖品：",f[0].name,f.length>1&&"等")),s.a.createElement("div",{className:"BrandQuestionPrizes-images"},f.map(function(e,t){var n=e.imageUrl;return n&&s.a.createElement("img",{key:"BrandQuestionPrizes-images".concat(t),src:n,role:"presentation"})}),s.a.createElement(L.a,{name:"arrow",width:9,height:5,fill:"#9fadc7"}))),r&&s.a.createElement("div",{className:"BrandQuestionPrizes-detail"},f.map(function(e,n){var a=e.imageUrl,r=e.name,o=e.value,i=e.quantity;return s.a.createElement("div",{key:"BrandQuestionPrizes-prize".concat(n),className:"BrandQuestionPrizes-prize"},s.a.createElement("div",{className:"BrandQuestionPrizes-intro"},a&&s.a.createElement("img",{className:"BrandQuestionPrizes-prizeImage",src:a,role:"presentation"}),s.a.createElement("div",{className:"BrandQuestionPrizes-prizeInfo"},s.a.createElement("div",{className:"BrandQuestionPrizes-prizeName"},f.length>1&&"".concat(t[n],"等奖："),r),s.a.createElement("div",{className:"BrandQuestionPrizes-prizeValue"},"价值 ¥ ",o))),s.a.createElement("div",{className:"BrandQuestionPrizes-prizeQuantity"},i," 份"))})),r&&!1),r&&n(),r&&s.a.createElement("hr",{className:"BrandQuestionPrizes-split"}),(p||d)&&s.a.createElement(ot.a,{className:"BrandQuestionPrizes-edit",to:"/organization/question/".concat(i,"/setting/").concat("finished"===v?"winners":"prize")},"ongoing"===v&&"编辑有奖回答","finished"===v&&"填写获奖名单"))}var Jn,Zn,Xn,ea,ta,na,aa=n(335),ra=(n(2766),Object(b.connect)(function(e,t){return{question:e.entities.questions[t.question.id]}})(Jn=Object(aa.a)()((Xn=Zn=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.question,n=t.id,a=t.permission,r=void 0===a?{}:a,o=r.isSuperUser,c=r.canBrandAdminEdit,l=r.haveCard;return c||o?s.a.createElement(hn.c,{className:"BrandQuestionSettingMenu",toggler:s.a.createElement(k.c,null,"设置样式")},s.a.createElement(i.Fragment,null,s.a.createElement(hn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/topbanner"))}},"设置提问头图"),s.a.createElement(hn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/prize"))}},"编辑有奖问答"),l&&s.a.createElement(hn.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/advanced"))}},"编辑品牌推荐"))):null}}]),t}(i.Component),Zn.contextTypes={currentUser:v.a.object,router:v.a.object},Jn=Xn))||Jn)||Jn),oa=n(1972),ia=n(514),sa=n(504),ca=(n(2767),Object(b.connect)(function(e,t){return{pin:Object(sa.g)(e,t.target.id)}},{getPinContents:sa.e})(ea=Object(se.a)(function(e){return{module:"PinItem",card:{content:{type:"Pin",id:e.target.id}}}})((na=ta=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleFollow=function(){var e=n.props.pin,t=(e=void 0===e?{}:e).author.isFollowing?1977:1976;n.handleTrack(t)},n.handleTrack=function(e){var t=n.props.pin,a=(t=void 0===t?{}:t).author;at.default.trackEvent(Object(ue.a)(n),{id:e},{button:{text:a.name}})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,a=n.type,r=n.id,o=t.getPinContents;"pin"===a&&o(r,{failsafe:!0}).then(function(t){var n=t.payload,a=(void 0===n?{}:n).author,r=(a=void 0===a?{}:a).name;at.default.trackCardShow(e,{id:1969},{button:{text:r}})})}},{key:"render",value:function(){var e=this,t=this.props.pin;if(!t||!t.content)return null;var n=t.author,a=t.id,r=t.content[0].content.replace(/<a.*class="hash_tag".*?<\/a>/g,""),o=n||{},i=o.type,c=o.urlToken,l=o.isFollowing,u="https://www.zhihu.com/pin/".concat(a);return s.a.createElement("div",{className:"QuestionRelatedCard"},s.a.createElement("div",{className:"QuestionRelatedCard-title"},"相关报道"),s.a.createElement("div",{className:"QuestionRelatedCard-content"},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(ia.truncateHTML)(r,110).content}}),u&&s.a.createElement("a",{className:"QuestionRelated-jump",href:u,onClick:function(){e.handleTrack(1975)}},"查看详情")),c&&s.a.createElement("div",{className:"QuestionRelatedCard-footer"},s.a.createElement("div",null,"来自",s.a.createElement("a",{className:"QuestionRelatedCard-from",href:"https://www.zhihu.com/people/".concat(c),target:"_blank",onClick:function(){e.handleTrack(1971)}},n.name)),s.a.createElement("div",{onClick:this.handleFollow},s.a.createElement(lt.a,{className:"QuestionRelatedCard-follow",type:i,id:c,isFollowing:l},s.a.createElement(oa.a,{key:"icon",text:!0,center:!0}),"关注机构"))))}}]),t}(i.Component),ta.propTypes={target:v.a.shape({type:v.a.string,id:v.a.string}).isRequired},ea=na))||ea)||ea),la=(n(2768),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.question.author;return s.a.createElement("div",{className:"OrgQuestionSymbol"},s.a.createElement("div",{className:G()("OrgQuestionSymbol-inner",{"OrgQuestionSymbol-inner--mobile":!1})},s.a.createElement("div",{className:"OrgQuestionSymbol-main QuestionHeader-main"},s.a.createElement("div",{className:"OrgQuestionSymbol-avatar"},s.a.createElement(jt.a,{user:e,avatar:!0,avatarProps:{size:38}})),s.a.createElement("div",{className:"OrgQuestionSymbol-name"},s.a.createElement(jt.a,{user:e})," 的提问")),s.a.createElement("div",{className:"OrgQuestionSymbol-tip"},s.a.createElement(ot.a,{preset:"plain",a:!0,to:"/org-intro#org-question",target:"_blank"},"了解机构提问"))))}}]),t}(i.Component)),ua=n(2233),da=n(154);n(2446);function ma(){var e=Object(I.a)(["","人评价"]);return ma=function(){return e},e}var pa=function(e){var t=e.percent,n=e.reviewerCount,a=e.ratioStatus,r=e.title;return s.a.createElement("div",{className:"QuestionTopicReviewCardExtraInfo-cardTitleContainer"},s.a.createElement("h3",{className:"QuestionTopicReviewCardExtraInfo-cardTitle"},r),"normal"===a?s.a.createElement("div",null," ",s.a.createElement("span",{className:"QuestionTopicReviewCardExtraInfo-percentNum"},t,"%")," ",s.a.createElement("span",null,"知友推荐 · ",M()(ma(),n))):s.a.createElement("span",null,"  推荐数据积累中"))};pa.propType={percent:v.a.number.isRequired,reviewerCount:v.a.string.isRequired};var ha,fa=pa,va=n(25),ba=n(2421),ga=Object(va.compose)(Object(b.connect)(null,function(e,t){var n=t.metaInfo.id,a=t.questionId;return{onUpdateVoteTopic:function(t){var r=t.voteFor,o=t.method;return e(Object(zt.bb)({questionId:a,id:n,voteFor:r,method:o}))}}}),c.withRouter)(ba.a),ya=(n(2769),Object(Jt.a)(null)(ha=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).trackReviewCardOpenUrl=function(e){at.default.trackEvent(e.target,{id:4175,action:"OpenUrl",name:name})},n.renderUnpublishedCard=function(e,t,a){return s.a.createElement(At.d,{className:"QuestionHeaderTopicMeta"},n.renderCardImage("QuestionHeaderTopicMeta-SideImg"),s.a.createElement("div",{className:"QuestionHeaderTopicMeta-Content"},s.a.createElement("div",{className:"QuestionHeaderTopicMeta-UnpublishedTitleContainer"},s.a.createElement("h3",{className:"QuestionHeaderTopicMeta-UnpublishedTitle"},e),"  ",s.a.createElement("span",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-UnpublishedInfo"},"暂未上映",Boolean(t)&&" · ".concat(t," 上映"))),s.a.createElement("div",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-UnpublishedInfo",dangerouslySetInnerHTML:{__html:a}})))},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"renderCardImage",value:function(e){var t=this.props,n=t.meta,a=t.meta.meta,r=a.title,o=a.avatar,i=n.avatarUrl,c=n.category;return s.a.createElement(ua.a,{className:G()("".concat(e),{"QuestionHeaderTopicMeta-SideImg--goods":"n_goods"===c}),src:o||i,alt:r})}},{key:"renderTopReviewCard",value:function(){var e=this.props,t=e.meta,n=e.questionId,a=t.meta,r=a.title,o=a.summary,i=a.description2,c=a.description1,l=a.pubInfo,u=t.excerpt,d=o||u||i||c;if(1===l.status||2===l.status){var m=l.pubDate;return this.renderUnpublishedCard(r,m,d)}return s.a.createElement(At.d,{className:"QuestionHeaderTopicMeta"},s.a.createElement("div",{className:"QuestionHeaderTopicMeta-CardMain"},this.renderCardImage("QuestionHeaderTopicMeta-SideImg"),s.a.createElement("div",{className:"QuestionHeaderTopicMeta-Content"},s.a.createElement(ga,{metaInfo:t,questionId:n,ReviewCardExtraInfoComponent:fa,reviewerCountFormatter:Mt.formatNumber},s.a.createElement("div",{className:"QuestionHeaderTopicMeta-Info",dangerouslySetInnerHTML:{__html:d}})))))}},{key:"render",value:function(){var e=this.props.meta,t=e.category,n=e.id,a=e.vote,r=e.isVote,o=a&&r;if(!o)return null;var i=["like","dislike"].includes(a.status);return s.a.createElement(z.a,Object.assign({module:"TopicItem",moduleName:t},o&&{view:{id:4174,name:i?"已评价":"未评价"}},{card:{content:Object.assign({type:"Topic"},Object(da.a)("topic",n),{sub_type:"MetaCard"})},trackCardShow:!0}),s.a.createElement("a",{href:"/topic/".concat(n),target:"_blank",rel:"noopener noreferrer","data-za-not-track-link":!0,onClick:this.trackReviewCardOpenUrl},this.renderTopReviewCard()))}}]),t}(i.PureComponent))||ha),wa=n(2388),Ea=n(2017),Ca=n(52),ka=n(2770),Oa=n.n(ka),ja=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={remainedTime:null},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.totalCountdownTime,a=t.onFinish;"number"==typeof n?(this.setState({remainedTime:n}),this.timer=setInterval(function(){e.setState({remainedTime:e.state.remainedTime-5})},5e3)):"function"==typeof a&&a()}},{key:"componentDidUpdate",value:function(){var e=this.props.onFinish;this.state.remainedTime<=0&&(clearInterval(this.timer),"function"==typeof e&&e())}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderCountdownTime",value:function(){var e=this.state.remainedTime;if(e<60)return s.a.createElement(i.Fragment,null,"距结束不足 ",s.a.createElement("span",null,"1")," 分钟");var t,n,a=(t=e,n=Math.floor(t/60),{hours:Math.floor(n/60),minutes:n%60}),r=a.hours,o=a.minutes;return 0===r?s.a.createElement(i.Fragment,null,"距结束还有 ",s.a.createElement("span",null,o)," 分钟"):s.a.createElement(i.Fragment,null,"距结束还有 ",s.a.createElement("span",null,r)," 小时"," ",o>0&&s.a.createElement(i.Fragment,null,s.a.createElement("span",null,o)," 分钟"))}},{key:"render",value:function(){var e=this.props.className;return null===this.state.remainedTime?s.a.createElement("div",{className:e},"距结束还有"):s.a.createElement("div",{className:e},this.renderCountdownTime())}}]),t}(i.Component);ja.propTypes={totalCountdownTime:v.a.number.isRequired,onFinish:v.a.func};n(2771);var Na,Sa,Aa,Ta,Ra=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:!1,bodyHeight:0},n.contentRef=Object(i.createRef)(),n.handleExpand=function(){var e=n.contentRef.current;n.setState({expanded:!0,bodyHeight:"".concat(e.offsetHeight+1,"px")}),at.default.trackEvent(Object(ue.a)(n),{id:5036,action:"Expand"})},n.handleCollapse=function(){n.setState({expanded:!1,bodyHeight:0}),at.default.trackEvent(Object(ue.a)(n),{id:5037,action:"Fold"})},n.handleClickHeader=function(){n.state.expanded?n.handleCollapse():n.handleExpand()},n.handleCountdownFinish=function(){var e=n.props;(0,e.removeBrandQuestionRedPacket)(e.questionId)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"renderCountdown",value:function(){var e=this.props.redPacket,t=e.countDownType,n=e.countDownValue,a="".concat("CommercialAnswerRedPacket","-countdown");return 2===t?s.a.createElement(ja,{className:a,totalCountdownTime:n,onFinish:this.handleCountdownFinish}):s.a.createElement("div",{className:a},"还剩 ",s.a.createElement("span",null,Object(Mt.niceNumber)(n))," 个红包")}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.redPacket,a=n.title,r=n.image,o=n.iconText,i=n.content,c=this.state,l=c.expanded,u=c.bodyHeight;return s.a.createElement(z.a,{view:{id:5035},trackCardShow:!0},s.a.createElement("div",{className:G()("CommercialAnswerRedPacket",t,Object(H.a)({},"".concat("CommercialAnswerRedPacket","--expanded"),l))},s.a.createElement("div",{className:"".concat("CommercialAnswerRedPacket","-header"),onClick:this.handleClickHeader},s.a.createElement("div",{className:"".concat("CommercialAnswerRedPacket","-main")},s.a.createElement("div",{className:"".concat("CommercialAnswerRedPacket","-subtitle")},s.a.createElement("div",{className:"".concat("CommercialAnswerRedPacket","-badge")},s.a.createElement("span",null,s.a.createElement(Oa.a,{size:11})),s.a.createElement("span",null,o)),this.renderCountdown()),s.a.createElement("div",{className:"".concat("CommercialAnswerRedPacket","-title")},a)),s.a.createElement("div",{className:"".concat("CommercialAnswerRedPacket","-image")},s.a.createElement("img",{src:Object(Ca.imgUrl)(r,"xl")})),s.a.createElement("div",{className:"".concat("CommercialAnswerRedPacket","-icon")},l?s.a.createElement(wa.a,{size:20}):s.a.createElement(Ea.a,{size:20}))),s.a.createElement("div",{className:"".concat("CommercialAnswerRedPacket","-body"),style:{height:u}},s.a.createElement("div",{ref:this.contentRef,className:"".concat("CommercialAnswerRedPacket","-content"),dangerouslySetInnerHTML:{__html:i}}))))}}]),t}(i.Component),Ia=Object(b.connect)(null,{removeBrandQuestionRedPacket:j.T})(Ra);n(2772);function xa(){var e=Object(I.a)(["","提问："]);return xa=function(){return e},e}var Pa=function(e){return s.a.createElement(k.c,Object.assign({preset:"plain",className:"QuestionHeader-edit"},e),s.a.createElement(L.a,{name:"modify",left:!0}),"修改")};var Ma,La,Da,qa=(Na=Object(b.connect)(function(e,t){var n=e.question.brand,a=e.publicEditPermission,r=e.currentUser,o=t.question.questionType;return{brand:n,publicEditPermission:a,currentUserUrlToken:r,permission:Object(j.Q)(e),isCommercialQuestion:"commercial"===o,isOrgQuestion:"org"===o}},{loadBrand:j.x,updateQuestionLocked:j.db,deleteQuestion:j.k,deleteBrandQuestion:j.h,showNotification:B.h,loadQuestionCommercialBanner:j.J,loadBrandQuestionRedPacket:j.D,loadBrandQuestionPermission:j.B,loadBrandQuestionOpenStatus:j.A,loadBrandQuestionAdvancedStyle:j.y,loadBrandQuestionPrize:j.C}),Object(c.withRouter)(Sa=Na((Ta=Aa=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!0,editShown:!1,editTopicsShown:!1,invitationTipShown:!1,brandQuestionPrizesExpanded:!1},n.getHandleInvite=function(e){e&&(n.handleInvite=e)},n.handleExpand=function(){n.setState({collapsed:!1})},n.handleCollapse=function(){n.setState({collapsed:!0,shareMenuPositionStatus:"normal"})},n.handleEditShow=n.context.authRequired(function(){var e=(n.props.question.reviewInfo||{}).editTips;e?n.props.showNotification(e,"red"):n.setState({editShown:!0})}),n.handleEditClose=function(){n.setState({editShown:!1})},n.handleEditTopicsShow=n.context.authRequired(function(){var e=(n.props.question.reviewInfo||{}).editTips;e?n.props.showNotification(e,"red"):n.setState({editTopicsShown:!0})}),n.handleEditTopicsClose=function(){n.setState({editTopicsShown:!1})},n.handleInvitationShow=function(){n.setState({invitationModalShown:!0})},n.handleInvitationHide=function(){n.setState({invitationModalShown:!1})},n.handleInvitationTipShow=function(){n.setState({invitationTipShown:!0})},n.handleInvitationTipClose=function(){n.setState({invitationTipShown:!1})},n.handleRedirectionCreatorShow=function(){n.setState({redirectionCreatorShown:!0})},n.handleRedirectionCreatorClose=function(){n.setState({redirectionCreatorShown:!1})},n.handleRedirectionCreated=function(e,t){var a=n.props,r=a.router,o=a.question.id,i=e.id;n.handleRedirectionCreatorClose(),t.then(function(){r.push("/question/".concat(i,"?rf=").concat(o))})},n.handleDelete=function(){var e=n.props,t=e.question.id,a=e.isCommercialQuestion,r=e.deleteQuestion,o=e.deleteBrandQuestion;return a?o(t).then(function(){location.href="/"}):r(t).then(function(){location.href="/"})},n.handleConfirmDelete=function(){n.handleDeleteModalClose(),n.handleDelete()},n.handleDeleteModalShow=function(){n.setState({deleteModalShown:!0})},n.handleDeleteModalClose=function(){n.setState({deleteModalShown:!1})},n.handlePositionStatusChange=function(e){n.setState({shareMenuPositionStatus:e})},n.handleUpdateQuestionLocked=function(){var e=n.props,t=e.question.id;(0,e.updateQuestionLocked)(t)},n.handleLockTipsShow=function(){return n.setState({lockTipsShown:!0})},n.handleLockTipsHide=function(){return n.setState({lockTipsShown:!1})},n.handleBrandQuestionPrizesToggle=function(){n.setState({brandQuestionPrizesExpanded:!n.state.brandQuestionPrizesExpanded})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.isAnswerPage,e.question.id),n=e.isCommercialQuestion,a=e.loadBrand,r=e.loadQuestionCommercialBanner,o=e.loadBrandQuestionRedPacket,i=e.loadBrandQuestionPermission,s=e.loadBrandQuestionOpenStatus,c=e.loadBrandQuestionAdvancedStyle,l=e.loadBrandQuestionPrize,u=this.context.currentUser;this.context.currentUser&&Object(Q.c)("question",t,Q.a),n&&(a(t),r(t),c(t),o(t).then(function(e){e&&e.payload||l(t)}),u&&"guest"!==u.userType&&(i(t),s(t)))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,a=t.isAnswerPage,r=e.question,o=r.id,i=r.relationship.isAnonymous,s=e.isAnswerPage;!this.state.collapsed&&e.question&&this.props.question&&e.question.detail.length!==this.props.question.detail.length&&this.setState({collapsed:!0,editShown:!1}),n===o&&a===s||this.setState({collapsed:!0,invitationTipShown:!1}),i||this.setState({invitationTipShown:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.collapsed,a=t.collapsed;if(n&&!a){var r=this.container.getBoundingClientRect().top;window.scrollTo(0,window.pageYOffset+r-document.documentElement.clientHeight)}}},{key:"renderFooter",value:function(){var e=this.props,t=e.question,n=e.isCommercialQuestion,a=t.id,r=t.title,o=t.editableDetail,i=t.topics,c=t.questionType,l=t.relationship.isAnonymous,u=this.state,d=u.collapsed,m=u.editShown,p=u.editTopicsShown,h=this.context.currentUser,f=n&&!0;return s.a.createElement("div",{className:"QuestionHeader-footer"},s.a.createElement("div",{className:"QuestionHeader-footer-inner"},s.a.createElement("div",{className:"QuestionHeader-main QuestionHeader-footer-main"},s.a.createElement(mt,{question:t}),f&&s.a.createElement(ra,{question:t}),s.a.createElement(zn,{question:t,onInvitationTipShow:this.handleInvitationTipShow,getHandleInvite:this.getHandleInvite}),s.a.createElement("div",{className:"QuestionHeader-actions"},!d&&s.a.createElement(k.c,{preset:"plain",onClick:this.handleCollapse},"收起",s.a.createElement(L.a,{name:"arrow",className:"QuestionHeader-collapse-icon"}))))),h&&s.a.createElement(Oe,{id:a,title:r,detail:o,show:m,onClose:this.handleEditClose,questionType:c,isAnonymous:l}),h&&s.a.createElement(Ue,{id:a,topics:Object(x.a)(i),show:p,onClose:this.handleEditTopicsClose}))}},{key:"renderSpecialQuestionAuthor",value:function(){var e=this.props.question.author;return s.a.createElement(i.Fragment,null,s.a.createElement(te,{className:"QuestionHeader-specialQuestionAuthor",author:e}),s.a.createElement("div",{className:"QuestionHeader-topicDivider"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,a=t.question,r=t.isAnswerPage,o=t.isCommercialQuestion,i=t.isOrgQuestion,c=t.brand,u=t.publicEditPermission,d=t.currentUserUrlToken,m=t.meta,p=t.permission.canBrandAdminEdit,h=a.title,f=a.detail,v=a.topics,b=void 0===v?[]:v,g=a.author,y=a.showAuthor,w=a.author.urlToken,E=a.excerpt,C=a.isEditable,k=a.id,O=a.reviewInfo,j=a.relatedCards,N=void 0===j?[]:j,S=a.annotationDetail,A=a.circleInfo,T=a.redPacket,R=this.state,I=R.collapsed,x=R.invitationTipShown,P=R.brandQuestionPrizesExpanded,L=Object(l.a)(m,1)[0],B=b.map(function(e){return{name:e.name,id:e.id}}),Q=u||{},H=Q.isQuestionEditable,W=Q.isQuestionTopicEditable,G=w===d,K=yn(C,G,H),Y=yn(C,G,W);return s.a.createElement("div",{"data-zop-question":JSON.stringify({title:h,topics:B,id:k,isEditable:C})},s.a.createElement(F.a,null,s.a.createElement(Xt,{question:a,location:n,invitationTipShown:x,onInvitationTipClose:this.handleInvitationTipClose,isAnswerPage:r})),o&&(!I||!r)&&s.a.createElement(V.a,{type:a.type,id:a.id}),s.a.createElement(z.a,{module:"QuestionDescription",card:{content:{type:"Question",token:String(k)}}},s.a.createElement("div",{className:"QuestionHeader",ref:function(t){e.container=t}},s.a.createElement("div",{className:"QuestionHeader-content"},s.a.createElement("div",{className:"QuestionHeader-main"},A&&A.canWriteCircle&&A.tips&&A.tips.text&&s.a.createElement(Qn,{tips:A.tips}),s.a.createElement("div",{className:"QuestionHeader-tags"},o&&s.a.createElement(Fn,{brand:c}),s.a.createElement("div",{className:"QuestionHeader-topics"},y&&this.renderSpecialQuestionAuthor(),b.map(function(e){return s.a.createElement(le,{item:e,key:e.id})}),(Y||p)&&s.a.createElement(Pa,{onClick:this.handleEditTopicsShow}))),s.a.createElement("h1",{className:"QuestionHeader-title"},i&&M()(xa(),g.name),h,(K||p)&&s.a.createElement(Pa,{onClick:this.handleEditShow})),S&&s.a.createElement(q.a,{annotationDetail:S}),N[0]&&s.a.createElement(ca,{target:N[0]}),T&&s.a.createElement(Ia,{questionId:k,redPacket:T}),s.a.createElement($n,{question:a,expanded:P,handleToggle:this.handleBrandQuestionPrizesToggle}),Boolean(L&&!o)&&s.a.createElement(ya,{meta:L,questionId:k}),s.a.createElement(Fe.a,{html:f,reviewInfo:O,excerpt:E,collapsed:I,onExpand:this.handleExpand,editable:K||p,onEdit:this.handleEditShow})),s.a.createElement("div",{className:"QuestionHeader-side"},s.a.createElement("div",{className:"QuestionHeader-follow-status"},s.a.createElement(ln,{question:a})))),I?this.renderFooter():s.a.createElement(D.a,{bottom:!0,container:function(){return e.container},onPositionStatusChange:this.handlePositionStatusChange},this.renderFooter()),i&&s.a.createElement(la,{question:a}))),s.a.createElement(U.a,null,s.a.createElement("div",{className:"QuestionHeader-content"},s.a.createElement("div",{className:"QuestionHeader-main"},s.a.createElement("h1",{className:"QuestionHeader-title",onClick:function(){Object(_.scrollToTop)()}},h)),s.a.createElement(z.a,{module:"ToolBar",card:{content:{type:"Question",token:String(k)}}},s.a.createElement("div",{className:"QuestionHeader-side"},s.a.createElement(mt,{question:a,inTopBar:!0}))))))}}]),t}(i.Component),Aa.contextTypes={authRequired:v.a.func,currentUser:v.a.object},Aa.propTypes={question:v.a.object,location:v.a.object,isAnswerPage:v.a.bool},Sa=Ta))||Sa)||Sa),_a=n(2294),za=n(742),Ba=(n(2773),"已开启赞赏的回答无法设为匿名，请先关闭赞赏"),Qa="匿名回答无法开启圈内说，请先取消匿名";function Ua(e){var t=e.toString();return 1===t.length?"0".concat(t):t}var Fa=function(e){var t=Object(C.parseInputTime)(e);return t?"".concat(t.getFullYear(),"-").concat(Ua(t.getMonth()+1),"-").concat(Ua(t.getDate()),"T").concat(Ua(t.getHours()),":").concat(Ua(t.getMinutes()),":").concat(Ua(t.getSeconds())):""};function Va(){var e=document.querySelector("#js-answerAddCard");e?e.scrollIntoView({block:"end"}):window.scrollTo(0,0)}var Ha=Object(b.connect)(function(e,t){var n=t.params,a=n.id,r=n.answerId,o=e.question.meta,i=e.entities.drafts,s=void 0===i?{}:i,c=e.env,l=c.referer,u=c.userAgent,d=e.reward,m=void 0===d?{}:d,p=e.currentUser,h=Boolean(r);return Object.assign({id:a,meta:o[a]||[],question:Object(j.S)(e,{id:a}),reward:m,draft:s["question_".concat(a)],referer:l,ua:u,currentUserUrlToken:p},h?{answer:Object(it.c)(e,{id:r})}:{firstAnswer:Object(it.h)(e,{id:a})})},{loadQuestion:j.I,loadDraft:j.F,updateQuestionAnonymous:j.bb,showNotification:B.h,getPublicEditPermission:za.b})((Da=La=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={anonymousConfirmShown:!1,isCheckedCircle:!0,answering:!1,hideIsMutedCover:!1},n.getPublicEditPermission=function(){var e=n.props,t=e.question,a=e.currentUserUrlToken,r=e.getPublicEditPermission,o=E()(t,"author.urlToken","");E()(t,"isEditable",!1)&&a&&o!==a&&r()},n.handleToggleAnonymous=function(){var e=n.props,t=e.showNotification,a=e.reward.question,r=void 0===a?{}:a,o=e.id;o&&r[o]&&r[o].isRewardable?t(Ba,"red"):n.setState({anonymousConfirmShown:!n.state.anonymousConfirmShown})},n.startAddAnswer=function(){var e=n.props,t=e.params.answerId,a=e.location.query.group_id;t||a?(n.context.router.push("/question/".concat(n.props.id)),setTimeout(n.focusAddAnswer)):n.focusAddAnswer()},n.endAddAnswer=function(){n.setState({answering:!1})},n.focusAddAnswer=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Va(),n.setState({answering:Date.now()},function(){e&&setTimeout(Va)})},n.onChangecircleSettings=function(e){var t=n.props,a=t.question.relationship.isAnonymous,r=t.showNotification;if(a&&e)return r(Qa,"red"),void n.setState({isCheckedCircle:!1});n.setState({isCheckedCircle:e})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"getChildContext",value:function(){return{toggleAnonymous:this.handleToggleAnonymous,startAddAnswer:this.startAddAnswer,endAddAnswer:this.endAddAnswer,onChangecircleSettings:this.onChangecircleSettings,isCheckedCircle:this.state.isCheckedCircle}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.question;Promise.resolve(t?this.fetchDraft():this.fetchQuestionAndDraft()).then(function(){var t=e.props.draft;if(!e.props.params.answerId){var n="#draft"===location.hash||"#write"===location.hash;(t&&!t.schedule||!t&&n)&&e.focusAddAnswer(n)}}),this.getPublicEditPermission()}},{key:"componentDidUpdate",value:function(e){this.props.params.id!==e.params.id&&this.fetchQuestionAndDraft()}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"fetchQuestionAndDraft",value:function(){var e=this.props,t=e.id,n=e.loadQuestion;return Promise.all([n(t),this.fetchDraft()])}},{key:"fetchDraft",value:function(){var e,t=this.props.loadDraft;return this.context.currentUser&&(e=t(this.props.params.id)),this.setState({anonymousConfirmShown:!1}),e}},{key:"renderMeta",value:function(){var e=function(e){var t=e.title,n=e.id,a=e.topics,r=e.answerCount,o=e.commentCount,i=e.created,s=e.updatedTime,c=e.visitsCount,l=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/".concat(n),keywords:a.map(function(e){return e.name}).join(","),answerCount:r,commentCount:o,dateCreated:new Date(1e3*i).toISOString(),dateModified:new Date(1e3*s).toISOString(),"zhihu:visitsCount":c,"zhihu:followerCount":l}}(this.props.question);return Object.keys(e).map(function(t){return s.a.createElement("meta",{key:t,itemProp:t,content:e[t]})})}},{key:"renderJSONLD",value:function(){var e=this.props,t=e.location,n=e.question,a=e.answer,r=e.params.answerId,o=e.ua;if(!/baiduspider/i.test(o.origin))return null;var i=Boolean(r),c=i?a:n;if(c){var u=i?[c.createdTime,c.updatedTime]:[c.created,c.updatedTime],d=Object(l.a)(u,2),m=d[0],p=d[1],h=Fa(m),f=Fa(p);return s.a.createElement("script",{type:"application/ld+json"},'\n        {\n          "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",\n          "@id": "https://www.zhihu.com'.concat(t.pathname,'",\n          "appid": "否",\n          "pubDate": "').concat(h,'",\n          "upDate": "').concat(f,'"\n        }'))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,a=t.params,r=t.children,o=t.question,c=t.router.location.query,l=t.meta,u=t.firstAnswer,d=Boolean(a.answerId);if(!o)return s.a.createElement("div",null);if("true"===c.answer_deleted_redirect)return s.a.createElement(R,{id:o.id});var m=o.questionType,p=o.isMuted,h=o.title,f=o.relationship,v=f.isAuthor,b=f.myAnswer,g=this.state,w=g.anonymousConfirmShown,C=g.isCheckedCircle,k=g.answering,O=g.hideIsMutedCover,j=E()(o,"circleInfo.canWriteCircle",!1);return s.a.createElement(z.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(o.id)}}},s.a.createElement("div",{className:"QuestionPage",itemScope:!0,itemType:"http://schema.org/Question"},s.a.createElement(y.a,Object.assign({title:h},!d&&{meta:Object(_a.c)(o,u)})),this.renderMeta(),this.renderJSONLD(),"commercial"===m&&p&&!O&&v&&s.a.createElement("div",{className:"QuestionPage-commercialIsMutedCover",onClick:function(){e.setState({hideIsMutedCover:!0})}}),s.a.createElement(qa,{meta:l,question:o,location:n,onToggleAnonymous:this.handleToggleAnonymous,isAnswerPage:d}),Object(i.cloneElement)(i.Children.only(r),{question:o,answering:k}),s.a.createElement(N,{question:o,myAnswer:b,shown:w,showCircle:j,isCheckedCircle:C,onChangecircleSettings:this.onChangecircleSettings,onClose:this.handleToggleAnonymous})))}}]),t}(i.PureComponent),La.fetchData=function(e){var t=e.params,n=t.id,a=t.answerId;return function(e,t){return t().env.userAgent.isBot?Promise.all([e(Object(j.O)(n,a)),e(Object(j.P)(n)),e(Object(j.I)(n))]):e(Object(j.I)(n))}},La.contextTypes={router:v.a.object,currentUser:v.a.object,authRequired:v.a.func},La.childContextTypes={toggleAnonymous:v.a.func,startAddAnswer:v.a.func,endAddAnswer:v.a.func,onChangecircleSettings:v.a.func,isCheckedCircle:v.a.bool},Ma=Da))||Ma,Wa=n(80),Ga=n(869),Ka=n(2013),Ya=n(31),$a=n.n(Ya),Ja=n(544),Za=n(264),Xa=n.n(Za),er=n(2001);n(2774);var tr=function(e){var t=e.className,n=e.titleClassName,a=e.sourceClassName,r=e.hideButtonClassName,o=e.question,c=o.id,u=o.title,d=o.detail,m=o.excerpt,p=o.isDeleted,h=e.mainSource,f=e.subSource,v=e.mainTool,b=e.subTool,g=e.zaId,y=void 0===g?{}:g,w=e.onMouseEnter,E=void 0===w?Xa.a:w,C=e.onMouseLeave,k=void 0===C?Xa.a:C,O=e.onExpand,j=void 0===O?Xa.a:O,N=e.onCollapse,S=void 0===N?Xa.a:N,A="https://www.zhihu.com/question/".concat(c),T=Object(i.useState)(!0),R=Object(l.a)(T,2),I=R[0],x=R[1],P=Object(i.useCallback)(function(e){x(!0),S(e),at.default.trackEvent(e.target,{id:y.collapse,action:"Collapse"})},[x,S,y]),M=Object(i.useCallback)(function(e){x(!1),j(e),at.default.trackEvent(e.target,{id:y.expand,action:"Expand"})},[x,j,y]);return p?s.a.createElement("div",{className:G()("ListQuestionItem","ListQuestionItem--deleted",t)},s.a.createElement("div",{className:"ListQuestionItem-hint"},"该问题已被删除"),s.a.createElement("div",{className:"ListQuestionItem-mainTool"},v)):s.a.createElement(z.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(c)}},trackCardShow:Boolean(y.cardShow),view:{id:y.cardShow}},s.a.createElement("div",{className:G()("ListQuestionItem",t),onMouseEnter:E,onMouseLeave:k},(h||f)&&s.a.createElement("div",{className:G()("ListQuestionItem-source",a)},h&&s.a.createElement("div",{className:"ListQuestionItem-mainSource"},h),f&&s.a.createElement("div",{className:"ListQuestionItem-subSource"},f)),s.a.createElement("a",{className:G()("ListQuestionItem-title",n,{"ListQuestionItem-title--noDetail":!d}),href:A,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":y.titleClick},u),d&&s.a.createElement(Fe.a,{className:"ListQuestionItem-RichText",html:d,reviewInfo:{},excerpt:m,collapsed:I,onExpand:M,editable:!1}),s.a.createElement("div",{className:"ListQuestionItem-tool"},s.a.createElement("div",{className:"ListQuestionItem-mainTool"},s.a.createElement(ot.a,{className:"ListQuestionItem-writeAnswerButton",color:"blue",icon:er.a,label:"写回答",href:"".concat(A,"#write"),target:"_blank","data-za-not-track-link":!0,onClick:function(e){at.default.trackEvent(e.target,{id:y.writeAnswer,action:"Answer"})}}),v),(b||!b&&!I)&&s.a.createElement("div",{className:"ListQuestionItem-subTool"},b,!I&&s.a.createElement("div",{className:G()("ListQuestionItem-hideButton",r),onClick:P},"收起",s.a.createElement(wa.a,{className:"ToolsQuestionItem-hideButtonIcon",center:!0}))))))};n(2775);var nr=function(e){var t=e.className,n=e.type,a=n.icon,r=n.text,o=e.active,i=void 0!==o&&o,c=e.onClick;return s.a.createElement("div",{className:G()("QuestionType",t,{"QuestionType--active":i}),onClick:c},s.a.createElement(a,{className:"QuestionType-icon",size:18}),r)};n(2776);var ar=function(e){var t=e.className,n=e.label,a=n.icon,r=n.text,o=n.name,i=e.onClick;return s.a.createElement("div",{className:G()("QuestionLabel","QuestionLabel--".concat(o),t),onClick:i},s.a.createElement(a,{className:"QuestionLabel-icon",size:18}),r)},rr=n(818);n(2777);var or=Object(b.connect)(function(e,t){var n=t.location.query.type;return{allWaitingQuestions:e.question.waitingQuestions,defaultType:rr.b.find(function(e){return e.queryName===n})||rr.b[0]}},{updateLaterQuestion:j.Z,updateQuestionFollowers:j.cb,getWaitingQuestions:j.s,deleteWaitingQuestion:j.l,setLaterQuestionAnimate:j.V})(function(e){var t=e.allWaitingQuestions,n=e.defaultType,a=e.updateLaterQuestion,r=e.updateQuestionFollowers,o=e.getWaitingQuestions,u=e.deleteWaitingQuestion,d=e.setLaterQuestionAnimate,m=Object(i.useRef)(null),p=Object(i.useState)(n.name),h=Object(l.a)(p,2),f=h[0],v=h[1],b=Object(i.useState)(rr.b.reduce(function(e,t){var n=t.name;return Object.assign({},e,Object(H.a)({},n,0))},{})),g=Object(l.a)(b,2),w=g[0],E=g[1],C=Object(i.useState)(null),O=Object(l.a)(C,2),j=O[0],N=O[1],S=Object(i.useState)(new Set),A=Object(l.a)(S,2),T=A[0],R=A[1],I=Object(i.useState)(new Set),x=Object(l.a)(I,2),P=x[0],M=x[1],L=t[f],q=L.isEnd,_=L.isLoading,z=L.questions.filter(function(e){var t=e.question;return!T.has(t.id)});return s.a.createElement("div",{className:"QuestionWaiting"},s.a.createElement(y.a,{title:"等你来答"}),s.a.createElement(At.d,{className:"QuestionWaiting-mainColumn"},s.a.createElement(D.a,{offset:62},function(e){var n=e.isFixed;return s.a.createElement("div",{className:G()("QuestionWaiting-typesContainer",{"QuestionWaiting-typesContainer--fixed":n})},n&&s.a.createElement("div",{className:"QuestionWaiting-typesTopper"}),s.a.createElement("div",{className:G()("QuestionWaiting-types",{"QuestionWaiting-types--fixed":n})},rr.b.map(function(e){return s.a.createElement(c.Link,{key:e.name,to:e.queryName?"/question/waiting?type=".concat(e.queryName):"/question/waiting","data-za-detail-view-id":5362,"data-za-extra":JSON.stringify({button:{text:e.text}})},s.a.createElement(nr,{className:"QuestionWaiting-type",type:e,active:e.name===f,onClick:function(){return function(e){E(Object.assign({},w,Object(H.a)({},f,window.pageYOffset))),t[e.name].questions.length||o(e.name,20,0),v(e.name),window.scrollTo(0,w[e.name])}(e)}}))})))}),s.a.createElement(Wa.b,{ref:m,className:"QuestionWaiting-questions",onLoad:function(){return o(f,20,z.length)},isLoading:_,placeholder:s.a.createElement(Wa.a,{className:"QuestionWaiting-placeholder"}),isDrained:q},z.map(function(e){var t=e.labelType,n=e.question,o=e.question.relationship.isFollowing;return s.a.createElement(tr,{key:n.id,className:"QuestionWaiting-questionItem",titleClassName:"QuestionWaiting-questionItemTitle",sourceClassName:G()("QuestionWaiting-questionItemSource",{"QuestionWaiting-questionItemSource--empty":!t}),hideButtonClassName:"QuestionWaiting-questionItemHideButton",question:n,onMouseEnter:function(){return N(n.id)},onMouseLeave:function(){return N(null)},zaId:{titleClick:5364,expand:5365,cardShow:5363,writeAnswer:5367},mainSource:t&&s.a.createElement(ar,{label:rr.a.find(function(e){return e.name===t})}),subSource:j===n.id&&s.a.createElement(k.c,{className:"QuestionWaiting-ignoreButton",preset:"plain","data-tooltip":"不感兴趣","data-tooltip-preset":"white","data-tooltip-classname":"QuestionWaiting-ignoreButtonTooltip",color:"grey",icon:Ga.a,onClick:function(e){R(new Set(T).add(n.id)),u(n.id),m.current.maybeRun(),at.default.trackEvent(e.target,{id:5366,action:"Close"})}}),mainTool:s.a.createElement(s.a.Fragment,null,s.a.createElement(k.c,{className:G()("QuestionWaiting-followButton",{"QuestionWaiting-followButton--active":o}),preset:"plain",color:"grey",onClick:function(e){r(n.id,!o),at.default.trackEvent(e.target,{id:5368,action:o?"UnFollow":"Follow"})}},o?null:s.a.createElement(oa.a,{size:16}),o?"已关注":"关注问题"),s.a.createElement(k.c,{className:G()("QuestionWaiting-laterButton",{"QuestionWaiting-laterButton--active":P.has(n.id)}),preset:"plain",color:"grey",onClick:function(e){var t=!P.has(n.id),r=new Set(P);t?r.add(n.id):r.delete(n.id),M(r),a(n.id,t),t&&!$a.a.get("question:hasSeenLaterAnimation")&&(d(!0),$a.a.set("question:hasSeenLaterAnimation",!0)),at.default.trackEvent(e.target,{id:5369,action:t?"Add":"UnAdd"})}},P.has(n.id)?null:s.a.createElement(Ka.a,null),P.has(n.id)?"已添加":"稍后答")),subTool:s.a.createElement("div",{className:"QuestionWaiting-info"},Object(Mt.formatNumber)(n.answerCount)," 个回答"," · ",Object(Mt.formatNumber)(n.visitCount)," 个浏览"),hideSubToolWhenExpanded:!0})}))),s.a.createElement(Ja.a,{omit:{noCategory:!0}}))}),ir=n(2003),sr=n(2778),cr=n.n(sr);n(2779);function lr(e){var t=e.laterQuestions,n=e.getLaterQuestions,a=e.updateLaterQuestion,r=Object(i.useRef)(null),o=Object(i.useState)(new Set),u=Object(l.a)(o,2),d=u[0],m=u[1],p=t.count,h=t.isEnd,f=t.isLoading,v=t.questions.filter(function(e){return!d.has(e.id)});return s.a.createElement("div",{className:"QuestionLater"},s.a.createElement(At.d,{className:"QuestionLater-mainColumn"},s.a.createElement("div",{className:"QuestionLater-title"},s.a.createElement(Ka.a,{className:"QuestionLater-titleIcon",size:30}),"我的稍后答",Boolean(p)&&s.a.createElement("div",{className:"QuestionLater-titleNumber"},p)),!f&&0===v.length&&s.a.createElement("div",{className:"QuestionLater-empty"},s.a.createElement("img",{className:"QuestionLater-emptyImage",src:cr.a,alt:""}),s.a.createElement("div",{className:"QuestionLater-emptyText"},"还没有稍后答，",s.a.createElement(c.Link,{className:"QuestionLater-emptyLink",to:"/question/waiting"},"看看为你推荐的问题"))),s.a.createElement(Wa.b,{ref:r,className:"QuestionLater-questions",onLoad:function(){return n(20,v.length)},isLoading:f,placeholder:s.a.createElement(Wa.a,{className:"QuestionLater-placeholder"}),isDrained:h},v.map(function(e){return s.a.createElement(tr,{key:e.id,className:"QuestionLater-questionItem",question:e,zaId:{titleClick:5372,expand:5373,cardShow:5375,writeAnswer:5374},mainTool:s.a.createElement(s.a.Fragment,null,s.a.createElement(k.c,{className:G()("QuestionLater-deletingButton"),preset:"outline",color:"grey",onClick:function(t){m(new Set(d).add(e.id)),a(e.id,!1),r.current.maybeRun(),at.default.trackEvent(t.target,{id:5376,action:"Delete"})}},s.a.createElement(ir.a,{size:22}),"移除"),!e.isDeleted&&s.a.createElement("div",{className:"QuestionLater-info"},Object(Mt.formatNumber)(e.answerCount)," 个回答"," · ",Object(Mt.formatNumber)(e.visitCount)," 个浏览"))})}))),s.a.createElement(Ja.a,{omit:{noWrite:!0,noCreator:!0,noCategory:!0}}))}lr.fetchData=function(e){return(0,e.dispatch)(Object(j.r)())};var ur=Object(b.connect)(function(e){return{laterQuestions:e.question.laterQuestions}},{getLaterQuestions:j.q,updateLaterQuestion:j.Z})(lr),dr=n(2430);var mr=function(e){var t=e.users,n=void 0===t?[]:t;return 0===n.length?null:1===n.length?s.a.createElement(jt.a,{user:n[0]}):2===n.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(jt.a,{user:n[0]})," 和 ",s.a.createElement(jt.a,{user:n[1]})):3===n.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(jt.a,{user:n[0]}),"、",s.a.createElement(jt.a,{user:n[1]})," 和"," ",s.a.createElement(jt.a,{user:n[2]})):n.length>3?s.a.createElement(s.a.Fragment,null,s.a.createElement(jt.a,{user:n[0]}),"、",s.a.createElement(jt.a,{user:n[1]})," 和"," ",s.a.createElement(jt.a,{user:n[2]})," 等 ",n.length," 人"):null};n(2780);var pr=function(e){var t=e.user,n=t.isFollowed,a=t.isFollowing,r=t.gender,o=null;return n&&a?o="互相关注":a&&(o="你关注了".concat(function(e){return 0===e?"她":1===e?"他":"TA"}(r))),o?s.a.createElement("div",{className:"RelationLabel"},o):null},hr=n(482),fr=(n(2781),hr.a[0]);function vr(e){var t=e.allInvitedQuestions,n=e.getInvitedQuestions,a=e.ignoreInvitedQuestion,r=e.updateLaterQuestion,o=Object(i.useRef)(null),c=Object(i.useState)(fr),u=Object(l.a)(c,2),d=u[0],m=u[1],p=Object(i.useState)(new Set),h=Object(l.a)(p,2),f=h[0],v=h[1],b=Object(i.useState)(new Set),g=Object(l.a)(b,2),y=g[0],w=g[1],E=Object(i.useState)(hr.a.reduce(function(e,t){var n=t.name;return Object.assign({},e,Object(H.a)({},n,0))},{})),C=Object(l.a)(E,2),O=C[0],j=C[1],N=t[d.name],S=N.isEnd,A=N.isLoading,T=N.questions.filter(function(e){var t=e.question;return!f.has(t.id)});return s.a.createElement("div",{className:"QuestionInvited"},s.a.createElement(At.d,{className:"QuestionInvited-mainColumn"},s.a.createElement("div",{className:"QuestionInvited-title"},"邀请回答",Boolean(t.total.count)&&s.a.createElement("div",{className:"QuestionInvited-titleNumber"},t.total.count-O.total)),s.a.createElement("div",{className:"QuestionInvited-tabs"},hr.a.map(function(e){return s.a.createElement("div",{key:e.name,className:G()("QuestionInvited-tab",{"QuestionInvited-tab--active":e.name===d.name}),onClick:function(){return function(e){t[e.name].questions.length||n(e,20,0),at.default.trackEvent(null,{id:5377},{button:{text:e.text}}),m(e)}(e)}},s.a.createElement("div",{className:"QuestionInvited-tabTitle"},e.text),s.a.createElement("div",{className:"QuestionInvited-tabMeta"},t[e.name].count-O[e.name]))})),s.a.createElement(Wa.b,{ref:o,className:"QuestionInvited-questions",onLoad:function(){return n(d,20,T.length)},isLoading:A,placeholder:s.a.createElement(Wa.a,{className:"QuestionInvited-placeholder"}),isDrained:S},T.map(function(e){var t=e.inviters,n=e.question;return s.a.createElement(tr,{key:n.id,className:"QuestionInvited-questionItem",question:n,zaId:{titleClick:5378,expand:5379,cardShow:5380,writeAnswer:5381},mainSource:s.a.createElement("div",{className:"QuestionInvited-questionItemMainSource"},s.a.createElement(mr,{users:t})," 邀请你回答"),subSource:1===t.length&&s.a.createElement(pr,{user:t[0]}),mainTool:s.a.createElement(s.a.Fragment,null,s.a.createElement(k.c,{className:G()("QuestionInvited-deletingButton"),preset:"outline",color:"grey",onClick:function(e){v(new Set(f).add(n.id)),j(Object.assign({},O,Object(H.a)({total:O.total+1},d.name,O[d.name]+1))),a(n.id),o.current.maybeRun(),at.default.trackEvent(e.target,{id:5382,action:"Ignore"})}},s.a.createElement(dr.a,{size:18}),"忽略"),s.a.createElement(k.c,{className:G()("QuestionInvited-laterButton",{"QuestionInvited-laterButton--active":y.has(n.id)}),preset:"outline",color:"grey",onClick:function(e){var t=!y.has(n.id),a=new Set(y);t?a.add(n.id):a.delete(n.id),w(a),r(n.id,t),at.default.trackEvent(e.target,{id:5383,action:t?"Add":"UnAdd"})}},y.has(n.id)?null:s.a.createElement(Ka.a,null),y.has(n.id)?"已添加":"稍后答"),s.a.createElement("div",{className:"QuestionInvited-info"},Object(Mt.formatNumber)(n.answerCount)," 个回答"," · ",Object(Mt.formatNumber)(n.visitCount)," 个浏览"))})}))),s.a.createElement(Ja.a,{omit:{noWrite:!0,noCreator:!0,noCategory:!0}}))}vr.fetchData=function(e){return(0,e.dispatch)(Object(j.p)())};var br=Object(b.connect)(function(e){return{allInvitedQuestions:e.question.invitedQuestions}},{getInvitedQuestions:j.o,ignoreInvitedQuestion:j.t,updateLaterQuestion:j.Z})(vr),gr=n(104),yr=n.n(gr),wr=n(2782),Er=n.n(wr),Cr=n(2022),kr=n(2089),Or=n(11),jr=4,Nr=5,Sr=3,Ar=5,Tr=20;var Rr={isDrained:!1,isFetching:!1,ids:[]};function Ir(e,t){var n=t.id,a=t.resource;return e.question[a][n]||Rr}var xr,Pr,Mr=function(e){var t=e.item,n=Object(je.a)(e,["item"]);return s.a.createElement(Cr.a,{key:t.id},s.a.createElement(kr.a,Object.assign({editable:!0,expanded:!0,relatedTo:"question",answer:t,zaInfos:{cardShow:4351,index:String(n.dataZaIndex)}},n)))},Lr=function(e,t,n){var a=t.relationship,r=a.canCollapseAnswers,o=a.canStickAnswers,i=t.hasPublishingDraft,s=e.map(function(e,t){return Mr({item:e,canCollapse:r,canStick:o,hasPublishingDraft:i,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t})});return n?s:Object(F.b)(2,s)},Dr=function(e,t){return e.map(function(e){return t[e]}).filter(function(e){return e&&!e.isDelete})},qr=Object(kt.isBrowser)()?yr()(Dr,function(e,t){return"".concat(e.join(","),"-").concat(t.length)}):Dr;n(2281);var _r,zr,Br=(xr=Object(b.connect)(function(e,t){var n=Ir(e,{id:t.id,resource:"notificationAnswers"}),a=n.isFetching,r=n.isDrained,o=n.ids;return{isFetching:a,isDrained:r,items:qr(o,e.entities.answers)}},{loadNotificationAnswers:j.H}),Object(c.withRouter)(Pr=xr(Pr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).load=function(){var e=n.props,t=e.isFetching,a=e.id,r=e.loadNotificationAnswers;t||r(a)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.location;e.items.length||this.props.router.replace(t.pathname)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.id,a=e.items;(t||a.length)&&Object(j.H)(n)}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,a=t.answerCount,r=e.question,o=e.items,i=e.isFetching,c=e.isDrained;return s.a.createElement("div",{className:"QuestionAnswers-answers"},s.a.createElement(At.d,null,s.a.createElement(Pt,{to:"/question/".concat(n)},"查看全部 ",Object(Mt.formatNumber)(a)," 条回答")),s.a.createElement(At.d,null,s.a.createElement(Tt.b,null,Lr(o,r),i&&s.a.createElement(Wa.a,{className:"List-item"})),!c&&!i&&s.a.createElement(Pt,{onClick:this.load},"更多")),s.a.createElement(At.d,null,s.a.createElement(Pt,{to:"/question/".concat(n)},"查看全部 ",Object(Mt.formatNumber)(a)," 条回答")))}}]),t}(i.PureComponent))||Pr)||Pr),Qr=n(2066),Ur=[{text:"默认排序",value:"default"},{text:"".concat("按","时间排序"),value:"updated"}],Fr={updatedAnswers:"updated",answers:"default"};var Vr,Hr,Wr,Gr,Kr,Yr,$r,Jr,Zr=(_r=Object(b.connect)(function(e){var t=e.question;return{commonAnswerCount:t.commonAnswerCount,hiddenAnswerCount:t.hiddenAnswerCount,permission:Object(j.Q)(e)}},{loadBrandQuestionAnswerCount:j.z}),Object(c.withRouter)(zr=_r(zr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleResourceChange=function(e){n.props.router.push("/question/".concat(n.props.question.id).concat("default"===e?"":"/answers/".concat(e)))},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props.permission)!==JSON.stringify(e.permission)&&this.loadQuestionAnswerCount(e)}},{key:"loadQuestionAnswerCount",value:function(e){var t=e.question,n=t.id,a=t.questionType,r=e.permission.canBrandAdminEdit,o=e.loadBrandQuestionAnswerCount;"commercial"===a&&r&&o(n)}},{key:"renderAnswerListHeader",value:function(){var e=this.props,t=e.resource,n=e.question,a=n.id,r=n.answerCount,o=n.questionType,i=e.commonAnswerCount,c=e.hiddenAnswerCount,l=e.permission.canBrandAdminEdit;return"commercial"===o?l?s.a.createElement("div",{className:"QuestionAnswers-navs"},s.a.createElement(k.c,{preset:"plain",className:G()("QuestionAnswers-nav",{"is--active":["answers","updatedAnswers"].includes(t)}),onClick:function(){location.href="/question/".concat(a)}},Object(Mt.formatNumber)(i)," 个回答","，由品牌推荐"),s.a.createElement(k.c,{preset:"plain",className:G()("QuestionAnswers-nav",{"is--active":"hiddenAnswers"===t}),onClick:function(){location.href="/question/".concat(a,"/answers/hidden")}},Object(Mt.formatNumber)(c)," 个隐藏回答")):s.a.createElement("span",null,Object(Mt.formatNumber)(r)," 个回答，由品牌推荐"):s.a.createElement("span",null,Object(Mt.formatNumber)(r)," 个回答")}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.children;return s.a.createElement(At.d,{className:"AnswersNavWrapper"},s.a.createElement(Qr.a,Object.assign({title:this.renderAnswerListHeader()},{options:"hiddenAnswers"===t?s.a.createElement("span",null,"按时间排序"):s.a.createElement(be.b,{listClassName:"Answers-select",needsReposition:!0,plain:!0,value:Fr[t],onChange:this.handleResourceChange},Ur.map(function(e){var t=e.value,n=e.text;return s.a.createElement(be.a,{key:t,value:t,text:n})}))}),n))}}]),t}(i.PureComponent))||zr)||zr),Xr=n(2301),eo=n(14),to=(Vr=Object(b.connect)(function(e,t){var n=t.page,a=Ir(e,{id:t.question.id,resource:"updatedAnswers"}),r=a.isFetching,o=a.isDrained,i=a.ids,s=Object(Or.d)(n,i),c=s.total,l=s.isCurrentLoaded,u=s.isNextLoaded,d=s.items;return{isMuteSpecial:Object(j.u)(t.question),isFetching:r,isDrained:o,total:c,isNextLoaded:u,isCurrentLoaded:l,items:qr(d,e.entities.answers).filter(function(e){return!e.isDelete})}},{loadItems:j.G}),Object(c.withRouter)(Hr=Vr(Hr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handlePaginationClick=function(e){n.props.router.push("".concat(location.pathname,"?page=").concat(e))},n.handleUpdatedAnswersLoad=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eo.b,a=n.props,r=a.question.id;(0,a.loadItems)(r,"updatedAnswers",{offset:e,limit:t})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,a=e.isDrained,r=e.items,o=e.loadItems;!a&&r.length<eo.b&&o(t,"updatedAnswers",{offset:Object(Or.c)(n)+r.length,limit:eo.b-r.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,a=e.isNextLoaded,r=e.isCurrentLoaded,o=e.page,i=e.items,c=e.total,l=e.question,u=e.isMuteSpecial;return n&&!i.length?s.a.createElement(At.d,{className:"Answers-none"},s.a.createElement(xt.a,{entityType:"answers",placeholder:u?"回答暂时无法查看":"还没有回答"})):s.a.createElement(Xr.a,{isFetching:t,isDrained:o>=c?n:r,isNextLoaded:a,page:o,total:c,placeholder:s.a.createElement(Wa.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleUpdatedAnswersLoad},Lr(i,l))}}]),t}(i.PureComponent))||Hr)||Hr),no=n(888),ao=n.n(no),ro=5,oo=Object(b.connect)(function(e,t){var n=Ir(e,{id:t.question.id,resource:"answers"}),a=n.isFetching,r=n.isDrained,o=n.ids,i=r||a?o:o.slice(0,Math.max(ro,o.length-5));return{isBot:e.env.userAgent.isBot,isFetching:a,isDrained:r,items:qr(i,e.entities.answers).filter(function(e){return e&&!e.isDelete}),adverts:Object(j.c)(e)}},{loadItems:j.G})(Wr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleLoad=function(){var e=n.props,t=e.question.id,a=e.loadItems,r=e.isFetching,o=e.isDrained,i=e.resource;o||r||a(t,void 0===i?"answers":i,{limit:ro})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.isDrained,a=e.items,r=e.loadItems;!n&&a.length<ro&&r(t,"answers",{offset:a.length,limit:ro})}},{key:"render",value:function(){var e=this,t=this.props,n=t.adverts,a=t.isBot,r=t.isFetching,o=t.isDrained,i=t.items,c=t.question,l=c.relationship,u=l.canCollapseAnswers,d=l.canStickAnswers,m=c.hasPublishingDraft,p=[0].concat(Object(x.a)(Object.keys(n||{}).map(Number).sort(function(e,t){return e-t}))),h={canCollapse:u,canStick:d,hasPublishingDraft:m};return s.a.createElement("div",null,s.a.createElement(Wa.b,{onRef:function(t){e.listEl=t},isLocal:!0,isLoading:r,isDrained:o,onLoad:this.handleLoad,placeholder:s.a.createElement(Wa.a,{className:"List-item"})},a?i.map(function(e,t){return Mr(Object.assign({item:e,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t},h))}):Object(F.b)(2,ao()(p.map(function(e,t){var a,r=p[t+1],o=(r?i.slice(e,r):i.slice(e)).map(function(n,a){var r=e+a+t;return Mr(Object.assign({item:n,itemProp:0===r?"acceptedAnswer":"suggestedAnswer",dataZaIndex:r},h))});return r?[].concat(Object(x.a)(o),[(a=n[r],a?s.a.createElement(Er.a,{data:a}):null)]):o})))))}}]),t}(i.Component))||Wr,io=(Gr=Object(b.connect)(function(e,t){var n=t.page,a=Ir(e,{id:t.question.id,resource:"hiddenAnswers"}),r=a.isFetching,o=a.isDrained,i=a.ids,s=Object(Or.d)(n,i,eo.b);return Object.assign({isFetching:r,isDrained:o},s,{items:qr(s.items,e.entities.answers).filter(function(e){return!e.isDelete})})},{loadItems:j.G}),Object(c.withRouter)(Kr=Gr(Kr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handlePaginationClick=function(e){n.props.router.push("".concat(location.pathname,"?page=").concat(e))},n.handleHiddenAnswersLoad=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eo.b,a=n.props,r=a.question.id;(0,a.loadItems)(r,"hiddenAnswers",{offset:e,limit:t})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,a=e.isDrained,r=e.items,o=e.loadItems;!a&&r.length<eo.b&&o(t,"hiddenAnswers",{offset:Object(Or.c)(n)+r.length,limit:eo.b-r.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,a=e.isNextLoaded,r=e.isCurrentLoaded,o=e.page,i=e.items,c=e.total,l=e.question;return s.a.createElement(Xr.a,{isFetching:t,isDrained:o>=c?n:r,isNextLoaded:a,page:o,total:c,placeholder:s.a.createElement(Wa.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleHiddenAnswersLoad},Lr(i,l))}}]),t}(i.PureComponent))||Kr)||Kr),so=(Yr=Object(se.a)({module:"ContentList"}),$r=Object(b.connect)(function(e,t){return{isMuteSpecial:Object(j.u)(t.question)}}),Yr(Jr=Object(c.withRouter)(Jr=$r(Jr=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,a=t.relationship.isAuthor,r=e.resource,o=e.router;"collapsedAnswers"!==r||a||o.push("/question/".concat(n))}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.question,a=e.question,r=a.questionType,o=a.answerCount,i=a.reviewInfo.tips,c=e.location;if(e.isMuteSpecial)return s.a.createElement(At.d,{className:"Answers-none"},s.a.createElement(xt.a,{entityType:"answers",placeholder:"回答暂时无法查看"}));if("commercial"!==r&&!o){if(i)return null;var l=n.status||{},u=l.isClose,d=l.isLocked,m=l.isSuggest;return u||d||m?null:s.a.createElement(At.d,{className:"Answers-none"},s.a.createElement(xt.a,{entityType:"answers",placeholder:s.a.createElement("div",null,"暂时还没有回答，开始",s.a.createElement(ct,{preset:"plain",className:"QuestionAnswers-answerLink"},"写第一个回答"))}))}return s.a.createElement("div",{id:"QuestionAnswers-answers",className:"QuestionAnswers-answers","data-zop-feedlistmap":"answers"===t?"0,0,1,0":"0,0,1"},s.a.createElement(Zr,{question:n,resource:t},"updatedAnswers"===t&&s.a.createElement(to,{question:n,page:Number(c.query.page)||1}),"answers"===t&&s.a.createElement(oo,{question:n}),"hiddenAnswers"===t&&s.a.createElement(io,{question:n,page:Number(c.query.page)||1})))}}]),t}(i.PureComponent))||Jr)||Jr)||Jr),co=n(2219),lo=n(2100),uo=n(2147),mo=n(500),po=n(73),ho=n(2443),fo=(n(2784),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){n.props.onChange(e)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,a=e.name,r=e.type,o=e.value,i=e.checked,c=JSON.stringify(o);return s.a.createElement("label",{className:G()("CheckItem",t)},s.a.createElement("input",{className:"CheckItem-input",type:r,name:a,value:c,onChange:this.handleChange,checked:i}),s.a.createElement("div",{className:"CheckItem-box"},s.a.createElement("div",{className:"CheckItem-inner"},n),s.a.createElement(ho.a,{className:"CheckItem-icon",size:20})))}}]),t}(i.Component));fo.propTypes={name:v.a.string,onChange:v.a.func,checked:v.a.bool,className:v.a.string,type:v.a.string,value:v.a.any},fo.defaultProps={name:"checkitems",type:"checkbox"};var vo=fo,bo=n(517),go=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={value:null},n.handleModify=function(){n.setState({modifying:!0})},n.handleChange=function(e){n.setState({value:e.target.value})},n.handleCancel=function(){n.setState({value:null,modifying:!1})},n.handleSubmit=function(e){e.preventDefault(),n.props.onBioChange(n.state.value),n.handleCancel()},n.handleSelect=function(){n.props.onSelect(n.props.value)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,a=e.title,r=e.checked,o=e.rich,i=this.state,c=i.modifying,l=i.value;return c?s.a.createElement("div",{className:"TopicBioItem"},s.a.createElement("div",{className:"TopicBioItem-title"},a),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"TopicBioItem-inner"},s.a.createElement(mo.a,{className:"TopicBioItem-authorInfo",noLink:!0,author:t},s.a.createElement(fe.a,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:a,autoFocus:!0}))),s.a.createElement("div",{className:"TopicBioItem-inputFooter"},s.a.createElement(bo.a,{current:l?l.length:0,max:40}),s.a.createElement("div",{className:"TopicBioItem-actions"},s.a.createElement(k.c,{preset:"plain",type:"reset",onClick:this.handleCancel},"取消"),s.a.createElement(k.c,{preset:"primary",color:"blue",type:"submit"},"保存"))))):n?s.a.createElement("div",{className:"TopicBioItem"},s.a.createElement("div",{className:"TopicBioItem-title"},a),s.a.createElement(vo,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:r},s.a.createElement(mo.a,{noLink:!0,author:t,className:"TopicBioItem-authorInfo"},s.a.createElement("div",null,o?s.a.createElement(Ot.a,{inline:!0,className:"TopicBioItem-bio",html:n}):s.a.createElement("span",{className:"TopicBioItem-bio"},n),s.a.createElement(lo.a,{className:"TopicBioItem-modifyButton",onClick:this.handleModify}))))):s.a.createElement("div",{className:"TopicBioItem"},s.a.createElement(k.c,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify},s.a.createElement(L.a,{name:"plus",left:!0}),"添加",a))}}]),t}(i.Component);go.propTypes={user:v.a.object.isRequired,title:v.a.node.isRequired,value:v.a.object.isRequired,onBioChange:v.a.func.isRequired,onSelect:v.a.func.isRequired,checked:v.a.bool.isRequired};var yo=go,wo=(n(2785),function(e,t){var n=e.type,a=e.topic,r=(a=void 0===a?{}:a).id,o=t.type,i=t.topic,s=(i=void 0===i?{}:i).id;return n===o&&r===s}),Eo=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={value:null},n.handleSelect=function(e){return n.setState({value:e})},n.handleChoose=function(){return n.props.onBioChoose(n.state.value)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return s.a.createElement("div",{className:"TopicBios-loading"},s.a.createElement(It.a,null));var t=this.props,n=t.user,a=t.question.topics,r=t.bios,o=t.currentBio,i=t.onHeadlineUpdate,c=t.onBioUpdate,l=this.state.value||o,u={type:"headline"};return s.a.createElement("div",null,s.a.createElement("div",{className:"TopicBioItems"},s.a.createElement(yo,{title:"一句话介绍",user:n,bio:n.headline,value:u,onBioChange:i,onSelect:this.handleSelect,checked:wo(l,u),rich:!0}),a.map(function(t){var a={type:"topic",topic:{id:t.id}};return s.a.createElement(yo,Object.assign({key:t.id,title:"在 ".concat(t.name," 话题下的话题经验"),user:n},function(e,t){return e.find(function(e){return e.topic.id===t})}(r,t.id),{value:a,onBioChange:function(e){return c(t.id,e)},onSelect:e.handleSelect,checked:wo(l,a)}))})),s.a.createElement(ve.a,null,s.a.createElement(k.c,{color:"blue",preset:"primary",onClick:this.handleChoose},"完成")))}}]),t}(i.Component);Eo.propTypes={onHeadlineUpdate:v.a.func.isRequired,onBioUpdate:v.a.func.isRequired,onBioChoose:v.a.func.isRequired,question:v.a.object.isRequired,user:v.a.object.isRequired};var Co,ko,Oo,jo=Eo;var No=Object(b.connect)(function(e,t){var n=e.currentUser,a=e.question.bio,r=e.entities,o=r.questions,i=r.users,s=e.topic.bios,c=t.question.id,l=o[c],u=(a[c]||{result:{type:"headline"}}).result;return{isFetching:s.isFetching,currentBio:{type:u.type,topic:u.topic},bios:l.topics.map(function(e){return{topic:e,bio:s[e.id]}}),question:l,user:i[n]}},{updateProfile:po.i,updateBio:De.X,chooseBio:j.d,loadBios:j.w})((Oo=ko=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleUpdateHeadline=function(e){n.props.updateProfile(null,{headline:e})},n.handleUpdateBio=function(e,t){n.props.updateBio(e,t)},n.handleBioChoose=function(e){e&&n.props.chooseBio(n.props.question.id,e),n.props.onClose()},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return s.a.createElement(jo,Object.assign({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),t}(i.Component),ko.contextTypes={currentUser:v.a.object},ko.propTypes={question:v.a.object.isRequired},Co=Oo))||Co,So=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,a=Object(je.a)(e,["shown","onClose"]);return s.a.createElement(ve.b,{title:"编辑话题经验",subtitle:s.a.createElement("span",null,"可以填写你从事的职业、取得的资格或过往经历，",s.a.createElement("br",null),"让你在这个问题下的回答更具说服力。"),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1},t&&s.a.createElement(No,Object.assign({},a,{onClose:n})))}}]),t}(i.Component);So.propTypes=Object.assign({shown:v.a.bool.isRequired,onClose:v.a.func.isRequired},No.propTypes);var Ao,To,Ro,Io,xo=So;n(2786);var Po,Mo,Lo,Do,qo,_o,zo=(Ao=Object(b.connect)(function(e,t){var n=e.question.bio,a=e.topic.bios,r=e.answers.newAnswer,o=(n[t.question.id]||{result:{type:"headline"}}).result;return"topic"===o.type&&(o.bio=a[o.topic.id]||o.bio),{currentUser:Object(qe.c)(e),questionBio:o,newAnswer:r,allowCommercialAnonymousAnswer:"show"===Object(dt.a)(e,"gue_anonymous")}},{showNotification:B.h,addAnswer:it.a,scheduledPublish:it.z,validateScheduledPublish:it.L,loadDraft:j.F,getBio:j.n}),Object(c.withRouter)(To=Ao((Io=Ro=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={topicBiosModalShown:!1},n.answerFormRef=s.a.createRef(),n.handleSubmit=function(e){var t=n.props,a=t.currentUser,r=t.question.id,o=t.addAnswer,i=t.scheduledPublish,s=t.validateScheduledPublish,c=t.loadDraft;if(e.publishAt){var l=i(r,e);return l.then(function(){n.context.endAddAnswer(),c(r)}),l}var u=function(){return o(r,e)};return a.autoSendingCreations?s(r).then(u,function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return He.a.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(u,function(){})}):u()},n.focus=function(){n.answerFormRef.current.focus()},n.handleToggleAnonymous=function(){var e=n.context,t=e.isCheckedCircle,a=e.toggleAnonymous,r=n.props,o=r.showNotification,i=r.question.relationship.isAnonymous;if(t&&!i)return a(),void n.context.onChangecircleSettings(!1);i||!n.answerFormRef.current.hasVideo()?a():o("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red")},n.handleTopicBiosModalShown=function(){return n.setState({topicBiosModalShown:!0})},n.handleTopicBiosModalHide=function(){return n.setState({topicBiosModalShown:!1})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.getBio)(t),this.props.answering&&setTimeout(this.focus)}},{key:"componentWillReceiveProps",value:function(e){this.props.answering!==e.answering&&this.focus()}},{key:"renderBio",value:function(){var e=this.props,t=e.currentUser,n=e.questionBio;return n.bio&&"headline"!==n.type?s.a.createElement("span",{className:"AnswerAdd-bio"},n.bio):t.headline?s.a.createElement(Ot.a,{className:"AnswerAdd-bio",inline:!0,html:(n||{}).bio||t.headline}):null}},{key:"renderAuthor",value:function(){var e=this.props,t=e.currentUser,n=e.question.relationship.isAnonymous,a=e.question;return n?s.a.createElement(mo.a,{className:"AnswerAdd-info",noLink:!0,author:fn.e}):t&&t.isOrg?s.a.createElement(mo.a,{className:"AnswerAdd-info",noLink:!0,author:t}):s.a.createElement(mo.a,{className:"AnswerAdd-info",noLink:!0,author:t},this.renderBio(),s.a.createElement(lo.a,{className:"AnswerAdd-topicBiosButton",text:"编辑话题经验",onClick:this.handleTopicBiosModalShown}),s.a.createElement(xo,{shown:this.state.topicBiosModalShown,question:a,onClose:this.handleTopicBiosModalHide}))}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.question,a=n.relationship.isAnonymous,r=n.questionType,o=e.question,i=e.allowCommercialAnonymousAnswer,c=t&&!t.isOrg&&("normal"===r||"commercial"===r&&i||a);return s.a.createElement("div",{className:"AnswerAdd"},s.a.createElement("div",{className:"AnswerAdd-header"},this.renderAuthor(),c&&s.a.createElement(k.c,{className:"AnswerAdd-toggleAnonymous",preset:"plain",onClick:this.handleToggleAnonymous},a?"使用实名身份回答":"使用匿名身份回答")),s.a.createElement(uo.a,{imperativeRef:this.answerFormRef,question:o,onSubmit:this.handleSubmit}))}}]),t}(i.Component),Ro.contextTypes={toggleAnonymous:v.a.func.isRequired,isCheckedCircle:v.a.bool,onChangecircleSettings:v.a.func,endAddAnswer:v.a.func},To=Io))||To)||To),Bo=Object(c.withRouter)((Lo=Mo=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question,a=n.id,r=n.relationship.myAnswer,o=void 0===r?{}:r,i=t.router,s=e.question,c=s.id,l=s.relationship.myAnswer,u=void 0===l?{}:l;a===c&&o.answerId!==u.answerId&&(at.default.trackEvent(this,{action:"StatusReport"},{status:{result:"Success",event:{action:"Answer"}}}),i.push("/question/".concat(a,"/answer/").concat(u.answerId)),$a.a.set("answer::justPublished",!0))}},{key:"render",value:function(){if(!this.context.currentUser)return null;var e=this.props,t=e.question,n=e.question,a=n.relationship.myAnswer,r=n.isNormal,o=n.status,i=(o=void 0===o?{}:o).isClose,c=o.isLocked,l=o.isSuggest,u=n.hasPublishingDraft,d=e.answering;return a?null:l?s.a.createElement("div",{className:"QuestionAnswers-answerTip"},"被建议修改的问题不允许添加新的回答。",s.a.createElement(ot.a,{preset:"plain",to:"/question/21290061"},"问题为什么会被建议修改？")):c?s.a.createElement("div",{className:"QuestionAnswers-answerTip"},"该问题目前已经被锁定，无法添加新答案。",s.a.createElement(ot.a,{preset:"plain",to:"/question/19604313"},"问题为什么会被锁定？")):i?s.a.createElement("div",{className:"QuestionAnswers-answerTip"},"被关闭的问题不允许添加新的回答。",s.a.createElement(ot.a,{className:"QuestionAnswers-iconLink",preset:"plain",to:"/question/21290061","data-tooltip":"为什么部分问题会被「关闭」「建议修改」？"},s.a.createElement(L.a,{name:"questionMark"}))):u?s.a.createElement(At.d,{className:"QuestionAnswers-answerTipCard"},"你创建的回答正在发布中…"):r?s.a.createElement(co.CSSTransitionGroup,{className:"QuestionAnswers-statusWrapper",transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"expand",component:"div"},d&&s.a.createElement(At.d,{className:"QuestionAnswers-answerAdd",id:"js-answerAddCard"},s.a.createElement("a",{name:"draft"}),s.a.createElement(zo,{question:t,answering:d}))):null}}]),t}(i.PureComponent),Mo.contextTypes={currentUser:v.a.object},Po=Lo))||Po,Qo=(n(2787),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,a=Object(je.a)(e,["className","children"]);return s.a.createElement("div",Object.assign({},a,{className:G()("QuestionMainDivider",t)}),s.a.createElement("span",{className:"QuestionMainDivider-inner"},n))}}]),t}(i.Component));n(2788);var Uo,Fo,Vo,Ho=Object(b.connect)(function(e,t){var n=Ir(e,{id:t.question.id,resource:"collapsedAnswers"}),a=n.isFetching,r=n.isDrained,o=n.ids;return{isFetching:a,isDrained:r,items:qr(o,e.entities.answers)}},{loadItems:j.G})((_o=qo=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={opened:!1},n.handleLoad=function(){var e=n.props,t=e.question.id;return(0,e.loadItems)(t,"collapsedAnswers")},n.handleOpen=function(){n.handleLoad(),n.setState({opened:!0})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,a=e.items,r=e.question,o=e.question,i=o.collapsedAnswerCount,c=o.questionType,l=this.state.opened,u="org"===c,d="".concat(Object(Mt.formatNumber)(i)," 个回答被").concat(u?"隐藏":"折叠"),m=s.a.createElement(ot.a,{preset:"plain",to:u?"/org-intro#org-question":"/question/20120168",target:"_blank"},"为什么？");return l?s.a.createElement(At.d,null,s.a.createElement(Qo,null,d,"（",m,"）"),s.a.createElement(Tt.b,null,Lr(a,r),n&&s.a.createElement(Wa.a,{className:"List-item"})),!t&&!n&&s.a.createElement(Pt,{onClick:this.handleLoad},"更多")):s.a.createElement("div",{className:"CollapsedAnswers-bar",style:{}},s.a.createElement(k.c,{preset:"plain",onClick:this.handleOpen},d),"（",m,"）")}}]),t}(i.Component),qo.contextTypes={currentUser:v.a.object},Do=_o))||Do,Wo=n(567),Go=n.n(Wo),Ko=n(568),Yo=n(534),$o=n(54),Jo=Object(se.a)(function(e){var t=e.answer;return{module:"AnswerItem",content:{type:"Answer",token:String(t.id),author_member_hash_id:t.author.id},trackCardShow:!0}})(Uo=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.answer,t=e.id,n=e.voteupCount,a=e.question,r=a.id,o=a.title;return s.a.createElement("div",{className:"SimilarQuestions-item"},s.a.createElement(ot.a,{preset:"plain",to:"/question/".concat(r,"/answer/").concat(t),target:"_blank"},o)," ",n&&"".concat(Object(Mt.formatNumber)(n)," 个赞同"))}}]),t}(i.Component))||Uo,Zo=Object(se.a)(function(e){var t=e.article;return{module:"PostItem",content:{type:"Post",token:String(t.id),author_member_hash_id:t.author.id},trackCardShow:!0}})(Fo=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.article,t=e.id,n=e.title,a=e.voteupCount;return s.a.createElement("div",{className:"SimilarQuestions-item"},s.a.createElement(ot.a,{preset:"plain",a:!0,to:"".concat(fn.i,"/p/").concat(t),target:"_blank"},n)," ",a&&"".concat(Object(Mt.formatNumber)(a)," 个赞同"))}}]),t}(i.Component))||Fo;n(2789);var Xo,ei,ti=Object(b.connect)(function(e,t){var n=e.explore.recommendations,a=n.items;return{isLoading:n.isLoading,isDrained:n.isDrained,isError:n.isError,items:a,similarQuestions:e.question.similarQuestions[t.question.id]}},{loadRecommendations:$o.i})(Vo=Object(se.a)({module:"EditorRecommendList"})(Vo=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.similarQuestions,a=t.isLoading,r=t.isDrained,o=t.isError,i=t.loadRecommendations;e.similarQuestions||!n||n.length||a||r||o||i(),!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.similarQuestions;return n&&n.length||!t||!t.length?null:s.a.createElement(At.d,null,s.a.createElement(At.b,{className:"Recommendations-title"},"优质推荐"),s.a.createElement(At.c,{className:"Recommendations-list"},t.map(function(e){var t=e.answer,n=e.article;return t?s.a.createElement(Jo,{answer:t,key:t.id}):s.a.createElement(Zo,{article:n,key:n.id})})))}}]),t}(i.Component))||Vo)||Vo,ni=Object(se.a)(function(e){var t=e.question;return{module:"QuestionItem",content:{type:"Question",token:String(t.id),author_member_hash_id:(t.author||{}).id},trackCardShow:!0}})(Xo=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.question,t=e.id,n=e.title,a=e.answerCount,r=e.followerCount,o="/question/".concat(t);return s.a.createElement("div",{className:"SimilarQuestions-item",itemProp:"zhihu:similarQuestion",itemType:"http://schema.org/Question",itemScope:!0},s.a.createElement("meta",{itemProp:"name",content:n}),s.a.createElement("meta",{itemProp:"url",content:"https://www.zhihu.com".concat(o)}),s.a.createElement("meta",{itemProp:"answerCount",content:a}),s.a.createElement("meta",{itemProp:"zhihu:followerCount",content:r}),s.a.createElement(ot.a,{preset:"plain",to:o,target:"_blank"},n)," ",Object(Mt.formatNumber)(a)," 个回答")}}]),t}(i.Component))||Xo;n(2790);var ai,ri=Object(b.connect)(function(e,t){return{items:e.question.similarQuestions[t.question.id]}},{loadSimilarQuestions:j.P})(ei=Object(se.a)({module:"RelatedQuestions"})(ei=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.loadSimilarQuestions)(t)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,a=t.loadSimilarQuestions,r=e.question.id;n!==r&&a(r)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?s.a.createElement(At.d,null,s.a.createElement(At.b,{className:"SimilarQuestions-title"},"相关问题"),s.a.createElement(At.c,{className:"SimilarQuestions-list"},e.map(function(e){return s.a.createElement(ni,{question:e,key:e.id})}))):null}}]),t}(i.Component))||ei)||ei,oi=n(12),ii=n(2016),si=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={hideDescription:!1},n.handleRef=function(e){n.title=e},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.title.offsetWidth<this.title.scrollWidth&&this.setState({hideDescription:!0})}},{key:"render",value:function(){var e=this.props,t=e.link,n=e.title,a=e.description,r=e.meta,o=e.imageUrl,i=this.state.hideDescription;return s.a.createElement(ot.a,{preset:"plain",a:!0,to:t,className:"RelatedCommodities-item",target:"_blank"},s.a.createElement("img",{className:"RelatedCommodities-image",src:Object(Ca.imgUrl)(o,{quality:90,size:"250x0"}),alt:"live"}),s.a.createElement("div",{className:"RelatedCommodities-content"},s.a.createElement("div",{className:G()("RelatedCommodities-subject",{"RelatedCommodities-subject-two":i}),style:{},ref:this.handleRef,"data-tooltip":n},n),i||s.a.createElement("div",{className:"RelatedCommodities-description"},a),s.a.createElement("div",{className:"RelatedCommodities-meta"},r)))}}]),t}(i.Component),ci=n(2256),li=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleListen=function(e){var t="".concat(e.target.closest("a").href,"?extra_auto_play=1");e.preventDefault(),e.stopPropagation(),at.default.trackEvent(e.target,{action:"OpenUrl",element_name:"Play"},{link:{url:t}}),window.open(t,"_blank")},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.item;switch(e.type){case"live":var t=e.id,n=e.subject,a=e.reviewScore,r=e.seats,o=(e.startsAt,e.speaker.member),i=o.name,c=o.avatarUrl;return s.a.createElement(si,{link:"/lives/".concat(t),imageUrl:c,title:n,description:i,meta:s.a.createElement("div",{className:"RelatedCommodities-scoreWrapper"},s.a.createElement(ci.a,{score:a}),Boolean(r&&r.taken)&&"".concat(r.taken," 人参与"),!1)});case"remix_album":case"podcast":case"remix":var l=e.id,u=e.artwork,d=e.title,m=e.author,p=(m=void 0===m?{}:m).user,h=e.trackCount,f="/remix/albums/".concat(l);return s.a.createElement(si,{link:f,imageUrl:u,title:d,description:p&&p.name,meta:s.a.createElement("div",{className:"RelatedCommodities-remixMeta"},s.a.createElement("div",null,"共 ",Object(Mt.formatNumber)(h)," 节课"),s.a.createElement(k.c,{className:"RelatedCommodities-remixListen",onClick:this.handleListen,preset:"plain"},"试听"))});case"special":var v=e.id,b=e.subject,g=e.liveCount,y=e.liveMemberCount,w=e.speakers,E=e.artworkMobile,C=w.slice(0,2).map(function(e){return e.member.name}).join("、");return s.a.createElement(si,{link:"/lives/specials/".concat(v),imageUrl:E,title:b,description:"".concat(C).concat(w.length>=2?" 等":""),meta:"".concat(Object(Mt.formatNumber)(g)," 场 Live, ").concat(Object(Mt.formatNumber)(y)," 次参与")});case"book":var O=e.id,j=e.title,N=e.cover,S=e.authorName,A=e.readCount;return s.a.createElement(si,{link:"/pub/book/".concat(O),imageUrl:N,title:j,description:S,meta:s.a.createElement("div",{className:"RelatedCommodities-bookMeta"},"".concat(Object(Mt.formatNumber)(A)," 人读过"),s.a.createElement("span",{className:"RelatedCommodities-bookRead"},s.a.createElement(ii.a,{width:13,height:14,center:!0}),"阅读"))});default:return null}}}]),t}(i.Component),ui=Object(se.a)(function(e){var t=e.item,n=e.index;if("book"===t.type)return{module:"EBookItem",index:n,content:{type:"EBook",token:String(t.id)},trackCardShow:!0};var a="special"===t.type?"LiveAlbum":Object(oi.pascalize)(t.type);return{module:"".concat(a,"Item"),index:n,content:Object.assign({type:a,id:t.id},"live"===t.type&&{author_member_hash_id:t.speaker.member.id}),trackCardShow:!0}})(li);n(2791);var di,mi,pi,hi=Object(b.connect)(function(e,t){var n=e.question.relatedCommodities[t.question.id];return{attachedInfo:(n||[]).attachedInfo,items:n}},{loadRelatedCommodities:j.O})(ai=Object(se.a)(function(e){return{attachedInfoBytes:e.attachedInfo,module:"ContentList",moduleName:"相关推荐"}})(ai=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadRelatedCommodities)(t,n&&n.id)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,a=t.loadRelatedCommodities,r=e.question.id;n!==r&&a(r)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?s.a.createElement(At.d,null,s.a.createElement(At.b,{className:"RelatedCommodities-title"},"相关推荐"),s.a.createElement(At.c,{className:"RelatedCommodities-list"},e.slice(0,3).map(function(e){return s.a.createElement(ui,{item:e,key:e.id})}))):null}}]),t}(i.Component))||ai)||ai,fi=n(2448),vi=n(572);n(2796);var bi=Object(b.connect)(function(e){var t=e.entities,n=e.question.brand,a={};return n&&n.target&&n.target.urlToken&&(a=t.users[n.target.urlToken]||{}),{brand:n,brandMember:a}},{loadBrand:j.x,loadProfile:po.e})((pi=mi=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).goToBrand=function(){var e=n.props.brand.target;e&&(location.href="/org/".concat(e.urlToken))},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,a=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&n.target.urlToken&&a(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.brand,n=t.logo,a=t.name,r=t.target,o=t.isPuQuestion,i=e.brandMember,c=this.context.currentUser,l=o?"关于大咖":"关于品牌";return s.a.createElement(At.d,{className:G()({MobileBrandQuestionAuthor:!1})},s.a.createElement(At.b,{className:"BrandQuestionAuthor-header"},s.a.createElement("span",{className:"BrandQuestionAuthor-headerText"},l)),s.a.createElement(At.c,{className:G()("BrandQuestionAuthor",r&&"is-clickable"),onClick:this.goToBrand},s.a.createElement("img",{src:n,className:"BrandQuestionAuthor-icon",alt:"brand"}),s.a.createElement("div",{className:"BrandQuestionAuthor-content"},s.a.createElement("div",{className:"BrandQuestionAuthor-name"},a,r&&r.urlToken&&s.a.createElement(Un.a,{className:"BrandQuestionAuthor-badge",badge:r.badge,isOrg:r.isOrg,noLink:!0})),r&&r.headline&&s.a.createElement("div",{className:"BrandQuestionAuthor-intro"},r.headline))),i&&i.id&&c&&c.id!==i.id&&s.a.createElement(vi.a,{className:"BrandQuestionAuthor-buttons",user:i}))}}]),t}(i.Component),mi.contextTypes={currentUser:v.a.object},di=pi))||di;function gi(e){var t=e.text,n=e.from,a=e.score;return s.a.createElement("span",null,n||t,a&&s.a.createElement("strong",null,a))}var yi=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"renderCardImage",value:function(){var e=this.props.meta,t=e.avatar,n=e.title;return t?s.a.createElement(ua.a,{className:G()("QuestionSidebarTopicMeta-cardImage"),src:t,alt:n}):null}},{key:"renderGoodsCard",value:function(){var e=this.props.meta.title;return s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMain QuestionSidebarTopicMeta-goods"},this.renderCardImage(),s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardContent"},s.a.createElement("h3",{className:"QuestionSidebarTopicMeta-cardTitle"},e)))}},{key:"renderGeneralCard",value:function(){var e=this.props.meta,t=e.title,n=e.description1,a=e.description2,r=function(e){var t=e.scores,n=void 0===t?[]:t,a=e.tags,r=void 0===a?[]:a;return n.length>0?n:r.length>0?r:[]}(e),o=r.length?r.map(function(e,t){return s.a.createElement(gi,Object.assign({key:t},e))}):a;return s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMain"},this.renderCardImage(),s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardContent"},s.a.createElement("h3",{className:"QuestionSidebarTopicMeta-cardTitle"},t),n&&s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardDesc"},n),o&&s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardScore"},o)))}},{key:"renderCard",value:function(){return"n_goods"===this.props.meta.category?this.renderGoodsCard():this.renderGeneralCard()}},{key:"renderModule",value:function(){var e=this.props,t=e.meta,n=e.excerpt,a=e.metaCardDisplay,r=t.summary||n;return s.a.createElement(At.d,null,this.renderCard(),"normal"===a&&s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMore"},r&&s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMoreInner",dangerouslySetInnerHTML:{__html:r}}),s.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardLink"},"查看更多",s.a.createElement(de.a,{center:!0}))))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.meta,a=e.metaCardDisplay;if(!n||"none"===a)return null;var r=n.category;return s.a.createElement(z.a,{module:"TopicItem",moduleName:r,card:{content:Object.assign({type:"Topic"},Object(da.a)("topic",t),{sub_type:"MetaCard"})},trackCardShow:!0},s.a.createElement("a",{href:"/topic/".concat(t),target:"_blank",rel:"noopener noreferrer"},this.renderModule()))}}]),t}(i.PureComponent);yi.propTypes={id:v.a.string.isRequired,excerpt:v.a.string,meta:v.a.shape({category:v.a.string,avatar:v.a.string,title:v.a.string,description1:v.a.string,description2:v.a.string,summary:v.a.string,scores:v.a.arrayOf(v.a.shape({url:v.a.string,score:v.a.string,from:v.a.string})),tags:v.a.arrayOf(v.a.shape({text:v.a.string}))}).isRequired,metaCardDisplay:v.a.oneOf(["normal","none"])};n(2797);var wi,Ei,Ci,ki,Oi=(wi=Object(b.connect)(function(e,t){var n=t.params;return{questionId:n.id,items:Object(j.R)(e,{id:n.id})}},{loadQuestionMetaTopics:j.M}),Ei=Object(Jt.a)(null),Object(c.withRouter)(Ci=wi(Ci=Ei(Ci=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.id,n=e.items,a=e.loadQuestionMetaTopics;n||a(t)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.questionId;if(!t||!t.length)return null;var a=t.filter(function(e){return e&&e.meta});if(!a||a.length<1)return null;var r=a[0],o=r.vote,i=r.isVote,c="normal";return o&&i&&(c="none"),s.a.createElement("div",{className:"QuestionSidebarTopicMeta"},s.a.createElement(yi,Object.assign({metaCardDisplay:c},r,{questionId:n})))}}]),t}(i.Component))||Ci)||Ci)||Ci),ji=n(533);var Ni,Si,Ai,Ti,Ri,Ii,xi,Pi,Mi=Object(Jt.a)(null)(ki=Object(se.a)({module:"RightSideBar"})(ki=Object(b.connect)(function(e){return{brand:e.question.brand}},{loadBrand:j.x,loadProfile:po.e})(ki=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).onHeightChange=function(){n.dynamicSticky&&n.dynamicSticky.check()},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question,n=t.id,a=t.questionType,r=e.loadBrand;"commercial"===a&&r(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,a=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&a(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,a=t.question,r=a.id,o=a.questionType,i=t.brand;return s.a.createElement(ji.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:fn.f+10,ref:function(t){e.dynamicSticky=t}},"commercial"===o&&s.a.createElement(fi.a,{questionId:r,pageType:"question",onLoad:this.onHeightChange}),"commercial"===o&&i&&s.a.createElement(bi,{brand:i}),"commercial"!==o&&s.a.createElement(Ko.a,{type:"question",getSidebar:function(){return e.sidebar}}),"normal"===o&&s.a.createElement("div",{className:"Card"},s.a.createElement(Go.a,{isMobile:!1,id:"question/".concat(r),location:"new_question_up",query:{question_token:r},onHeightChange:this.onHeightChange})),s.a.createElement(Oi,null),"commercial"!==o&&s.a.createElement(ti,{question:n,onLoad:this.onHeightChange}),"normal"===o&&s.a.createElement(ri,{question:n,onLoad:this.onHeightChange}),"normal"===o&&s.a.createElement(hi,{question:n,onLoad:this.onHeightChange}),"normal"===o&&s.a.createElement("div",{className:"Card"},s.a.createElement(Go.a,{isMobile:!1,id:"question/".concat(r),location:"new_question_down_sticky",query:{question_token:r},delay:500,onHeightChange:this.onHeightChange})),"commercial"===o&&s.a.createElement(Ko.a,{type:"question",getSidebar:function(){return e.sidebar}}),s.a.createElement(Yo.a,null))}}]),t}(i.Component))||ki)||ki)||ki,Li=Object(b.connect)(function(e,t){var n=t.params.id,a=t.route.resource,r=t.location.query,o=r.group_id,i=r.qc,s=e.currentUser,c=!i&&o,l=Ir(e,{id:n,resource:a}).isDrained,u=Object(j.S)(e,{id:n}),d=u.answerCount,m=u.relationship.isAnonymous;return{isNormalNotification:c,notificationId:o,resource:a,question:u,isDrained:l,invitationShowCount:s&&!m&&d<jr?d?Nr:Sr:0,isBot:e.env.userAgent.isBot,isHuman:Object(dt.c)(e),currentUser:Object(qe.c)(e),canOia:Object(dt.d)(e),shouldOia:Object(dt.f)(e),shouldSpecialOia:Object(dt.g)(e),referer:Object(dt.e)(e),isMuteSpecial:Object(j.u)(u)}})((Ai=Si=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"renderAnswers",value:function(){var e=this.props,t=e.resource,n=e.question,a=n.questionType,r=n.collapsedAnswerCount,o=n.answerCount,i=n.isNormal,c=n.status,l=(c=void 0===c?{}:c).isLocked,u=e.question,d=e.location,m=e.answering,p=e.invitationShowCount,h=e.isDrained,f=e.isMuteSpecial,v="updatedAnswers"===t||h,b="commercial"!==a&&!o;return s.a.createElement("div",null,s.a.createElement(Bo,{question:u,answering:m}),Boolean(p)&&!f&&s.a.createElement($t,{expandCount:p,question:u}),s.a.createElement(so,{resource:t,question:u,location:d}),i&&!l&&"updatedAnswers"!==t&&h&&!b&&s.a.createElement(z.a,{module:"BottomBar"},s.a.createElement(At.d,null,s.a.createElement(ct,{className:"QuestionAnswers-answerButton",size:"spread"}))),v&&r>0&&!f&&s.a.createElement(Ho,{question:u}))}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.isNormalNotification,a=e.notificationId,r=e.location;return s.a.createElement("div",{className:"Question-main"},s.a.createElement("div",{className:"Question-mainColumn"},n?s.a.createElement(Br,{location:r,question:t,id:a}):this.renderAnswers()),s.a.createElement(F.a,null,s.a.createElement(Mi,{question:t})))}}]),t}(i.PureComponent),Si.fetchData=function(e){var t=e.params.id,n=e.route.resource,a=e.location.query,r=a.group_id,o=a.page,i=a.qc;return function(e,a){if(!i&&r)return e(Object(j.H)(r));var s=a(),c=s.env.userAgent,l=Object(dt.d)(s),u=Ar;return c.isBot?u=Tr:l&&(u=4),e(Object(j.G)(t,n,{offset:Object(Or.c)(Number(o)||1),limit:u}))}},Ni=Ai))||Ni,Di=n(152),qi=n(63),_i=(n(2449),Ti=Object(b.connect)(null,{loadAnswer:it.m,loadContentRightsNotification:qi.o}),Object(c.withRouter)(Ri=Ti((xi=Ii=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={contentRef:null},n.contentRef=s.a.createRef(),n.handleCloseComment=function(){var e=n.props,t=e.location,a=t.pathname,r=t.search;e.byComment&&n.props.router.replace("".concat(a).concat(r))},n.handleCloseEditing=function(){var e=n.props,t=e.location,a=t.pathname,r=t.query,o=e.router,i=r.editing,s=Object(je.a)(r,["editing"]);if(i){var c=In.a.stringify(s)||"";o.replace("".concat(a).concat(c&&"?").concat(c))}},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(!n||n.question&&n.question.id!==t||n.isDelete)&&this.props.router.replace("/question/".concat(t))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.loadContentRightsNotification;this.context.currentUser&&Object(Q.c)("answer",t,Q.a),this.setState({contentRef:this.contentRef.current}),$a.a.get("answer::justPublished")&&($a.a.delete("answer::justPublished"),n("answer",t))}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.relationship,a=n.canCollapseAnswers,r=n.canStickAnswers,o=t.hasPublishingDraft,i=e.answer,c=e.location,l=c.hash,u=c.query;return s.a.createElement(At.d,{className:"AnswerCard"},s.a.createElement("div",{className:"QuestionAnswer-content",ref:this.contentRef,tabIndex:0},s.a.createElement(Di.d.Provider,{value:this.state.contentRef},s.a.createElement(kr.a,{relatedTo:"answer",answer:i,byComment:Object(Mn.a)(l),onCloseComment:this.handleCloseComment,onCloseEditing:this.handleCloseEditing,canCollapse:a,canStick:r,editing:u&&"true"===u.editing,editable:!0,expanded:!0,hasPublishingDraft:o,itemProp:"mainEntityOfPage"}))))}}]),t}(i.Component),Ii.contextTypes={currentUser:v.a.object},Ri=xi))||Ri)||Ri),zi=(n(2798),2);var Bi,Qi,Ui,Fi,Vi=Object(b.connect)(function(e,t){var n=t.question.id,a=t.answerId,r=e.entities.answers,o=e.question.answers[n]||{ids:[],isDrained:!1},i=o.ids;return{isDrained:o.isDrained,items:i.filter(function(e){return e!==Number(a)}).slice(0,zi).map(function(e){return r[e]}),isWechat:e.env.userAgent.Wechat}},{loadAnswer:it.m,loadItems:j.G})(Pi=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.items;t||n.length||this.loadItems()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.question.id,n=e.question.id,a=e.isDrained,r=e.items;n!==t&&!a&&r.length<zi&&this.loadItems()}},{key:"loadItems",value:function(){var e=this.props,t=e.question.id,n=e.loadItems;return n(t,"answers",{limit:3})}},{key:"render",value:function(){var e=this.props,t=e.question.relationship.canCollapseAnswers,n=e.items,a=e.isWechat;return Boolean(n.length)&&s.a.createElement(At.d,{className:"MoreAnswers"},s.a.createElement(Tt.b,{title:"更多回答","data-zop-feedlist":!0},n.map(function(e){return s.a.createElement(Cr.a,{key:e.id},s.a.createElement(kr.a,{relatedTo:"question",answer:e,canCollapse:t,lastreadTouchable:!0,blockReading:!a}))})))}}]),t}(i.Component))||Pi,Hi=n(1975),Wi=n(171),Gi=n(336),Ki=n(510),Yi=n(1998),$i=n(86),Ji=Object(b.connect)(function(e,t){var n=t.author;return Object.assign({currentUser:Object(qe.c)(e)},n&&function(e,t){var n=t.urlToken||t.id,a=e.people.mutualsByUser[n]||{isDrained:!1,isFetching:!1,ids:[]};return{isDrained:a.isDrained,isFetching:a.isFetching,items:a.ids.map(function(t){var n=Object($i.c)(e,{id:t});return n.code?null:n}).filter(Boolean)}}(e,{urlToken:n.urlToken}))},{loadItems:po.d})(Bi=Object(sn.a)({shouldLoad:function(e){return e.currentUser&&e.author&&e.author.urlToken&&e.currentUser.urlToken!==e.author.urlToken&&!e.isDrained},load:function(e){return e.loadItems(e.author.urlToken,"mutuals")}})((Ui=Qi=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.author;return t&&t.length?s.a.createElement("div",{className:"AnswerAuthor-item"},s.a.createElement("span",{className:"AnswerAuthor-item-icon"},s.a.createElement(Yi.a,{text:!0,center:!0})),s.a.createElement("div",{className:"AnswerAuthor-item-value"},s.a.createElement(Ki.CJKSpace,null,t.slice(0,3).map(function(e,t){return s.a.createElement("span",{key:e.urlToken},0!==t&&"、",s.a.createElement(jt.a,{user:e,noBadge:!0,noHoverCard:!0},e.name))}),"也关注了",fn.F[n.gender]))):null}}]),t}(i.Component),Qi.propTypes={author:v.a.object.isRequired},Bi=Ui))||Bi)||Bi,Zi=(n(2799),function(e){return e&&void 0!==e.answerCount&&"undefined"!=typeof articlesCount&&"undefined"!=typeof followerCount&&void 0!==e.badge});var Xi,es=Object(b.connect)(function(e,t){var n=t.answer,a=n.author,r=n.author.urlToken,o=e.entities.users,i=r?o[r]:a;return{currentUser:Object(qe.c)(e),isDrained:Zi(i),user:i,isSelf:Object(qe.g)(e,i)}},{loadProfile:po.e})(Fi=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.nextItem()}},{key:"componentWillReceiveProps",value:function(e){this.props.answer.author.urlToken!==e.answer.author.urlToken&&this.nextItem(e)}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.props.onLoad&&this.props.onLoad()}},{key:"nextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.answer.author.urlToken,n=e.loadProfile,a=e.isDrained;t&&(a||n(t))}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.isSelf;if(!t)return null;var a=t.urlToken,r=t.isOrg,o=t.headline,i=t.badge,c=t.answerCount,l=t.articlesCount,u=t.followerCount,d=Object(Wi.a)(i),m=d.identityInfo,p=d.bestAnswererInfo,h=d.bestAnswererTopics,f=d.baikeInfo,v=r?"org":"people";return s.a.createElement(At.d,{className:"AnswerAuthor"},s.a.createElement(At.b,{className:"AnswerAuthor-title"},"关于作者"),s.a.createElement(At.c,null,s.a.createElement("div",{className:"AnswerAuthor-user"},s.a.createElement("div",{className:"AnswerAuthor-user-avatar"},s.a.createElement(jt.a,{user:t,avatar:!0,avatarProps:{size:60},noHoverCard:!0})),s.a.createElement("div",{className:"AnswerAuthor-user-content"},s.a.createElement("div",{className:"AnswerAuthor-user-name"},s.a.createElement(jt.a,{user:t,noBadge:!0,noHoverCard:!0})),o&&s.a.createElement("div",{className:"AnswerAuthor-user-headline"},s.a.createElement(Ot.a,{html:o}))))),s.a.createElement(At.c,null,m&&s.a.createElement("div",{className:"AnswerAuthor-item"},s.a.createElement("a",{className:"AnswerAuthor-item-icon",href:"/account/verification/intro",target:"_blank"},s.a.createElement(Z.a,{center:!0,size:19})),s.a.createElement("div",{className:"AnswerAuthor-item-value"},m.slice(0,2).join("，"))),h&&h.length>0&&s.a.createElement("div",{className:"AnswerAuthor-item"},s.a.createElement("span",{className:"AnswerAuthor-item-icon"},s.a.createElement(J.a,{center:!0,size:19})),s.a.createElement("div",null,s.a.createElement(Gi.a,{topics:h,user:t,noHoverCard:!0}),"的",p)),Boolean(f)&&s.a.createElement("div",{className:"AnswerAuthor-item"},s.a.createElement("span",{className:"AnswerAuthor-item-icon"},s.a.createElement(Hi.a,{center:!0,size:19})),s.a.createElement("div",null,f)),t&&!n&&s.a.createElement(Ji,{author:t})),a&&s.a.createElement(At.c,null,s.a.createElement("div",{className:"AnswerAuthor-counts"},s.a.createElement(en.a,null,s.a.createElement(en.a.Item,{tag:ot.a,preset:"plain",to:"/".concat(v,"/").concat(a,"/answers"),name:"回答",value:c,"data-za-detail-view-element_name":"Answer"}),s.a.createElement(en.a.Item,{tag:ot.a,preset:"plain",to:"/".concat(v,"/").concat(a,"/posts"),name:"文章",value:l,"data-za-detail-view-element_name":"Post"}),s.a.createElement(en.a.Item,{tag:ot.a,preset:"plain",to:"/".concat(v,"/").concat(a,"/followers"),name:"关注者",value:u,"data-za-detail-view-element_name":"Follower"}))),!n&&s.a.createElement(vi.a,{className:"AnswerAuthor-buttons",user:t})))}}]),t}(i.Component))||Fi,ts=n(2210);n(2800);var ns,as=Object(b.connect)(function(e,t){var n=t.answer.id,a=e.entities.favlists,r=e.answers.favlists[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:r.ids.map(function(e){return a[e]}),count:r.totals,isFetching:r.isFetching,isDrained:r.isDrained}},{loadAnswerFavlists:it.q})(Xi=Object(se.a)({module:"CollectionList"})(Xi=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).load=function(){var e=n.props,t=e.answer.id;(0,e.loadAnswerFavlists)(t)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,a=e.isFetching,r=e.isDrained;return s.a.createElement("div",{className:"AnswerFavlists"},s.a.createElement("div",{className:"AnswerFavlists-header"},s.a.createElement("div",{className:"AnswerFavlists-title"},"被收藏 ",Object(Mt.formatNumber)(n)," 次")),!(r&&!t.length)&&s.a.createElement(Wa.b,{className:"AnswerFavlists-list",isLocal:!0,isLoading:a,isDrained:r,onLoad:this.load,getContainer:function(e){return e},placeholder:s.a.createElement(Wa.a,{className:"AnswerFavlists-item",small:!0})},t.map(function(e){var t=e.id,n=e.type,a=e.creator,r=e.isFollowing,o=e.answerCount,i=e.followerCount;return s.a.createElement(Tt.a,{key:t},s.a.createElement(ts.a,{favlist:e,action:s.a.createElement(lt.a,{preset:"primary",id:t,type:n,isFollowing:r}),status:s.a.createElement(_t.d,null,s.a.createElement("span",null,"由"," ",s.a.createElement(jt.a,{user:a,noBadge:!0,noHoverCard:!0,target:"_blank"})," ","创建"),s.a.createElement("span",null,Object(Mt.formatNumber)(o)," 条内容"),s.a.createElement("span",null,Object(Mt.formatNumber)(i)," 人关注"))}))})))}}]),t}(i.Component))||Xi)||Xi;n(2801);var rs,os,is,ss=Object(b.connect)(function(e,t){var n=t.answer.id,a=e.entities.copyrightApplicants,r=e.answers.copyrightApplicants[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:r.ids.map(function(e){return a[e]}),count:r.totals,isFetching:r.isFetching,isDrained:r.isDrained}},{loadAnswerCopyrightApplicants:it.p})(ns=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).load=function(){var e=n.props,t=e.answer.id;(0,e.loadAnswerCopyrightApplicants)(t)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,a=e.isFetching,r=e.isDrained;return s.a.createElement("div",{className:"AnswerCopyrightApplicants"},s.a.createElement("div",{className:"AnswerCopyrightApplicants-header"},s.a.createElement("div",{className:"AnswerCopyrightApplicants-title"},"授权转载 ",Object(Mt.formatNumber)(n)," 次")),!(r&&!t.length)&&s.a.createElement(Wa.b,{className:"AnswerCopyrightApplicants-list",isLocal:!0,isLoading:a,isDrained:r,onLoad:this.load,getContainer:function(e){return e},placeholder:s.a.createElement(Wa.a,{className:"AnswerCopyrightApplicants-item",small:!0})},t.map(function(e){var t=e.applier,n=e.accountType,a=e.accountUsername,r=e.createdAt;return s.a.createElement("div",{className:"AnswerCopyrightApplicants-item",key:"".concat(t.name,".").concat(r)},s.a.createElement(Lt.a,{user:t,meta:"".concat(n," ").concat(a),status:null,action:s.a.createElement("div",{className:"AnswerCopyrightApplicants-time"},"申请于 ",Object(C.toDateString)(r))}))})))}}]),t}(i.Component))||ns,cs=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.copyrightApplicant,t=e.applier,n=e.accountType,a=e.accountUsername,r=e.createdAt;return s.a.createElement("div",{className:"AnswerInfo-copyright-applicant",key:"".concat(t.name,".").concat(r)},s.a.createElement(jt.a,{user:t,noBadge:!0,noHoverCard:!0,target:"_blank"}),"，",n," ",a)}}]),t}(i.Component),ls=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.copyrightApplicants;return s.a.createElement(At.c,{className:"AnswerInfo-copyright-applicants",key:"content"},e.map(function(e,t){return s.a.createElement(cs,{key:t,copyrightApplicant:e})}))}}]),t}(i.Component),us=Object(se.a)(function(e){var t=e.favlist;return{module:"CollectionItem",content:{type:"Collection",token:String(t.id),follower_num:t.followerCount,author_member_hash_id:t.creator.id},trackCardShow:!0}})(rs=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.favlist,t=e.id,n=e.title,a=e.followerCount,r=e.creator;return s.a.createElement("div",{className:"AnswerInfo-favlist",key:t},s.a.createElement("div",{className:"AnswerInfo-favlist-title"},s.a.createElement(ot.a,{preset:"plain",a:!0,to:"/collection/".concat(t),target:"_blank","data-za-detail-view-element_name":"Collection",title:n},n)),s.a.createElement("div",{className:"AnswerInfo-favlist-author"},s.a.createElement(jt.a,{user:r,noBadge:!0,noHoverCard:!0,target:"_blank","data-za-detail-view-element_name":"Author"})," ","创建"),s.a.createElement("div",{className:"AnswerInfo-favlist-followers"},Object(Mt.formatNumber)(a)," 人关注"))}}]),t}(i.Component))||rs,ds=Object(se.a)({module:"CollectionList"})(os=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.favlists;return s.a.createElement(At.c,{className:"AnswerInfo-favlists",key:"content"},e.map(function(e){return s.a.createElement(us,{favlist:e,key:e.id})}))}}]),t}(i.Component))||os;n(2802);var ms,ps,hs,fs,vs,bs=Object(b.connect)(function(e,t){var n=t.answer.id,a=e.entities,r=a.copyrightApplicants,o=a.favlists,i=e.answers.copyrightApplicants[n]||{totals:0,ids:[]},s=e.answers.favlists[n]||{totals:0,ids:[]};return{copyrightApplicants:i.ids.map(function(e){return r[e]}),copyrightApplicantCount:i.totals,favlists:s.ids.map(function(e){return o[e]}),favlistCount:s.totals}},{loadAnswerCopyrightApplicants:it.p,loadAnswerFavlists:it.q})(is=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={copyrightApplicantsModalShown:!1,favlistsModalShown:!1},n.handleCopyrightApplicantsModalShow=function(){at.default.trackEvent(Object(ue.a)(n),{action:"Click",element:"Button",name:"转载授权"}),n.setState({copyrightApplicantsModalShown:!0})},n.handleCopyrightApplicantsModalHide=function(){n.setState({copyrightApplicantsModalShown:!1})},n.handleFavlistsModalShow=function(){at.default.trackEvent(Object(ue.a)(n),{action:"Click",element:"Button",name:"被收藏"}),n.setState({favlistsModalShown:!0})},n.handleFavlistsModalClose=function(){n.setState({favlistsModalShown:!1})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.copyrightApplicants,a=e.favlists,r=e.loadAnswerCopyrightApplicants,o=e.loadAnswerFavlists;n.length||a.length||(r(t),o(t))}},{key:"componentDidUpdate",value:function(e){this.props.onLoad&&(!e.copyrightApplicants.length&&this.props.copyrightApplicants.length||!e.favlists.length&&this.props.favlists.length)&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.copyrightApplicants,a=e.copyrightApplicantCount,r=e.favlists,o=e.favlistCount,i=this.state,c=i.favlistsModalShown,l=i.copyrightApplicantsModalShown;return n.length||r.length?s.a.createElement(At.d,null,Boolean(n.length)&&[s.a.createElement(At.b,{className:"AnswerInfo-title",key:"header"},"授权转载"," ",s.a.createElement(k.c,{preset:"plain",onClick:this.handleCopyrightApplicantsModalShow},Object(Mt.formatNumber)(a))," ","次"),s.a.createElement(ls,{copyrightApplicants:n.slice(0,5),key:"content"})],Boolean(r.length)&&[s.a.createElement(At.b,{className:"AnswerInfo-title",key:"header"},"被收藏"," ",s.a.createElement(k.c,{preset:"plain",onClick:this.handleFavlistsModalShow},Object(Mt.formatNumber)(o))," ","次"),s.a.createElement(ds,{favlists:r.slice(0,5),key:"content"})],s.a.createElement(ve.b,{size:"fullPage",onClose:this.handleFavlistsModalClose},c&&s.a.createElement(as,{answer:t})),s.a.createElement(ve.b,{size:"fullPage",onClose:this.handleCopyrightApplicantsModalHide},l&&s.a.createElement(ss,{answer:t}))):null}}]),t}(i.Component))||is,gs=Object(Jt.a)(null)(ms=Object(se.a)(function(e){var t=e.answer;return{module:"RightSideBar",content:Object.assign({},t.author&&{member_hash_id:t.author.id})}})(ms=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).onHeightChange=function(){n.dynamicSticky&&n.dynamicSticky.check()},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.answer.id!==this.props.answer.id}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,a=t.question,r=a.id,o=a.questionType,i=t.answer,c=Object(it.l)(i)||Object(it.j)(i);return s.a.createElement(ji.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:fn.f+10,ref:function(t){e.dynamicSticky=t}},s.a.createElement(Ko.a,{type:"question",getSidebar:function(){return e.sidebar}}),c||"normal"===o&&s.a.createElement("div",{className:"Question-sideColumnAdContainer"},s.a.createElement(Go.a,{isMobile:!1,id:"question/".concat(r,"/answer/").concat(i.id),location:"new_answer_up",query:{question_token:r,answer_token:i.id},onHeightChange:this.onHeightChange})),"commercial"===o&&s.a.createElement(fi.a,{questionId:r}),i.author&&s.a.createElement(es,{answer:i,onLoad:this.onHeightChange}),s.a.createElement(Oi,null),s.a.createElement(bs,{answer:i,onLoad:this.onHeightChange}),c||"commercial"!==o&&s.a.createElement(ti,{question:n,onLoad:this.onHeightChange}),c||"normal"===o&&s.a.createElement(ri,{question:n,onLoad:this.onHeightChange}),c||"normal"===o&&s.a.createElement(hi,{answer:i,question:n,onLoad:this.onHeightChange}),c||"normal"===o&&s.a.createElement("div",null,s.a.createElement(Go.a,{isMobile:!1,id:"question/".concat(r,"/answer/").concat(i.id),location:"new_answer_down_sticky",query:{question_token:r,answer_token:i.id},delay:1e3,onHeightChange:this.onHeightChange})),s.a.createElement(Yo.a,null))}}]),t}(i.Component))||ms)||ms,ys=(n(2803),Object(se.a)(function(e){return{module:"MessageItem",content:{item_num:e.itemNum}}})(ps=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.itemNum,a=e.questionType;e.bottom;return s.a.createElement(At.d,{className:G()("ViewAll",{"ViewAll--bottom":!1})},s.a.createElement(Pt,{className:"ViewAll-QuestionMainAction",to:t,"data-za-detail-view-element_name":"ViewAll",style:{}},"commercial"===a?"查看 ".concat(Object(Mt.formatNumber)(n)," 个品牌推荐的回答"):"查看全部 ".concat(Object(Mt.formatNumber)(n)," 个回答")))}}]),t}(i.Component))||ps);var ws=Object(b.connect)(function(e,t){var n=t.params,a=n.id,r=n.answerId,o=Object(j.S)(e,{id:a}),i=Object(it.c)(e,{id:r}),s=(o||{}).relationship||{myAnswer:{isDelete:!1}};return{question:o,answer:i&&Object.assign({},i,{isDelete:(i.relationship||{}).isAuthor&&(s.myAnswer||{}).isDeleted}),isMuteSpecial:Object(j.u)(o)}},{loadAnswer:it.m})((vs=fs=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer,n=e.params.answerId,a=e.loadAnswer;t||a(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.params.answerId,n=e.params.answerId,a=e.loadAnswer;n!==t&&a(n)}},{key:"render",value:function(){if(!this.props.answer)return null;var e=this.props,t=e.answer,n=e.answer.id,a=e.question,r=e.question,o=r.id,i=r.answerCount,c=r.questionType,l=e.location,u=e.isMuteSpecial;return s.a.createElement("div",{className:"Question-main"},s.a.createElement(y.a,{meta:Object(_a.a)(t)}),s.a.createElement(Di.b,{selector:[".ViewAll-QuestionMainAction",".QuestionAnswer-content",".List-item"].join(",")},s.a.createElement("div",{className:"Question-mainColumn","data-zop-questionanswerlist":!0},Object(it.l)(t)||Object(it.j)(t)||i>0&&!u&&s.a.createElement(ys,{itemNum:i,to:"/question/".concat(o),questionType:c}),s.a.createElement(_i,{question:a,location:l,answer:t}),Object(it.l)(t)||Object(it.j)(t)||s.a.createElement(Vi,{question:a,answerId:n}),i>0&&!u&&s.a.createElement(ys,{itemNum:i,to:"/question/".concat(o),questionType:c}))),s.a.createElement(F.a,null,s.a.createElement(gs,{question:a,answer:t})))}}]),t}(i.Component),fs.fetchData=function(e){var t=e.params.answerId;return Object(it.m)(t)},hs=vs))||hs;t.default=s.a.createElement(c.Route,null,s.a.createElement(c.Route,{path:"waiting",component:or,name:"QuestionWaiting",authRequired:!0,zaPageId:5541}),s.a.createElement(c.Route,{path:"later",component:ur,name:"QuestionLater",authRequired:!0,zaPageId:5371}),s.a.createElement(c.Route,{path:"invited",component:br,name:"QuestionInvited",authRequired:!0,zaPageId:5543}),s.a.createElement(c.Route,{path:":id",component:Ha,name:"Question"},s.a.createElement(c.Route,{sticky:function(){var e=document.querySelector("#QuestionAnswers-answers");return e?e.offsetTop:0}},s.a.createElement(c.IndexRoute,{component:Li,entity:"answers",resource:"answers",name:"QuestionPage",zaPageId:3378}),s.a.createElement(c.Route,{path:"answers/hidden",component:Li,entity:"answers",resource:"hiddenAnswers",name:"QuestionHiddenAnswers"}),s.a.createElement(c.Route,{path:"answers/updated",component:Li,resource:"updatedAnswers",name:"QuestionUpdatedAnswers"}),s.a.createElement(c.Redirect,{from:"answers/created",to:"answers/updated"})),s.a.createElement(c.Route,{path:"answer/:answerId",component:ws,name:"AnswerPage",zaPageId:2012}),s.a.createElement(c.Redirect,{from:"noti-answers",to:"."})))}}]);
//# sourceMappingURL=main.question-routes.4fd94cbc253d9a6810f9.js.map