webpackJsonp([66],{841:function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function l(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function r(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}Object.defineProperty(n,"__esModule",{value:!0});var a=t(1),c=t.n(a),s=t(32),f=t(48),u=t(54),m=t(5),d=t(26),p=t(119),h=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),g=r(["\n    line-height: 1.4em;\n    font-size: 20px;\n    color: ",";\n    font-weight: bold;\n"],["\n    line-height: 1.4em;\n    font-size: 20px;\n    color: ",";\n    font-weight: bold;\n"]),x=r(["\n    line-height: 1.7em;\n    margin: 10px 0 0;\n    font-size: 14px;\n    color: #333030;\n"],["\n    line-height: 1.7em;\n    margin: 10px 0 0;\n    font-size: 14px;\n    color: #333030;\n"]),b=r(["\n    font-weight: bold;\n"],["\n    font-weight: bold;\n"]),C=r(["\n    display: flex;\n    margin: 20px 0 0;\n"],["\n    display: flex;\n    margin: 20px 0 0;\n"]),v=r(["\n    height: 40px;\n    line-height: 40px;\n    margin: 0 6px 0 0; \n    bottom: none;\n    font-weight: bold;\n    flex: 1;\n"],["\n    height: 40px;\n    line-height: 40px;\n    margin: 0 6px 0 0; \n    bottom: none;\n    font-weight: bold;\n    flex: 1;\n"]),D=r(["\n    height: 40px;\n    line-height: 40px;\n    margin: 0 0 0 6px;\n    border: none;\n    font-weight: bold;\n    background-color: ",";\n    color: #fff;\n    flex: 1;\n\n    &:hover {\n        background-color: ",";\n        color: #fff;\n    }\n"],["\n    height: 40px;\n    line-height: 40px;\n    margin: 0 0 0 6px;\n    border: none;\n    font-weight: bold;\n    background-color: ",";\n    color: #fff;\n    flex: 1;\n\n    &:hover {\n        background-color: ",";\n        color: #fff;\n    }\n"]),k=r(["\n    margin: 0 0 0 4px;\n"],["\n    margin: 0 0 0 4px;\n"]),y=r(["\n    line-height: 20px;\n    margin: 8px 0 0 0;\n    font-size: 14px;\n    color: ",";\n    text-align: center;\n"],["\n    line-height: 20px;\n    margin: 8px 0 0 0;\n    font-size: 14px;\n    color: ",";\n    text-align: center;\n"]),w=m.default.h6(g,d.e.Main),E=m.default.p(x),S=m.default.span(b),O=m.default.div(C),T=d.b.Red.extend(v),j=d.b.Base.extend(D,d.e.Dark4,d.e.LightenDarkenColor(d.e.Dark4,10)),z=m.default.span(k),_=m.default.div(y,d.e.Red),M=function(e){function n(e){o(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={cumatrixUID:void 0,collection:void 0,deleteConfirmSeconds:0,isDeleting:!1,errorMsg:""},t.deleteConfirmTimeout=void 0,t.closeDialog=t.closeDialog.bind(t),t.confirm=t.confirm.bind(t),t.cancel=t.cancel.bind(t),t}return l(n,e),h(n,[{key:"componentDidMount",value:function(){this.init(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.init(e)}},{key:"componentDidUpdate",value:function(e,n){}},{key:"init",value:function(e){var n=e.cumatrixCache,t=e.deleteCollectionDialog,o=t.cumatrixUID,i=n[o];this.setState({cumatrixUID:o,collection:i,isDeleting:!1,errorMsg:""}),this.startDeleteConfirmTimeout()}},{key:"startDeleteConfirmTimeout",value:function(){var e=this;this.deleteConfirmTimeout&&clearTimeout(this.deleteConfirmTimeout),this.setState({deleteConfirmSeconds:5},function(){e.nextDeleteConfirmTimeout()})}},{key:"nextDeleteConfirmTimeout",value:function(){var e=this;this.state.deleteConfirmSeconds<=0||(this.deleteConfirmTimeout=setTimeout(function(){var n=e.state.deleteConfirmSeconds-1;e.setState({deleteConfirmSeconds:n}),e.nextDeleteConfirmTimeout()},1e3))}},{key:"closeDialog",value:function(){this.props.collectionActions.closeDeleteCollectionDialog()}},{key:"confirm",value:function(){var e=this,n=this.state,t=n.cumatrixUID,o=n.isDeleting,i=n.deleteConfirmSeconds;o||i>0||this.setState({isDeleting:!0,errorMsg:""},function(){e.props.collectionActions.removeCumatrix({cumatrixid:t}).then(function(n){e.props.deleteCollectionDialog.callback&&e.props.deleteCollectionDialog.callback(t),e.closeDialog(),e.setState({isDeleting:!1})},function(n){var t=n&&n.message?n.message:"\u7cfb\u7d71\u5fd9\u788c\u4e2d\uff0c\u8acb\u7a0d\u5019\u518d\u8a66";e.setState({isDeleting:!1,errorMsg:t})})})}},{key:"cancel",value:function(){this.closeDialog()}},{key:"render",value:function(){var e=this.state,n=e.collection,t=e.deleteConfirmSeconds,o=e.isDeleting,i=e.errorMsg;if(!n)return null;var l=n.name;return c.a.createElement(d.f.Content,{width:"360px",maxWidth:"360px",padding:"30px",backgroundColor:"#fff",border:"1px solid #D8D8D8",borderRadius:"5px",maskBackgroundColor:"rgba(247, 247, 247, 0.8)",boxShadow:"0 1px 4px 0 rgba(0,0,0,0.10)",visible:!0,animation:"zoom",maskAnimation:"fade",closable:!1,maskClosable:!1,keyboard:!1,onClose:this.cancel},c.a.createElement(d.f.CloseButton,{onClick:this.cancel},c.a.createElement("i",{className:"zmdi zmdi-close"})),c.a.createElement(w,null,c.a.createElement(p.a,null,"\u78ba\u5b9a\u522a\u9664\u66f8\u7c4d\u8ab2\u7a0b\uff1f")),c.a.createElement(E,null,c.a.createElement(p.a,null,"\u5982\u679c\u522a\u9664",c.a.createElement(S,null,"\u300c",l,"\u300d"),"\u66f8\u7c4d\u8ab2\u7a0b\uff0c\u6240\u6709\u8a02\u95b1\u8005\u90fd\u5c07\u7121\u6cd5\u770b\u5230\u6216\u627e\u5230\u8a72\u66f8\u7c4d\u8ab2\u7a0b\u7684\u4efb\u4f55\u5167\u5bb9\u3002")),c.a.createElement(O,null,c.a.createElement(T,{onClick:this.confirm,disable:o||t>0},o?c.a.createElement(d.i.Spin,{size:"16px",color:"#fff",margin:"0 10px 0 0"}):null,c.a.createElement(p.a,null,"\u522a\u9664\u66f8\u7c4d\u8ab2\u7a0b"),t>0?c.a.createElement(z,null,t):null),c.a.createElement(j,{onClick:this.cancel},c.a.createElement(p.a,{"translate-key":"component_cancel"},"\u53d6\u6d88"))),i?c.a.createElement(_,null,i):null)}}]),n}(a.Component),P=function(e){return{cumatrixCache:e.collection.cumatrixCache,deleteCollectionDialog:e.collection.deleteCollectionDialog}},A=function(e){return{collectionActions:Object(s.bindActionCreators)(u.a.collectionActionCreators,e)}};n.default=Object(f.b)(P,A,null,{withRef:!0})(M)}});
//# sourceMappingURL=66.146ee771.chunk.js.map